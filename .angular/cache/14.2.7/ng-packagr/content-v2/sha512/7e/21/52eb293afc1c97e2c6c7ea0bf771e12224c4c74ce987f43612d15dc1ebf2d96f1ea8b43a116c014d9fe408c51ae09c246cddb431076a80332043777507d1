{"modules":[{"ast":{"type":"Program","start":0,"end":1051,"body":[{"type":"ImportDeclaration","start":0,"end":47,"specifiers":[{"type":"ImportSpecifier","start":9,"end":23,"imported":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"},"local":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"}}],"source":{"type":"Literal","start":31,"end":46,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ExportNamedDeclaration","start":49,"end":147,"declaration":{"type":"VariableDeclaration","start":56,"end":147,"declarations":[{"type":"VariableDeclarator","start":62,"end":146,"id":{"type":"Identifier","start":62,"end":82,"name":"_INITIAL_SYNC_CONFIG"},"init":{"type":"NewExpression","start":85,"end":146,"callee":{"type":"Identifier","start":89,"end":103,"name":"InjectionToken"},"arguments":[{"type":"Literal","start":104,"end":145,"value":"ngrx-store-sync Internal Initial Config","raw":"'ngrx-store-sync Internal Initial Config'"}]}}],"kind":"const"},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":149,"end":231,"declaration":{"type":"VariableDeclaration","start":156,"end":231,"declarations":[{"type":"VariableDeclarator","start":162,"end":230,"id":{"type":"Identifier","start":162,"end":174,"name":"_SYNC_CONFIG"},"init":{"type":"NewExpression","start":177,"end":230,"callee":{"type":"Identifier","start":181,"end":195,"name":"InjectionToken"},"arguments":[{"type":"Literal","start":196,"end":229,"value":"ngrx-store-sync Internal Config","raw":"'ngrx-store-sync Internal Config'"}]}}],"kind":"const"},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9saWIvdG9rZW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0MsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxjQUFjLENBQUMseUNBQXlDLENBQUMsQ0FBQztBQUNsRyxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxjQUFjLENBQUMsaUNBQWlDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgX0lOSVRJQUxfU1lOQ19DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ25ncngtc3RvcmUtc3luYyBJbnRlcm5hbCBJbml0aWFsIENvbmZpZycpO1xyXG5leHBvcnQgY29uc3QgX1NZTkNfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuKCduZ3J4LXN0b3JlLXN5bmMgSW50ZXJuYWwgQ29uZmlnJyk7XHJcbiJdfQ==","start":233,"end":1051}]},"code":"import { InjectionToken } from '@angular/core';\r\nexport const _INITIAL_SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Initial Config');\r\nexport const _SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Config');\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9saWIvdG9rZW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0MsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxjQUFjLENBQUMseUNBQXlDLENBQUMsQ0FBQztBQUNsRyxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxjQUFjLENBQUMsaUNBQWlDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgX0lOSVRJQUxfU1lOQ19DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ25ncngtc3RvcmUtc3luYyBJbnRlcm5hbCBJbml0aWFsIENvbmZpZycpO1xyXG5leHBvcnQgY29uc3QgX1NZTkNfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuKCduZ3J4LXN0b3JlLXN5bmMgSW50ZXJuYWwgQ29uZmlnJyk7XHJcbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core"],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\tokens.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { InjectionToken } from '@angular/core';\r\nexport const _INITIAL_SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Initial Config');\r\nexport const _SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Config');\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9saWIvdG9rZW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0MsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxjQUFjLENBQUMseUNBQXlDLENBQUMsQ0FBQztBQUNsRyxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxjQUFjLENBQUMsaUNBQWlDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgX0lOSVRJQUxfU1lOQ19DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ25ncngtc3RvcmUtc3luYyBJbnRlcm5hbCBJbml0aWFsIENvbmZpZycpO1xyXG5leHBvcnQgY29uc3QgX1NZTkNfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuKCduZ3J4LXN0b3JlLXN5bmMgSW50ZXJuYWwgQ29uZmlnJyk7XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"tokens.js","sourceRoot":"","sources":["../../../../projects/ngrx-store-sync/src/lib/tokens.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[23,0,0,23],[25,0,0,25],[31,0,0,31],[46,0,0,46],[47,0,0,47]],[[0,0,2,0],[6,0,2,6],[7,0,2,7],[13,0,2,13],[33,0,2,33],[36,0,2,36],[40,0,2,40],[54,0,2,54],[55,0,2,55],[96,0,2,96],[97,0,2,97],[98,0,2,98]],[[0,0,3,0],[6,0,3,6],[7,0,3,7],[13,0,3,13],[25,0,3,25],[28,0,3,28],[32,0,3,32],[46,0,3,46],[47,0,3,47],[80,0,3,80],[81,0,3,81],[82,0,3,82]]],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\n\r\nexport const _INITIAL_SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Initial Config');\r\nexport const _SYNC_CONFIG = new InjectionToken('ngrx-store-sync Internal Config');\r\n"]},"resolvedIds":{"@angular/core":{"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":34009,"body":[{"type":"ImportDeclaration","start":0,"end":51,"specifiers":[{"type":"ImportSpecifier","start":9,"end":15,"imported":{"type":"Identifier","start":9,"end":15,"name":"Inject"},"local":{"type":"Identifier","start":9,"end":15,"name":"Inject"}},{"type":"ImportSpecifier","start":17,"end":27,"imported":{"type":"Identifier","start":17,"end":27,"name":"Injectable"},"local":{"type":"Identifier","start":17,"end":27,"name":"Injectable"}}],"source":{"type":"Literal","start":35,"end":50,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ImportDeclaration","start":53,"end":98,"specifiers":[{"type":"ImportSpecifier","start":62,"end":74,"imported":{"type":"Identifier","start":62,"end":74,"name":"createEffect"},"local":{"type":"Identifier","start":62,"end":74,"name":"createEffect"}}],"source":{"type":"Literal","start":82,"end":97,"value":"@ngrx/effects","raw":"'@ngrx/effects'"}},{"type":"ImportDeclaration","start":100,"end":136,"specifiers":[{"type":"ImportSpecifier","start":109,"end":114,"imported":{"type":"Identifier","start":109,"end":114,"name":"State"},"local":{"type":"Identifier","start":109,"end":114,"name":"State"}}],"source":{"type":"Literal","start":122,"end":135,"value":"@ngrx/store","raw":"'@ngrx/store'"}},{"type":"ImportDeclaration","start":138,"end":178,"specifiers":[{"type":"ImportNamespaceSpecifier","start":145,"end":160,"local":{"type":"Identifier","start":150,"end":160,"name":"deepmerge_"}}],"source":{"type":"Literal","start":166,"end":177,"value":"deepmerge","raw":"'deepmerge'"}},{"type":"ImportDeclaration","start":180,"end":256,"specifiers":[{"type":"ImportSpecifier","start":189,"end":195,"imported":{"type":"Identifier","start":189,"end":195,"name":"filter"},"local":{"type":"Identifier","start":189,"end":195,"name":"filter"}},{"type":"ImportSpecifier","start":197,"end":205,"imported":{"type":"Identifier","start":197,"end":205,"name":"mergeMap"},"local":{"type":"Identifier","start":197,"end":205,"name":"mergeMap"}},{"type":"ImportSpecifier","start":207,"end":215,"imported":{"type":"Identifier","start":207,"end":215,"name":"pairwise"},"local":{"type":"Identifier","start":207,"end":215,"name":"pairwise"}},{"type":"ImportSpecifier","start":217,"end":226,"imported":{"type":"Identifier","start":217,"end":226,"name":"startWith"},"local":{"type":"Identifier","start":217,"end":226,"name":"startWith"}},{"type":"ImportSpecifier","start":228,"end":231,"imported":{"type":"Identifier","start":228,"end":231,"name":"tap"},"local":{"type":"Identifier","start":228,"end":231,"name":"tap"}}],"source":{"type":"Literal","start":239,"end":255,"value":"rxjs/operators","raw":"'rxjs/operators'"}},{"type":"ImportDeclaration","start":258,"end":298,"specifiers":[{"type":"ImportSpecifier","start":267,"end":279,"imported":{"type":"Identifier","start":267,"end":279,"name":"_SYNC_CONFIG"},"local":{"type":"Identifier","start":267,"end":279,"name":"_SYNC_CONFIG"}}],"source":{"type":"Literal","start":287,"end":297,"value":"./tokens","raw":"'./tokens'"}},{"type":"ImportDeclaration","start":300,"end":336,"specifiers":[{"type":"ImportNamespaceSpecifier","start":307,"end":314,"local":{"type":"Identifier","start":312,"end":314,"name":"i0"}}],"source":{"type":"Literal","start":320,"end":335,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":338,"end":372,"specifiers":[{"type":"ImportNamespaceSpecifier","start":345,"end":352,"local":{"type":"Identifier","start":350,"end":352,"name":"i1"}}],"source":{"type":"Literal","start":358,"end":371,"value":"@ngrx/store","raw":"\"@ngrx/store\""}},{"type":"ImportDeclaration","start":374,"end":410,"specifiers":[{"type":"ImportNamespaceSpecifier","start":381,"end":388,"local":{"type":"Identifier","start":386,"end":388,"name":"i2"}}],"source":{"type":"Literal","start":394,"end":409,"value":"@ngrx/effects","raw":"\"@ngrx/effects\""}},{"type":"VariableDeclaration","start":412,"end":441,"declarations":[{"type":"VariableDeclarator","start":418,"end":440,"id":{"type":"Identifier","start":418,"end":427,"name":"deepmerge"},"init":{"type":"Identifier","start":430,"end":440,"name":"deepmerge_"}}],"kind":"const"},{"type":"VariableDeclaration","start":443,"end":512,"declarations":[{"type":"VariableDeclarator","start":449,"end":511,"id":{"type":"Identifier","start":449,"end":459,"name":"detectDate"},"init":{"type":"Literal","start":462,"end":511,"value":{},"raw":"/(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/","regex":{"pattern":"(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})","flags":""}}}],"kind":"const"},{"type":"ExportNamedDeclaration","start":514,"end":632,"declaration":{"type":"VariableDeclaration","start":521,"end":632,"declarations":[{"type":"VariableDeclarator","start":527,"end":631,"id":{"type":"Identifier","start":527,"end":545,"name":"StorageSyncActions"},"init":{"type":"ObjectExpression","start":548,"end":631,"properties":[{"type":"Property","start":555,"end":585,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":555,"end":560,"name":"DUMMY"},"value":{"type":"Literal","start":562,"end":585,"value":"ngrx-store-sync/dummy","raw":"'ngrx-store-sync/dummy'"},"kind":"init"},{"type":"Property","start":592,"end":628,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":592,"end":600,"name":"HYDRATED"},"value":{"type":"Literal","start":602,"end":628,"value":"ngrx-store-sync/hydrated","raw":"'ngrx-store-sync/hydrated'"},"kind":"init"}]}}],"kind":"const"},"specifiers":[],"source":null},{"type":"VariableDeclaration","start":634,"end":698,"declarations":[{"type":"VariableDeclarator","start":640,"end":697,"id":{"type":"Identifier","start":640,"end":653,"name":"ignoreActions"},"init":{"type":"ArrayExpression","start":656,"end":697,"elements":[{"type":"MemberExpression","start":657,"end":667,"object":{"type":"Identifier","start":657,"end":662,"name":"State"},"property":{"type":"Identifier","start":663,"end":667,"name":"INIT"},"computed":false,"optional":false},{"type":"MemberExpression","start":669,"end":696,"object":{"type":"Identifier","start":669,"end":687,"name":"StorageSyncActions"},"property":{"type":"Identifier","start":688,"end":696,"name":"HYDRATED"},"computed":false,"optional":false}]}}],"kind":"const"},{"type":"ExportNamedDeclaration","start":700,"end":1584,"declaration":{"type":"ClassDeclaration","start":707,"end":1584,"id":{"type":"Identifier","start":713,"end":731,"name":"StorageSyncEffects"},"superClass":null,"body":{"type":"ClassBody","start":732,"end":1584,"body":[{"type":"MethodDefinition","start":739,"end":1581,"static":false,"computed":false,"key":{"type":"Identifier","start":739,"end":750,"name":"constructor"},"kind":"constructor","value":{"type":"FunctionExpression","start":750,"end":1581,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":751,"end":758,"name":"_config"},{"type":"Identifier","start":760,"end":766,"name":"_store"},{"type":"Identifier","start":768,"end":777,"name":"_actions$"}],"body":{"type":"BlockStatement","start":779,"end":1581,"body":[{"type":"ExpressionStatement","start":790,"end":813,"expression":{"type":"AssignmentExpression","start":790,"end":812,"operator":"=","left":{"type":"MemberExpression","start":790,"end":802,"object":{"type":"ThisExpression","start":790,"end":794},"property":{"type":"Identifier","start":795,"end":802,"name":"_config"},"computed":false,"optional":false},"right":{"type":"Identifier","start":805,"end":812,"name":"_config"}}},{"type":"ExpressionStatement","start":823,"end":844,"expression":{"type":"AssignmentExpression","start":823,"end":843,"operator":"=","left":{"type":"MemberExpression","start":823,"end":834,"object":{"type":"ThisExpression","start":823,"end":827},"property":{"type":"Identifier","start":828,"end":834,"name":"_store"},"computed":false,"optional":false},"right":{"type":"Identifier","start":837,"end":843,"name":"_store"}}},{"type":"ExpressionStatement","start":854,"end":881,"expression":{"type":"AssignmentExpression","start":854,"end":880,"operator":"=","left":{"type":"MemberExpression","start":854,"end":868,"object":{"type":"ThisExpression","start":854,"end":858},"property":{"type":"Identifier","start":859,"end":868,"name":"_actions$"},"computed":false,"optional":false},"right":{"type":"Identifier","start":871,"end":880,"name":"_actions$"}}},{"type":"ExpressionStatement","start":891,"end":914,"expression":{"type":"AssignmentExpression","start":891,"end":913,"operator":"=","left":{"type":"MemberExpression","start":891,"end":905,"object":{"type":"ThisExpression","start":891,"end":895},"property":{"type":"Identifier","start":896,"end":905,"name":"_hydrated"},"computed":false,"optional":false},"right":{"type":"Literal","start":908,"end":913,"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":924,"end":1574,"expression":{"type":"AssignmentExpression","start":924,"end":1573,"operator":"=","left":{"type":"MemberExpression","start":924,"end":934,"object":{"type":"ThisExpression","start":924,"end":928},"property":{"type":"Identifier","start":929,"end":934,"name":"sync$"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":937,"end":1573,"callee":{"type":"Identifier","start":937,"end":949,"name":"createEffect"},"arguments":[{"type":"ArrowFunctionExpression","start":950,"end":1551,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":956,"end":1551,"callee":{"type":"MemberExpression","start":956,"end":975,"object":{"type":"MemberExpression","start":956,"end":970,"object":{"type":"ThisExpression","start":956,"end":960},"property":{"type":"Identifier","start":961,"end":970,"name":"_actions$"},"computed":false,"optional":false},"property":{"type":"Identifier","start":971,"end":975,"name":"pipe"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":976,"end":1021,"callee":{"type":"Identifier","start":976,"end":985,"name":"startWith"},"arguments":[{"type":"ObjectExpression","start":986,"end":1020,"properties":[{"type":"Property","start":988,"end":1018,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":988,"end":992,"name":"type"},"value":{"type":"MemberExpression","start":994,"end":1018,"object":{"type":"Identifier","start":994,"end":1012,"name":"StorageSyncActions"},"property":{"type":"Identifier","start":1013,"end":1018,"name":"DUMMY"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false},{"type":"CallExpression","start":1023,"end":1118,"callee":{"type":"Identifier","start":1023,"end":1026,"name":"tap"},"arguments":[{"type":"ArrowFunctionExpression","start":1027,"end":1117,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1027,"end":1033,"name":"action"}],"body":{"type":"AssignmentExpression","start":1037,"end":1117,"operator":"=","left":{"type":"MemberExpression","start":1037,"end":1051,"object":{"type":"ThisExpression","start":1037,"end":1041},"property":{"type":"Identifier","start":1042,"end":1051,"name":"_hydrated"},"computed":false,"optional":false},"right":{"type":"LogicalExpression","start":1054,"end":1117,"left":{"type":"MemberExpression","start":1054,"end":1068,"object":{"type":"ThisExpression","start":1054,"end":1058},"property":{"type":"Identifier","start":1059,"end":1068,"name":"_hydrated"},"computed":false,"optional":false},"operator":"||","right":{"type":"BinaryExpression","start":1073,"end":1116,"left":{"type":"MemberExpression","start":1073,"end":1084,"object":{"type":"Identifier","start":1073,"end":1079,"name":"action"},"property":{"type":"Identifier","start":1080,"end":1084,"name":"type"},"computed":false,"optional":false},"operator":"===","right":{"type":"MemberExpression","start":1089,"end":1116,"object":{"type":"Identifier","start":1089,"end":1107,"name":"StorageSyncActions"},"property":{"type":"Identifier","start":1108,"end":1116,"name":"HYDRATED"},"computed":false,"optional":false}}}}}],"optional":false},{"type":"CallExpression","start":1148,"end":1207,"callee":{"type":"Identifier","start":1148,"end":1154,"name":"filter"},"arguments":[{"type":"ArrowFunctionExpression","start":1155,"end":1206,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1155,"end":1161,"name":"action"}],"body":{"type":"BinaryExpression","start":1165,"end":1206,"left":{"type":"CallExpression","start":1165,"end":1199,"callee":{"type":"MemberExpression","start":1165,"end":1186,"object":{"type":"Identifier","start":1165,"end":1178,"name":"ignoreActions"},"property":{"type":"Identifier","start":1179,"end":1186,"name":"indexOf"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":1187,"end":1198,"object":{"type":"Identifier","start":1187,"end":1193,"name":"action"},"property":{"type":"Identifier","start":1194,"end":1198,"name":"type"},"computed":false,"optional":false}],"optional":false},"operator":"===","right":{"type":"UnaryExpression","start":1204,"end":1206,"operator":"-","prefix":true,"argument":{"type":"Literal","start":1205,"end":1206,"value":1,"raw":"1"}}}}],"optional":false},{"type":"CallExpression","start":1209,"end":1251,"callee":{"type":"Identifier","start":1209,"end":1217,"name":"mergeMap"},"arguments":[{"type":"ArrowFunctionExpression","start":1218,"end":1250,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":1224,"end":1250,"callee":{"type":"MemberExpression","start":1224,"end":1242,"object":{"type":"MemberExpression","start":1224,"end":1235,"object":{"type":"ThisExpression","start":1224,"end":1228},"property":{"type":"Identifier","start":1229,"end":1235,"name":"_store"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1236,"end":1242,"name":"select"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":1243,"end":1249,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1243,"end":1244,"name":"s"}],"body":{"type":"Identifier","start":1248,"end":1249,"name":"s"}}],"optional":false}}],"optional":false},{"type":"CallExpression","start":1253,"end":1263,"callee":{"type":"Identifier","start":1253,"end":1261,"name":"pairwise"},"arguments":[],"optional":false},{"type":"CallExpression","start":1265,"end":1320,"callee":{"type":"Identifier","start":1265,"end":1271,"name":"filter"},"arguments":[{"type":"ArrowFunctionExpression","start":1272,"end":1319,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"LogicalExpression","start":1278,"end":1319,"left":{"type":"UnaryExpression","start":1278,"end":1301,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1279,"end":1301,"object":{"type":"MemberExpression","start":1279,"end":1291,"object":{"type":"ThisExpression","start":1279,"end":1283},"property":{"type":"Identifier","start":1284,"end":1291,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1292,"end":1301,"name":"rehydrate"},"computed":false,"optional":false}},"operator":"||","right":{"type":"MemberExpression","start":1305,"end":1319,"object":{"type":"ThisExpression","start":1305,"end":1309},"property":{"type":"Identifier","start":1310,"end":1319,"name":"_hydrated"},"computed":false,"optional":false}}}],"optional":false},{"type":"CallExpression","start":1322,"end":1361,"callee":{"type":"Identifier","start":1322,"end":1328,"name":"filter"},"arguments":[{"type":"ArrowFunctionExpression","start":1329,"end":1360,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"ArrayPattern","start":1330,"end":1342,"elements":[{"type":"Identifier","start":1331,"end":1335,"name":"prev"},{"type":"Identifier","start":1337,"end":1341,"name":"curr"}]}],"body":{"type":"BinaryExpression","start":1347,"end":1360,"left":{"type":"Identifier","start":1347,"end":1351,"name":"prev"},"operator":"!==","right":{"type":"Identifier","start":1356,"end":1360,"name":"curr"}}}],"optional":false},{"type":"CallExpression","start":1363,"end":1550,"callee":{"type":"Identifier","start":1363,"end":1371,"name":"mergeMap"},"arguments":[{"type":"ArrowFunctionExpression","start":1372,"end":1549,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"ArrayPattern","start":1373,"end":1382,"elements":[{"type":"Identifier","start":1374,"end":1375,"name":"_"},{"type":"Identifier","start":1377,"end":1381,"name":"curr"}]}],"body":{"type":"CallExpression","start":1387,"end":1549,"callee":{"type":"Identifier","start":1387,"end":1407,"name":"syncStateUpdateAsync"},"arguments":[{"type":"Identifier","start":1408,"end":1412,"name":"curr"},{"type":"MemberExpression","start":1414,"end":1431,"object":{"type":"MemberExpression","start":1414,"end":1426,"object":{"type":"ThisExpression","start":1414,"end":1418},"property":{"type":"Identifier","start":1419,"end":1426,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1427,"end":1431,"name":"keys"},"computed":false,"optional":false},{"type":"MemberExpression","start":1433,"end":1453,"object":{"type":"MemberExpression","start":1433,"end":1445,"object":{"type":"ThisExpression","start":1433,"end":1437},"property":{"type":"Identifier","start":1438,"end":1445,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1446,"end":1453,"name":"storage"},"computed":false,"optional":false},{"type":"MemberExpression","start":1455,"end":1488,"object":{"type":"MemberExpression","start":1455,"end":1467,"object":{"type":"ThisExpression","start":1455,"end":1459},"property":{"type":"Identifier","start":1460,"end":1467,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1468,"end":1488,"name":"storageKeySerializer"},"computed":false,"optional":false},{"type":"MemberExpression","start":1490,"end":1520,"object":{"type":"MemberExpression","start":1490,"end":1502,"object":{"type":"ThisExpression","start":1490,"end":1494},"property":{"type":"Identifier","start":1495,"end":1502,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1503,"end":1520,"name":"removeOnUndefined"},"computed":false,"optional":false},{"type":"MemberExpression","start":1522,"end":1548,"object":{"type":"MemberExpression","start":1522,"end":1534,"object":{"type":"ThisExpression","start":1522,"end":1526},"property":{"type":"Identifier","start":1527,"end":1534,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1535,"end":1548,"name":"syncCondition"},"computed":false,"optional":false}],"optional":false}}],"optional":false}],"optional":false}},{"type":"ObjectExpression","start":1553,"end":1572,"properties":[{"type":"Property","start":1555,"end":1570,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1555,"end":1563,"name":"dispatch"},"value":{"type":"Literal","start":1565,"end":1570,"value":false,"raw":"false"},"kind":"init"}]}],"optional":false}}}]}}}]}},"specifiers":[],"source":null},{"type":"ExpressionStatement","start":1586,"end":1835,"expression":{"type":"AssignmentExpression","start":1586,"end":1834,"operator":"=","left":{"type":"MemberExpression","start":1586,"end":1609,"object":{"type":"Identifier","start":1586,"end":1604,"name":"StorageSyncEffects"},"property":{"type":"Identifier","start":1605,"end":1609,"name":"ɵfac"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":1612,"end":1834,"callee":{"type":"MemberExpression","start":1612,"end":1633,"object":{"type":"Identifier","start":1612,"end":1614,"name":"i0"},"property":{"type":"Identifier","start":1615,"end":1633,"name":"ɵɵngDeclareFactory"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":1634,"end":1833,"properties":[{"type":"Property","start":1636,"end":1656,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1636,"end":1646,"name":"minVersion"},"value":{"type":"Literal","start":1648,"end":1656,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":1658,"end":1675,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1658,"end":1665,"name":"version"},"value":{"type":"Literal","start":1667,"end":1675,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":1677,"end":1689,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1677,"end":1685,"name":"ngImport"},"value":{"type":"Identifier","start":1687,"end":1689,"name":"i0"},"kind":"init"},{"type":"Property","start":1691,"end":1715,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1691,"end":1695,"name":"type"},"value":{"type":"Identifier","start":1697,"end":1715,"name":"StorageSyncEffects"},"kind":"init"},{"type":"Property","start":1717,"end":1792,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1717,"end":1721,"name":"deps"},"value":{"type":"ArrayExpression","start":1723,"end":1792,"elements":[{"type":"ObjectExpression","start":1724,"end":1747,"properties":[{"type":"Property","start":1726,"end":1745,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1726,"end":1731,"name":"token"},"value":{"type":"Identifier","start":1733,"end":1745,"name":"_SYNC_CONFIG"},"kind":"init"}]},{"type":"ObjectExpression","start":1749,"end":1768,"properties":[{"type":"Property","start":1751,"end":1766,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1751,"end":1756,"name":"token"},"value":{"type":"MemberExpression","start":1758,"end":1766,"object":{"type":"Identifier","start":1758,"end":1760,"name":"i1"},"property":{"type":"Identifier","start":1761,"end":1766,"name":"Store"},"computed":false,"optional":false},"kind":"init"}]},{"type":"ObjectExpression","start":1770,"end":1791,"properties":[{"type":"Property","start":1772,"end":1789,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1772,"end":1777,"name":"token"},"value":{"type":"MemberExpression","start":1779,"end":1789,"object":{"type":"Identifier","start":1779,"end":1781,"name":"i2"},"property":{"type":"Identifier","start":1782,"end":1789,"name":"Actions"},"computed":false,"optional":false},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":1794,"end":1831,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1794,"end":1800,"name":"target"},"value":{"type":"MemberExpression","start":1802,"end":1831,"object":{"type":"MemberExpression","start":1802,"end":1820,"object":{"type":"Identifier","start":1802,"end":1804,"name":"i0"},"property":{"type":"Identifier","start":1805,"end":1820,"name":"ɵɵFactoryTarget"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1821,"end":1831,"name":"Injectable"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":1837,"end":1974,"expression":{"type":"AssignmentExpression","start":1837,"end":1973,"operator":"=","left":{"type":"MemberExpression","start":1837,"end":1861,"object":{"type":"Identifier","start":1837,"end":1855,"name":"StorageSyncEffects"},"property":{"type":"Identifier","start":1856,"end":1861,"name":"ɵprov"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":1864,"end":1973,"callee":{"type":"MemberExpression","start":1864,"end":1888,"object":{"type":"Identifier","start":1864,"end":1866,"name":"i0"},"property":{"type":"Identifier","start":1867,"end":1888,"name":"ɵɵngDeclareInjectable"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":1889,"end":1972,"properties":[{"type":"Property","start":1891,"end":1911,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1891,"end":1901,"name":"minVersion"},"value":{"type":"Literal","start":1903,"end":1911,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":1913,"end":1930,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1913,"end":1920,"name":"version"},"value":{"type":"Literal","start":1922,"end":1930,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":1932,"end":1944,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1932,"end":1940,"name":"ngImport"},"value":{"type":"Identifier","start":1942,"end":1944,"name":"i0"},"kind":"init"},{"type":"Property","start":1946,"end":1970,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1946,"end":1950,"name":"type"},"value":{"type":"Identifier","start":1952,"end":1970,"name":"StorageSyncEffects"},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":1976,"end":2365,"expression":{"type":"CallExpression","start":1976,"end":2364,"callee":{"type":"MemberExpression","start":1976,"end":2003,"object":{"type":"Identifier","start":1976,"end":1978,"name":"i0"},"property":{"type":"Identifier","start":1979,"end":2003,"name":"ɵɵngDeclareClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":2004,"end":2363,"properties":[{"type":"Property","start":2006,"end":2026,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2006,"end":2016,"name":"minVersion"},"value":{"type":"Literal","start":2018,"end":2026,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":2028,"end":2045,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2028,"end":2035,"name":"version"},"value":{"type":"Literal","start":2037,"end":2045,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":2047,"end":2059,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2047,"end":2055,"name":"ngImport"},"value":{"type":"Identifier","start":2057,"end":2059,"name":"i0"},"kind":"init"},{"type":"Property","start":2061,"end":2085,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2061,"end":2065,"name":"type"},"value":{"type":"Identifier","start":2067,"end":2085,"name":"StorageSyncEffects"},"kind":"init"},{"type":"Property","start":2087,"end":2143,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2087,"end":2097,"name":"decorators"},"value":{"type":"ArrayExpression","start":2099,"end":2143,"elements":[{"type":"ObjectExpression","start":2100,"end":2142,"properties":[{"type":"Property","start":2115,"end":2131,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2115,"end":2119,"name":"type"},"value":{"type":"Identifier","start":2121,"end":2131,"name":"Injectable"},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":2145,"end":2361,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2145,"end":2159,"name":"ctorParameters"},"value":{"type":"FunctionExpression","start":2161,"end":2361,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2173,"end":2361,"body":[{"type":"ReturnStatement","start":2175,"end":2359,"argument":{"type":"ArrayExpression","start":2182,"end":2358,"elements":[{"type":"ObjectExpression","start":2183,"end":2315,"properties":[{"type":"Property","start":2185,"end":2200,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2185,"end":2189,"name":"type"},"value":{"type":"Identifier","start":2191,"end":2200,"name":"undefined"},"kind":"init"},{"type":"Property","start":2202,"end":2313,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2202,"end":2212,"name":"decorators"},"value":{"type":"ArrayExpression","start":2214,"end":2313,"elements":[{"type":"ObjectExpression","start":2215,"end":2312,"properties":[{"type":"Property","start":2238,"end":2250,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2238,"end":2242,"name":"type"},"value":{"type":"Identifier","start":2244,"end":2250,"name":"Inject"},"kind":"init"},{"type":"Property","start":2273,"end":2293,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2273,"end":2277,"name":"args"},"value":{"type":"ArrayExpression","start":2279,"end":2293,"elements":[{"type":"Identifier","start":2280,"end":2292,"name":"_SYNC_CONFIG"}]},"kind":"init"}]}]},"kind":"init"}]},{"type":"ObjectExpression","start":2317,"end":2335,"properties":[{"type":"Property","start":2319,"end":2333,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2319,"end":2323,"name":"type"},"value":{"type":"MemberExpression","start":2325,"end":2333,"object":{"type":"Identifier","start":2325,"end":2327,"name":"i1"},"property":{"type":"Identifier","start":2328,"end":2333,"name":"Store"},"computed":false,"optional":false},"kind":"init"}]},{"type":"ObjectExpression","start":2337,"end":2357,"properties":[{"type":"Property","start":2339,"end":2355,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2339,"end":2343,"name":"type"},"value":{"type":"MemberExpression","start":2345,"end":2355,"object":{"type":"Identifier","start":2345,"end":2347,"name":"i2"},"property":{"type":"Identifier","start":2348,"end":2355,"name":"Actions"},"computed":false,"optional":false},"kind":"init"}]}]}}]}},"kind":"init"}]}],"optional":false}},{"type":"ExportNamedDeclaration","start":2583,"end":2754,"declaration":{"type":"VariableDeclaration","start":2590,"end":2754,"declarations":[{"type":"VariableDeclarator","start":2596,"end":2753,"id":{"type":"Identifier","start":2596,"end":2607,"name":"dateReviver"},"init":{"type":"ArrowFunctionExpression","start":2610,"end":2753,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2611,"end":2614,"name":"key"},{"type":"Identifier","start":2616,"end":2621,"name":"value"}],"body":{"type":"BlockStatement","start":2626,"end":2753,"body":[{"type":"IfStatement","start":2633,"end":2731,"test":{"type":"LogicalExpression","start":2637,"end":2688,"left":{"type":"BinaryExpression","start":2637,"end":2662,"left":{"type":"UnaryExpression","start":2637,"end":2649,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":2644,"end":2649,"name":"value"}},"operator":"===","right":{"type":"Literal","start":2654,"end":2662,"value":"string","raw":"'string'"}},"operator":"&&","right":{"type":"CallExpression","start":2666,"end":2688,"callee":{"type":"MemberExpression","start":2666,"end":2681,"object":{"type":"Identifier","start":2666,"end":2676,"name":"detectDate"},"property":{"type":"Identifier","start":2677,"end":2681,"name":"test"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2682,"end":2687,"name":"value"}],"optional":false}},"consequent":{"type":"BlockStatement","start":2690,"end":2731,"body":[{"type":"ReturnStatement","start":2701,"end":2724,"argument":{"type":"NewExpression","start":2708,"end":2723,"callee":{"type":"Identifier","start":2712,"end":2716,"name":"Date"},"arguments":[{"type":"Identifier","start":2717,"end":2722,"name":"value"}]}}]},"alternate":null},{"type":"ReturnStatement","start":2737,"end":2750,"argument":{"type":"Identifier","start":2744,"end":2749,"name":"value"}}]}}}],"kind":"const"},"specifiers":[],"source":null},{"type":"VariableDeclaration","start":2756,"end":2799,"declarations":[{"type":"VariableDeclarator","start":2762,"end":2798,"id":{"type":"Identifier","start":2762,"end":2774,"name":"dummyReviver"},"init":{"type":"ArrowFunctionExpression","start":2777,"end":2798,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":2778,"end":2781,"name":"key"},{"type":"Identifier","start":2783,"end":2788,"name":"value"}],"body":{"type":"Identifier","start":2793,"end":2798,"name":"value"}}}],"kind":"const"},{"type":"ExportNamedDeclaration","start":2801,"end":5282,"declaration":{"type":"VariableDeclaration","start":2808,"end":5282,"declarations":[{"type":"VariableDeclarator","start":2814,"end":5281,"id":{"type":"Identifier","start":2814,"end":2844,"name":"rehydrateApplicationStateAsync"},"init":{"type":"ArrowFunctionExpression","start":2847,"end":5281,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2848,"end":2852,"name":"keys"},{"type":"Identifier","start":2854,"end":2861,"name":"storage"},{"type":"Identifier","start":2863,"end":2883,"name":"storageKeySerializer"},{"type":"Identifier","start":2885,"end":2897,"name":"restoreDates"}],"body":{"type":"BlockStatement","start":2902,"end":5281,"body":[{"type":"ReturnStatement","start":2909,"end":5278,"argument":{"type":"CallExpression","start":2916,"end":5277,"callee":{"type":"MemberExpression","start":2916,"end":2927,"object":{"type":"Identifier","start":2916,"end":2920,"name":"keys"},"property":{"type":"Identifier","start":2921,"end":2927,"name":"reduce"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":2928,"end":5242,"id":null,"expression":false,"generator":false,"async":true,"params":[{"type":"Identifier","start":2935,"end":2950,"name":"previousPromise"},{"type":"Identifier","start":2952,"end":2956,"name":"curr"}],"body":{"type":"BlockStatement","start":2961,"end":5242,"body":[{"type":"VariableDeclaration","start":2972,"end":3008,"declarations":[{"type":"VariableDeclarator","start":2978,"end":3007,"id":{"type":"Identifier","start":2978,"end":2983,"name":"state"},"init":{"type":"AwaitExpression","start":2986,"end":3007,"argument":{"type":"Identifier","start":2992,"end":3007,"name":"previousPromise"}}}],"kind":"const"},{"type":"VariableDeclaration","start":3018,"end":3033,"declarations":[{"type":"VariableDeclarator","start":3022,"end":3032,"id":{"type":"Identifier","start":3022,"end":3025,"name":"key"},"init":{"type":"Identifier","start":3028,"end":3032,"name":"curr"}}],"kind":"let"},{"type":"VariableDeclaration","start":3043,"end":3099,"declarations":[{"type":"VariableDeclarator","start":3047,"end":3098,"id":{"type":"Identifier","start":3047,"end":3054,"name":"reviver"},"init":{"type":"ConditionalExpression","start":3057,"end":3098,"test":{"type":"Identifier","start":3057,"end":3069,"name":"restoreDates"},"consequent":{"type":"Identifier","start":3072,"end":3083,"name":"dateReviver"},"alternate":{"type":"Identifier","start":3086,"end":3098,"name":"dummyReviver"}}}],"kind":"let"},{"type":"VariableDeclaration","start":3109,"end":3125,"declarations":[{"type":"VariableDeclarator","start":3113,"end":3124,"id":{"type":"Identifier","start":3113,"end":3124,"name":"deserialize"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","start":3135,"end":3147,"declarations":[{"type":"VariableDeclarator","start":3139,"end":3146,"id":{"type":"Identifier","start":3139,"end":3146,"name":"decrypt"},"init":null}],"kind":"let"},{"type":"IfStatement","start":3157,"end":4563,"test":{"type":"BinaryExpression","start":3161,"end":3184,"left":{"type":"UnaryExpression","start":3161,"end":3171,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":3168,"end":3171,"name":"key"}},"operator":"===","right":{"type":"Literal","start":3176,"end":3184,"value":"object","raw":"'object'"}},"consequent":{"type":"BlockStatement","start":3186,"end":4563,"body":[{"type":"ExpressionStatement","start":3201,"end":3227,"expression":{"type":"AssignmentExpression","start":3201,"end":3226,"operator":"=","left":{"type":"Identifier","start":3201,"end":3204,"name":"key"},"right":{"type":"MemberExpression","start":3207,"end":3226,"object":{"type":"CallExpression","start":3207,"end":3223,"callee":{"type":"MemberExpression","start":3207,"end":3218,"object":{"type":"Identifier","start":3207,"end":3213,"name":"Object"},"property":{"type":"Identifier","start":3214,"end":3218,"name":"keys"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3219,"end":3222,"name":"key"}],"optional":false},"property":{"type":"Literal","start":3224,"end":3225,"value":0,"raw":"0"},"computed":true,"optional":false}}},{"type":"IfStatement","start":3289,"end":3773,"test":{"type":"BinaryExpression","start":3293,"end":3324,"left":{"type":"UnaryExpression","start":3293,"end":3309,"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":3300,"end":3309,"object":{"type":"Identifier","start":3300,"end":3304,"name":"curr"},"property":{"type":"Identifier","start":3305,"end":3308,"name":"key"},"computed":true,"optional":false}},"operator":"===","right":{"type":"Literal","start":3314,"end":3324,"value":"function","raw":"'function'"}},"consequent":{"type":"BlockStatement","start":3326,"end":3380,"body":[{"type":"ExpressionStatement","start":3345,"end":3365,"expression":{"type":"AssignmentExpression","start":3345,"end":3364,"operator":"=","left":{"type":"Identifier","start":3345,"end":3352,"name":"reviver"},"right":{"type":"MemberExpression","start":3355,"end":3364,"object":{"type":"Identifier","start":3355,"end":3359,"name":"curr"},"property":{"type":"Identifier","start":3360,"end":3363,"name":"key"},"computed":true,"optional":false}}}]},"alternate":{"type":"BlockStatement","start":3399,"end":3773,"body":[{"type":"IfStatement","start":3479,"end":3572,"test":{"type":"MemberExpression","start":3483,"end":3500,"object":{"type":"MemberExpression","start":3483,"end":3492,"object":{"type":"Identifier","start":3483,"end":3487,"name":"curr"},"property":{"type":"Identifier","start":3488,"end":3491,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3493,"end":3500,"name":"reviver"},"computed":false,"optional":false},"consequent":{"type":"BlockStatement","start":3502,"end":3572,"body":[{"type":"ExpressionStatement","start":3525,"end":3553,"expression":{"type":"AssignmentExpression","start":3525,"end":3552,"operator":"=","left":{"type":"Identifier","start":3525,"end":3532,"name":"reviver"},"right":{"type":"MemberExpression","start":3535,"end":3552,"object":{"type":"MemberExpression","start":3535,"end":3544,"object":{"type":"Identifier","start":3535,"end":3539,"name":"curr"},"property":{"type":"Identifier","start":3540,"end":3543,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3545,"end":3552,"name":"reviver"},"computed":false,"optional":false}}}]},"alternate":null},{"type":"IfStatement","start":3653,"end":3758,"test":{"type":"MemberExpression","start":3657,"end":3678,"object":{"type":"MemberExpression","start":3657,"end":3666,"object":{"type":"Identifier","start":3657,"end":3661,"name":"curr"},"property":{"type":"Identifier","start":3662,"end":3665,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3667,"end":3678,"name":"deserialize"},"computed":false,"optional":false},"consequent":{"type":"BlockStatement","start":3680,"end":3758,"body":[{"type":"ExpressionStatement","start":3703,"end":3739,"expression":{"type":"AssignmentExpression","start":3703,"end":3738,"operator":"=","left":{"type":"Identifier","start":3703,"end":3714,"name":"deserialize"},"right":{"type":"MemberExpression","start":3717,"end":3738,"object":{"type":"MemberExpression","start":3717,"end":3726,"object":{"type":"Identifier","start":3717,"end":3721,"name":"curr"},"property":{"type":"Identifier","start":3722,"end":3725,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3727,"end":3738,"name":"deserialize"},"computed":false,"optional":false}}}]},"alternate":null}]}},{"type":"IfStatement","start":3863,"end":4552,"test":{"type":"LogicalExpression","start":3867,"end":3905,"left":{"type":"MemberExpression","start":3867,"end":3884,"object":{"type":"MemberExpression","start":3867,"end":3876,"object":{"type":"Identifier","start":3867,"end":3871,"name":"curr"},"property":{"type":"Identifier","start":3872,"end":3875,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3877,"end":3884,"name":"encrypt"},"computed":false,"optional":false},"operator":"&&","right":{"type":"MemberExpression","start":3888,"end":3905,"object":{"type":"MemberExpression","start":3888,"end":3897,"object":{"type":"Identifier","start":3888,"end":3892,"name":"curr"},"property":{"type":"Identifier","start":3893,"end":3896,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3898,"end":3905,"name":"decrypt"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":3907,"end":4276,"body":[{"type":"IfStatement","start":3926,"end":4261,"test":{"type":"LogicalExpression","start":3930,"end":4033,"left":{"type":"BinaryExpression","start":3930,"end":3969,"left":{"type":"UnaryExpression","start":3930,"end":3954,"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":3937,"end":3954,"object":{"type":"MemberExpression","start":3937,"end":3946,"object":{"type":"Identifier","start":3937,"end":3941,"name":"curr"},"property":{"type":"Identifier","start":3942,"end":3945,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":3947,"end":3954,"name":"encrypt"},"computed":false,"optional":false}},"operator":"===","right":{"type":"Literal","start":3959,"end":3969,"value":"function","raw":"'function'"}},"operator":"&&","right":{"type":"BinaryExpression","start":3994,"end":4033,"left":{"type":"UnaryExpression","start":3994,"end":4018,"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":4001,"end":4018,"object":{"type":"MemberExpression","start":4001,"end":4010,"object":{"type":"Identifier","start":4001,"end":4005,"name":"curr"},"property":{"type":"Identifier","start":4006,"end":4009,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":4011,"end":4018,"name":"decrypt"},"computed":false,"optional":false}},"operator":"===","right":{"type":"Literal","start":4023,"end":4033,"value":"function","raw":"'function'"}}},"consequent":{"type":"BlockStatement","start":4035,"end":4105,"body":[{"type":"ExpressionStatement","start":4058,"end":4086,"expression":{"type":"AssignmentExpression","start":4058,"end":4085,"operator":"=","left":{"type":"Identifier","start":4058,"end":4065,"name":"decrypt"},"right":{"type":"MemberExpression","start":4068,"end":4085,"object":{"type":"MemberExpression","start":4068,"end":4077,"object":{"type":"Identifier","start":4068,"end":4072,"name":"curr"},"property":{"type":"Identifier","start":4073,"end":4076,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":4078,"end":4085,"name":"decrypt"},"computed":false,"optional":false}}}]},"alternate":{"type":"BlockStatement","start":4128,"end":4261,"body":[{"type":"ExpressionStatement","start":4151,"end":4242,"expression":{"type":"CallExpression","start":4151,"end":4241,"callee":{"type":"MemberExpression","start":4151,"end":4164,"object":{"type":"Identifier","start":4151,"end":4158,"name":"console"},"property":{"type":"Identifier","start":4159,"end":4164,"name":"error"},"computed":false,"optional":false},"arguments":[{"type":"TemplateLiteral","start":4165,"end":4240,"expressions":[{"type":"MemberExpression","start":4216,"end":4225,"object":{"type":"Identifier","start":4216,"end":4220,"name":"curr"},"property":{"type":"Identifier","start":4221,"end":4224,"name":"key"},"computed":true,"optional":false}],"quasis":[{"type":"TemplateElement","start":4166,"end":4214,"value":{"raw":"Either encrypt or decrypt is not a function on '","cooked":"Either encrypt or decrypt is not a function on '"},"tail":false},{"type":"TemplateElement","start":4226,"end":4239,"value":{"raw":"' key object.","cooked":"' key object."},"tail":true}]}],"optional":false}}]}}]},"alternate":{"type":"IfStatement","start":4295,"end":4552,"test":{"type":"LogicalExpression","start":4299,"end":4337,"left":{"type":"MemberExpression","start":4299,"end":4316,"object":{"type":"MemberExpression","start":4299,"end":4308,"object":{"type":"Identifier","start":4299,"end":4303,"name":"curr"},"property":{"type":"Identifier","start":4304,"end":4307,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":4309,"end":4316,"name":"encrypt"},"computed":false,"optional":false},"operator":"||","right":{"type":"MemberExpression","start":4320,"end":4337,"object":{"type":"MemberExpression","start":4320,"end":4329,"object":{"type":"Identifier","start":4320,"end":4324,"name":"curr"},"property":{"type":"Identifier","start":4325,"end":4328,"name":"key"},"computed":true,"optional":false},"property":{"type":"Identifier","start":4330,"end":4337,"name":"decrypt"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":4339,"end":4552,"body":[{"type":"ExpressionStatement","start":4440,"end":4537,"expression":{"type":"CallExpression","start":4440,"end":4536,"callee":{"type":"MemberExpression","start":4440,"end":4453,"object":{"type":"Identifier","start":4440,"end":4447,"name":"console"},"property":{"type":"Identifier","start":4448,"end":4453,"name":"error"},"computed":false,"optional":false},"arguments":[{"type":"TemplateLiteral","start":4454,"end":4535,"expressions":[{"type":"MemberExpression","start":4511,"end":4520,"object":{"type":"Identifier","start":4511,"end":4515,"name":"curr"},"property":{"type":"Identifier","start":4516,"end":4519,"name":"key"},"computed":true,"optional":false}],"quasis":[{"type":"TemplateElement","start":4455,"end":4509,"value":{"raw":"Either encrypt or decrypt function is not present on '","cooked":"Either encrypt or decrypt function is not present on '"},"tail":false},{"type":"TemplateElement","start":4521,"end":4534,"value":{"raw":"' key object.","cooked":"' key object."},"tail":true}]}],"optional":false}}]},"alternate":null}}]},"alternate":null},{"type":"ReturnStatement","start":4573,"end":5235,"argument":{"type":"CallExpression","start":4580,"end":5234,"callee":{"type":"MemberExpression","start":4580,"end":4623,"object":{"type":"CallExpression","start":4580,"end":4618,"callee":{"type":"MemberExpression","start":4580,"end":4591,"object":{"type":"Identifier","start":4580,"end":4587,"name":"storage"},"property":{"type":"Identifier","start":4588,"end":4591,"name":"get"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":4592,"end":4617,"callee":{"type":"Identifier","start":4592,"end":4612,"name":"storageKeySerializer"},"arguments":[{"type":"Identifier","start":4613,"end":4616,"name":"key"}],"optional":false}],"optional":false},"property":{"type":"Identifier","start":4619,"end":4623,"name":"then"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":4624,"end":5233,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4624,"end":4629,"name":"slice"}],"body":{"type":"BlockStatement","start":4633,"end":5233,"body":[{"type":"IfStatement","start":4648,"end":5195,"test":{"type":"Identifier","start":4652,"end":4657,"name":"slice"},"consequent":{"type":"BlockStatement","start":4659,"end":5195,"body":[{"type":"IfStatement","start":4728,"end":5039,"test":{"type":"Identifier","start":4732,"end":4739,"name":"decrypt"},"consequent":{"type":"BlockStatement","start":4741,"end":5039,"body":[{"type":"ExpressionStatement","start":4764,"end":4787,"expression":{"type":"AssignmentExpression","start":4764,"end":4786,"operator":"=","left":{"type":"Identifier","start":4764,"end":4769,"name":"slice"},"right":{"type":"CallExpression","start":4772,"end":4786,"callee":{"type":"Identifier","start":4772,"end":4779,"name":"decrypt"},"arguments":[{"type":"Identifier","start":4780,"end":4785,"name":"slice"}],"optional":false}}},{"type":"VariableDeclaration","start":4809,"end":4852,"declarations":[{"type":"VariableDeclarator","start":4815,"end":4851,"id":{"type":"Identifier","start":4815,"end":4828,"name":"isObjectRegex"},"init":{"type":"NewExpression","start":4831,"end":4851,"callee":{"type":"Identifier","start":4835,"end":4841,"name":"RegExp"},"arguments":[{"type":"Literal","start":4842,"end":4850,"value":"[{\\[]","raw":"'[{\\\\[]'"}]}}],"kind":"const"},{"type":"IfStatement","start":4874,"end":5020,"test":{"type":"LogicalExpression","start":4878,"end":4933,"left":{"type":"BinaryExpression","start":4878,"end":4894,"left":{"type":"Identifier","start":4878,"end":4883,"name":"slice"},"operator":"===","right":{"type":"Literal","start":4888,"end":4894,"value":"null","raw":"'null'"}},"operator":"||","right":{"type":"CallExpression","start":4898,"end":4933,"callee":{"type":"MemberExpression","start":4898,"end":4916,"object":{"type":"Identifier","start":4898,"end":4911,"name":"isObjectRegex"},"property":{"type":"Identifier","start":4912,"end":4916,"name":"test"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":4917,"end":4932,"callee":{"type":"MemberExpression","start":4917,"end":4929,"object":{"type":"Identifier","start":4917,"end":4922,"name":"slice"},"property":{"type":"Identifier","start":4923,"end":4929,"name":"charAt"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4930,"end":4931,"value":0,"raw":"0"}],"optional":false}],"optional":false}},"consequent":{"type":"BlockStatement","start":4935,"end":5020,"body":[{"type":"ExpressionStatement","start":4962,"end":4997,"expression":{"type":"AssignmentExpression","start":4962,"end":4996,"operator":"=","left":{"type":"Identifier","start":4962,"end":4967,"name":"slice"},"right":{"type":"CallExpression","start":4970,"end":4996,"callee":{"type":"MemberExpression","start":4970,"end":4980,"object":{"type":"Identifier","start":4970,"end":4974,"name":"JSON"},"property":{"type":"Identifier","start":4975,"end":4980,"name":"parse"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":4981,"end":4986,"name":"slice"},{"type":"Identifier","start":4988,"end":4995,"name":"reviver"}],"optional":false}}}]},"alternate":null}]},"alternate":null},{"type":"ReturnStatement","start":5057,"end":5180,"argument":{"type":"CallExpression","start":5064,"end":5179,"callee":{"type":"MemberExpression","start":5064,"end":5077,"object":{"type":"Identifier","start":5064,"end":5070,"name":"Object"},"property":{"type":"Identifier","start":5071,"end":5077,"name":"assign"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":5078,"end":5080,"properties":[]},{"type":"Identifier","start":5082,"end":5087,"name":"state"},{"type":"ObjectExpression","start":5089,"end":5178,"properties":[{"type":"Property","start":5112,"end":5159,"method":false,"shorthand":false,"computed":true,"key":{"type":"Identifier","start":5113,"end":5116,"name":"key"},"value":{"type":"ConditionalExpression","start":5119,"end":5159,"test":{"type":"Identifier","start":5119,"end":5130,"name":"deserialize"},"consequent":{"type":"CallExpression","start":5133,"end":5151,"callee":{"type":"Identifier","start":5133,"end":5144,"name":"deserialize"},"arguments":[{"type":"Identifier","start":5145,"end":5150,"name":"slice"}],"optional":false},"alternate":{"type":"Identifier","start":5154,"end":5159,"name":"slice"}},"kind":"init"}]}],"optional":false}}]},"alternate":null},{"type":"ReturnStatement","start":5209,"end":5222,"argument":{"type":"Identifier","start":5216,"end":5221,"name":"state"}}]}}],"optional":false}}]}},{"type":"CallExpression","start":5244,"end":5276,"callee":{"type":"MemberExpression","start":5244,"end":5264,"object":{"type":"CallExpression","start":5244,"end":5259,"callee":{"type":"MemberExpression","start":5244,"end":5257,"object":{"type":"Identifier","start":5244,"end":5251,"name":"storage"},"property":{"type":"Identifier","start":5252,"end":5257,"name":"ready"},"computed":false,"optional":false},"arguments":[],"optional":false},"property":{"type":"Identifier","start":5260,"end":5264,"name":"then"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":5265,"end":5275,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"ObjectExpression","start":5272,"end":5274,"properties":[]}}],"optional":false}],"optional":false}}]}}}],"kind":"const"},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":5284,"end":9027,"declaration":{"type":"VariableDeclaration","start":5291,"end":9027,"declarations":[{"type":"VariableDeclarator","start":5297,"end":9026,"id":{"type":"Identifier","start":5297,"end":5317,"name":"syncStateUpdateAsync"},"init":{"type":"ArrowFunctionExpression","start":5320,"end":9026,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5321,"end":5326,"name":"state"},{"type":"Identifier","start":5328,"end":5332,"name":"keys"},{"type":"Identifier","start":5334,"end":5341,"name":"storage"},{"type":"AssignmentPattern","start":5343,"end":5376,"left":{"type":"Identifier","start":5343,"end":5363,"name":"storageKeySerializer"},"right":{"type":"ArrowFunctionExpression","start":5366,"end":5376,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":5366,"end":5369,"name":"key"}],"body":{"type":"Identifier","start":5373,"end":5376,"name":"key"}}},{"type":"AssignmentPattern","start":5378,"end":5403,"left":{"type":"Identifier","start":5378,"end":5395,"name":"removeOnUndefined"},"right":{"type":"Literal","start":5398,"end":5403,"value":false,"raw":"false"}},{"type":"Identifier","start":5405,"end":5418,"name":"syncCondition"}],"body":{"type":"BlockStatement","start":5423,"end":9026,"body":[{"type":"TryStatement","start":5430,"end":5729,"block":{"type":"BlockStatement","start":5434,"end":5555,"body":[{"type":"IfStatement","start":5445,"end":5548,"test":{"type":"LogicalExpression","start":5449,"end":5495,"left":{"type":"Identifier","start":5449,"end":5462,"name":"syncCondition"},"operator":"&&","right":{"type":"BinaryExpression","start":5466,"end":5495,"left":{"type":"CallExpression","start":5466,"end":5486,"callee":{"type":"Identifier","start":5466,"end":5479,"name":"syncCondition"},"arguments":[{"type":"Identifier","start":5480,"end":5485,"name":"state"}],"optional":false},"operator":"!==","right":{"type":"Literal","start":5491,"end":5495,"value":true,"raw":"true"}}},"consequent":{"type":"BlockStatement","start":5497,"end":5548,"body":[{"type":"ReturnStatement","start":5512,"end":5537,"argument":{"type":"CallExpression","start":5519,"end":5536,"callee":{"type":"MemberExpression","start":5519,"end":5534,"object":{"type":"Identifier","start":5519,"end":5526,"name":"Promise"},"property":{"type":"Identifier","start":5527,"end":5534,"name":"resolve"},"computed":false,"optional":false},"arguments":[],"optional":false}}]},"alternate":null}]},"handler":{"type":"CatchClause","start":5561,"end":5729,"param":{"type":"Identifier","start":5568,"end":5569,"name":"e"},"body":{"type":"BlockStatement","start":5571,"end":5729,"body":[{"type":"IfStatement","start":5625,"end":5704,"test":{"type":"BinaryExpression","start":5629,"end":5651,"left":{"type":"Identifier","start":5629,"end":5630,"name":"e"},"operator":"instanceof","right":{"type":"Identifier","start":5642,"end":5651,"name":"TypeError"}},"consequent":{"type":"BlockStatement","start":5653,"end":5704,"body":[{"type":"ReturnStatement","start":5668,"end":5693,"argument":{"type":"CallExpression","start":5675,"end":5692,"callee":{"type":"MemberExpression","start":5675,"end":5690,"object":{"type":"Identifier","start":5675,"end":5682,"name":"Promise"},"property":{"type":"Identifier","start":5683,"end":5690,"name":"resolve"},"computed":false,"optional":false},"arguments":[],"optional":false}}]},"alternate":null},{"type":"ThrowStatement","start":5714,"end":5722,"argument":{"type":"Identifier","start":5720,"end":5721,"name":"e"}}]}},"finalizer":null},{"type":"ReturnStatement","start":5735,"end":9023,"argument":{"type":"CallExpression","start":5742,"end":9022,"callee":{"type":"MemberExpression","start":5742,"end":5753,"object":{"type":"Identifier","start":5742,"end":5746,"name":"keys"},"property":{"type":"Identifier","start":5747,"end":5753,"name":"reduce"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":5754,"end":8982,"id":null,"expression":false,"generator":false,"async":true,"params":[{"type":"Identifier","start":5761,"end":5776,"name":"previousPromise"},{"type":"Identifier","start":5778,"end":5781,"name":"key"}],"body":{"type":"BlockStatement","start":5786,"end":8982,"body":[{"type":"ExpressionStatement","start":5797,"end":5819,"expression":{"type":"AwaitExpression","start":5797,"end":5818,"argument":{"type":"Identifier","start":5803,"end":5818,"name":"previousPromise"}}},{"type":"VariableDeclaration","start":5829,"end":5857,"declarations":[{"type":"VariableDeclarator","start":5833,"end":5856,"id":{"type":"Identifier","start":5833,"end":5843,"name":"stateSlice"},"init":{"type":"MemberExpression","start":5846,"end":5856,"object":{"type":"Identifier","start":5846,"end":5851,"name":"state"},"property":{"type":"Identifier","start":5852,"end":5855,"name":"key"},"computed":true,"optional":false}}],"kind":"let"},{"type":"VariableDeclaration","start":5867,"end":5880,"declarations":[{"type":"VariableDeclarator","start":5871,"end":5879,"id":{"type":"Identifier","start":5871,"end":5879,"name":"replacer"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","start":5890,"end":5900,"declarations":[{"type":"VariableDeclarator","start":5894,"end":5899,"id":{"type":"Identifier","start":5894,"end":5899,"name":"space"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","start":5910,"end":5922,"declarations":[{"type":"VariableDeclarator","start":5914,"end":5921,"id":{"type":"Identifier","start":5914,"end":5921,"name":"encrypt"},"init":null}],"kind":"let"},{"type":"IfStatement","start":5932,"end":8013,"test":{"type":"BinaryExpression","start":5936,"end":5959,"left":{"type":"UnaryExpression","start":5936,"end":5946,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":5943,"end":5946,"name":"key"}},"operator":"===","right":{"type":"Literal","start":5951,"end":5959,"value":"object","raw":"'object'"}},"consequent":{"type":"BlockStatement","start":5961,"end":8013,"body":[{"type":"VariableDeclaration","start":5976,"end":6009,"declarations":[{"type":"VariableDeclarator","start":5982,"end":6008,"id":{"type":"Identifier","start":5982,"end":5986,"name":"name"},"init":{"type":"MemberExpression","start":5989,"end":6008,"object":{"type":"CallExpression","start":5989,"end":6005,"callee":{"type":"MemberExpression","start":5989,"end":6000,"object":{"type":"Identifier","start":5989,"end":5995,"name":"Object"},"property":{"type":"Identifier","start":5996,"end":6000,"name":"keys"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6001,"end":6004,"name":"key"}],"optional":false},"property":{"type":"Literal","start":6006,"end":6007,"value":0,"raw":"0"},"computed":true,"optional":false}}],"kind":"const"},{"type":"ExpressionStatement","start":6023,"end":6048,"expression":{"type":"AssignmentExpression","start":6023,"end":6047,"operator":"=","left":{"type":"Identifier","start":6023,"end":6033,"name":"stateSlice"},"right":{"type":"MemberExpression","start":6036,"end":6047,"object":{"type":"Identifier","start":6036,"end":6041,"name":"state"},"property":{"type":"Identifier","start":6042,"end":6046,"name":"name"},"computed":true,"optional":false}}},{"type":"IfStatement","start":6062,"end":7977,"test":{"type":"LogicalExpression","start":6066,"end":6112,"left":{"type":"BinaryExpression","start":6066,"end":6099,"left":{"type":"UnaryExpression","start":6066,"end":6083,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":6073,"end":6083,"name":"stateSlice"}},"operator":"!==","right":{"type":"Literal","start":6088,"end":6099,"value":"undefined","raw":"'undefined'"}},"operator":"&&","right":{"type":"MemberExpression","start":6103,"end":6112,"object":{"type":"Identifier","start":6103,"end":6106,"name":"key"},"property":{"type":"Identifier","start":6107,"end":6111,"name":"name"},"computed":true,"optional":false}},"consequent":{"type":"BlockStatement","start":6114,"end":7977,"body":[{"type":"IfStatement","start":6190,"end":7682,"test":{"type":"MemberExpression","start":6194,"end":6213,"object":{"type":"MemberExpression","start":6194,"end":6203,"object":{"type":"Identifier","start":6194,"end":6197,"name":"key"},"property":{"type":"Identifier","start":6198,"end":6202,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":6204,"end":6213,"name":"serialize"},"computed":false,"optional":false},"consequent":{"type":"BlockStatement","start":6215,"end":6302,"body":[{"type":"ExpressionStatement","start":6238,"end":6283,"expression":{"type":"AssignmentExpression","start":6238,"end":6282,"operator":"=","left":{"type":"Identifier","start":6238,"end":6248,"name":"stateSlice"},"right":{"type":"CallExpression","start":6251,"end":6282,"callee":{"type":"MemberExpression","start":6251,"end":6270,"object":{"type":"MemberExpression","start":6251,"end":6260,"object":{"type":"Identifier","start":6251,"end":6254,"name":"key"},"property":{"type":"Identifier","start":6255,"end":6259,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":6261,"end":6270,"name":"serialize"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6271,"end":6281,"name":"stateSlice"}],"optional":false}}}]},"alternate":{"type":"BlockStatement","start":6325,"end":7682,"body":[{"type":"VariableDeclaration","start":6462,"end":6476,"declarations":[{"type":"VariableDeclarator","start":6466,"end":6475,"id":{"type":"Identifier","start":6466,"end":6475,"name":"keyFilter"},"init":null}],"kind":"let"},{"type":"IfStatement","start":6498,"end":6720,"test":{"type":"MemberExpression","start":6502,"end":6518,"object":{"type":"MemberExpression","start":6502,"end":6511,"object":{"type":"Identifier","start":6502,"end":6505,"name":"key"},"property":{"type":"Identifier","start":6506,"end":6510,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":6512,"end":6518,"name":"reduce"},"computed":false,"optional":false},"consequent":{"type":"BlockStatement","start":6520,"end":6592,"body":[{"type":"ExpressionStatement","start":6547,"end":6569,"expression":{"type":"AssignmentExpression","start":6547,"end":6568,"operator":"=","left":{"type":"Identifier","start":6547,"end":6556,"name":"keyFilter"},"right":{"type":"MemberExpression","start":6559,"end":6568,"object":{"type":"Identifier","start":6559,"end":6562,"name":"key"},"property":{"type":"Identifier","start":6563,"end":6567,"name":"name"},"computed":true,"optional":false}}}]},"alternate":{"type":"IfStatement","start":6619,"end":6720,"test":{"type":"MemberExpression","start":6623,"end":6639,"object":{"type":"MemberExpression","start":6623,"end":6632,"object":{"type":"Identifier","start":6623,"end":6626,"name":"key"},"property":{"type":"Identifier","start":6627,"end":6631,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":6633,"end":6639,"name":"filter"},"computed":false,"optional":false},"consequent":{"type":"BlockStatement","start":6641,"end":6720,"body":[{"type":"ExpressionStatement","start":6668,"end":6697,"expression":{"type":"AssignmentExpression","start":6668,"end":6696,"operator":"=","left":{"type":"Identifier","start":6668,"end":6677,"name":"keyFilter"},"right":{"type":"MemberExpression","start":6680,"end":6696,"object":{"type":"MemberExpression","start":6680,"end":6689,"object":{"type":"Identifier","start":6680,"end":6683,"name":"key"},"property":{"type":"Identifier","start":6684,"end":6688,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":6690,"end":6696,"name":"filter"},"computed":false,"optional":false}}}]},"alternate":null}},{"type":"IfStatement","start":6742,"end":6989,"test":{"type":"Identifier","start":6746,"end":6755,"name":"keyFilter"},"consequent":{"type":"BlockStatement","start":6757,"end":6989,"body":[{"type":"ExpressionStatement","start":6784,"end":6966,"expression":{"type":"AssignmentExpression","start":6784,"end":6965,"operator":"=","left":{"type":"Identifier","start":6784,"end":6794,"name":"stateSlice"},"right":{"type":"CallExpression","start":6797,"end":6965,"callee":{"type":"MemberExpression","start":6797,"end":6813,"object":{"type":"Identifier","start":6797,"end":6806,"name":"keyFilter"},"property":{"type":"Identifier","start":6807,"end":6813,"name":"reduce"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":6814,"end":6960,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6815,"end":6819,"name":"memo"},{"type":"Identifier","start":6821,"end":6825,"name":"attr"}],"body":{"type":"BlockStatement","start":6830,"end":6960,"body":[{"type":"ExpressionStatement","start":6861,"end":6891,"expression":{"type":"AssignmentExpression","start":6861,"end":6890,"operator":"=","left":{"type":"MemberExpression","start":6861,"end":6871,"object":{"type":"Identifier","start":6861,"end":6865,"name":"memo"},"property":{"type":"Identifier","start":6866,"end":6870,"name":"attr"},"computed":true,"optional":false},"right":{"type":"MemberExpression","start":6874,"end":6890,"object":{"type":"Identifier","start":6874,"end":6884,"name":"stateSlice"},"property":{"type":"Identifier","start":6885,"end":6889,"name":"attr"},"computed":true,"optional":false}}},{"type":"ReturnStatement","start":6921,"end":6933,"argument":{"type":"Identifier","start":6928,"end":6932,"name":"memo"}}]}},{"type":"ObjectExpression","start":6962,"end":6964,"properties":[]}],"optional":false}}}]},"alternate":null},{"type":"IfStatement","start":7126,"end":7663,"test":{"type":"LogicalExpression","start":7130,"end":7168,"left":{"type":"MemberExpression","start":7130,"end":7147,"object":{"type":"MemberExpression","start":7130,"end":7139,"object":{"type":"Identifier","start":7130,"end":7133,"name":"key"},"property":{"type":"Identifier","start":7134,"end":7138,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7140,"end":7147,"name":"encrypt"},"computed":false,"optional":false},"operator":"&&","right":{"type":"MemberExpression","start":7151,"end":7168,"object":{"type":"MemberExpression","start":7151,"end":7160,"object":{"type":"Identifier","start":7151,"end":7154,"name":"key"},"property":{"type":"Identifier","start":7155,"end":7159,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7161,"end":7168,"name":"decrypt"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":7170,"end":7351,"body":[{"type":"IfStatement","start":7197,"end":7328,"test":{"type":"BinaryExpression","start":7201,"end":7240,"left":{"type":"UnaryExpression","start":7201,"end":7225,"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":7208,"end":7225,"object":{"type":"MemberExpression","start":7208,"end":7217,"object":{"type":"Identifier","start":7208,"end":7211,"name":"key"},"property":{"type":"Identifier","start":7212,"end":7216,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7218,"end":7225,"name":"encrypt"},"computed":false,"optional":false}},"operator":"===","right":{"type":"Literal","start":7230,"end":7240,"value":"function","raw":"'function'"}},"consequent":{"type":"BlockStatement","start":7242,"end":7328,"body":[{"type":"ExpressionStatement","start":7273,"end":7301,"expression":{"type":"AssignmentExpression","start":7273,"end":7300,"operator":"=","left":{"type":"Identifier","start":7273,"end":7280,"name":"encrypt"},"right":{"type":"MemberExpression","start":7283,"end":7300,"object":{"type":"MemberExpression","start":7283,"end":7292,"object":{"type":"Identifier","start":7283,"end":7286,"name":"key"},"property":{"type":"Identifier","start":7287,"end":7291,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7293,"end":7300,"name":"encrypt"},"computed":false,"optional":false}}}]},"alternate":null}]},"alternate":{"type":"IfStatement","start":7378,"end":7663,"test":{"type":"LogicalExpression","start":7382,"end":7420,"left":{"type":"MemberExpression","start":7382,"end":7399,"object":{"type":"MemberExpression","start":7382,"end":7391,"object":{"type":"Identifier","start":7382,"end":7385,"name":"key"},"property":{"type":"Identifier","start":7386,"end":7390,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7392,"end":7399,"name":"encrypt"},"computed":false,"optional":false},"operator":"||","right":{"type":"MemberExpression","start":7403,"end":7420,"object":{"type":"MemberExpression","start":7403,"end":7412,"object":{"type":"Identifier","start":7403,"end":7406,"name":"key"},"property":{"type":"Identifier","start":7407,"end":7411,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7413,"end":7420,"name":"decrypt"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":7422,"end":7663,"body":[{"type":"ExpressionStatement","start":7543,"end":7640,"expression":{"type":"CallExpression","start":7543,"end":7639,"callee":{"type":"MemberExpression","start":7543,"end":7556,"object":{"type":"Identifier","start":7543,"end":7550,"name":"console"},"property":{"type":"Identifier","start":7551,"end":7556,"name":"error"},"computed":false,"optional":false},"arguments":[{"type":"TemplateLiteral","start":7557,"end":7638,"expressions":[{"type":"MemberExpression","start":7614,"end":7623,"object":{"type":"Identifier","start":7614,"end":7617,"name":"key"},"property":{"type":"Identifier","start":7618,"end":7622,"name":"name"},"computed":true,"optional":false}],"quasis":[{"type":"TemplateElement","start":7558,"end":7612,"value":{"raw":"Either encrypt or decrypt function is not present on '","cooked":"Either encrypt or decrypt function is not present on '"},"tail":false},{"type":"TemplateElement","start":7624,"end":7637,"value":{"raw":"' key object.","cooked":"' key object."},"tail":true}]}],"optional":false}}]},"alternate":null}}]}},{"type":"ExpressionStatement","start":7890,"end":7920,"expression":{"type":"AssignmentExpression","start":7890,"end":7919,"operator":"=","left":{"type":"Identifier","start":7890,"end":7898,"name":"replacer"},"right":{"type":"MemberExpression","start":7901,"end":7919,"object":{"type":"MemberExpression","start":7901,"end":7910,"object":{"type":"Identifier","start":7901,"end":7904,"name":"key"},"property":{"type":"Identifier","start":7905,"end":7909,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7911,"end":7919,"name":"replacer"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":7938,"end":7962,"expression":{"type":"AssignmentExpression","start":7938,"end":7961,"operator":"=","left":{"type":"Identifier","start":7938,"end":7943,"name":"space"},"right":{"type":"MemberExpression","start":7946,"end":7961,"object":{"type":"MemberExpression","start":7946,"end":7955,"object":{"type":"Identifier","start":7946,"end":7949,"name":"key"},"property":{"type":"Identifier","start":7950,"end":7954,"name":"name"},"computed":true,"optional":false},"property":{"type":"Identifier","start":7956,"end":7961,"name":"space"},"computed":false,"optional":false}}}]},"alternate":null},{"type":"ExpressionStatement","start":7991,"end":8002,"expression":{"type":"AssignmentExpression","start":7991,"end":8001,"operator":"=","left":{"type":"Identifier","start":7991,"end":7994,"name":"key"},"right":{"type":"Identifier","start":7997,"end":8001,"name":"name"}}}]},"alternate":null},{"type":"IfStatement","start":8023,"end":8940,"test":{"type":"BinaryExpression","start":8027,"end":8060,"left":{"type":"UnaryExpression","start":8027,"end":8044,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":8034,"end":8044,"name":"stateSlice"}},"operator":"!==","right":{"type":"Literal","start":8049,"end":8060,"value":"undefined","raw":"'undefined'"}},"consequent":{"type":"BlockStatement","start":8062,"end":8679,"body":[{"type":"IfStatement","start":8077,"end":8509,"test":{"type":"Identifier","start":8081,"end":8088,"name":"encrypt"},"consequent":{"type":"BlockStatement","start":8090,"end":8509,"body":[{"type":"TryStatement","start":8109,"end":8494,"block":{"type":"BlockStatement","start":8113,"end":8380,"body":[{"type":"ExpressionStatement","start":8199,"end":8361,"expression":{"type":"AssignmentExpression","start":8199,"end":8360,"operator":"=","left":{"type":"Identifier","start":8199,"end":8209,"name":"stateSlice"},"right":{"type":"CallExpression","start":8212,"end":8360,"callee":{"type":"Identifier","start":8212,"end":8219,"name":"encrypt"},"arguments":[{"type":"ConditionalExpression","start":8220,"end":8359,"test":{"type":"BinaryExpression","start":8220,"end":8250,"left":{"type":"UnaryExpression","start":8220,"end":8237,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":8227,"end":8237,"name":"stateSlice"}},"operator":"===","right":{"type":"Literal","start":8242,"end":8250,"value":"string","raw":"'string'"}},"consequent":{"type":"Identifier","start":8278,"end":8288,"name":"stateSlice"},"alternate":{"type":"CallExpression","start":8316,"end":8359,"callee":{"type":"MemberExpression","start":8316,"end":8330,"object":{"type":"Identifier","start":8316,"end":8320,"name":"JSON"},"property":{"type":"Identifier","start":8321,"end":8330,"name":"stringify"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":8331,"end":8341,"name":"stateSlice"},{"type":"Identifier","start":8343,"end":8351,"name":"replacer"},{"type":"Identifier","start":8353,"end":8358,"name":"space"}],"optional":false}}],"optional":false}}}]},"handler":{"type":"CatchClause","start":8398,"end":8494,"param":{"type":"Identifier","start":8405,"end":8406,"name":"e"},"body":{"type":"BlockStatement","start":8408,"end":8494,"body":[{"type":"ExpressionStatement","start":8431,"end":8475,"expression":{"type":"CallExpression","start":8431,"end":8474,"callee":{"type":"MemberExpression","start":8431,"end":8443,"object":{"type":"Identifier","start":8431,"end":8438,"name":"console"},"property":{"type":"Identifier","start":8439,"end":8443,"name":"warn"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":8444,"end":8470,"value":"Unable to encrypt state:","raw":"'Unable to encrypt state:'"},{"type":"Identifier","start":8472,"end":8473,"name":"e"}],"optional":false}}]}},"finalizer":null}]},"alternate":null},{"type":"ReturnStatement","start":8523,"end":8668,"argument":{"type":"CallExpression","start":8530,"end":8667,"callee":{"type":"MemberExpression","start":8530,"end":8604,"object":{"type":"CallExpression","start":8530,"end":8580,"callee":{"type":"MemberExpression","start":8530,"end":8541,"object":{"type":"Identifier","start":8530,"end":8537,"name":"storage"},"property":{"type":"Identifier","start":8538,"end":8541,"name":"set"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":8542,"end":8567,"callee":{"type":"Identifier","start":8542,"end":8562,"name":"storageKeySerializer"},"arguments":[{"type":"Identifier","start":8563,"end":8566,"name":"key"}],"optional":false},{"type":"Identifier","start":8569,"end":8579,"name":"stateSlice"}],"optional":false},"property":{"type":"Identifier","start":8599,"end":8604,"name":"catch"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":8605,"end":8666,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8611,"end":8666,"body":[{"type":"ThrowStatement","start":8613,"end":8664,"argument":{"type":"NewExpression","start":8619,"end":8663,"callee":{"type":"Identifier","start":8623,"end":8628,"name":"Error"},"arguments":[{"type":"Literal","start":8629,"end":8662,"value":"Unable to save state to storage","raw":"'Unable to save state to storage'"}]}}]}}],"optional":false}}]},"alternate":{"type":"IfStatement","start":8694,"end":8940,"test":{"type":"LogicalExpression","start":8698,"end":8752,"left":{"type":"BinaryExpression","start":8698,"end":8731,"left":{"type":"UnaryExpression","start":8698,"end":8715,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":8705,"end":8715,"name":"stateSlice"}},"operator":"===","right":{"type":"Literal","start":8720,"end":8731,"value":"undefined","raw":"'undefined'"}},"operator":"&&","right":{"type":"Identifier","start":8735,"end":8752,"name":"removeOnUndefined"}},"consequent":{"type":"BlockStatement","start":8754,"end":8940,"body":[{"type":"ReturnStatement","start":8769,"end":8929,"argument":{"type":"CallExpression","start":8776,"end":8928,"callee":{"type":"MemberExpression","start":8776,"end":8841,"object":{"type":"CallExpression","start":8776,"end":8817,"callee":{"type":"MemberExpression","start":8776,"end":8790,"object":{"type":"Identifier","start":8776,"end":8783,"name":"storage"},"property":{"type":"Identifier","start":8784,"end":8790,"name":"remove"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":8791,"end":8816,"callee":{"type":"Identifier","start":8791,"end":8811,"name":"storageKeySerializer"},"arguments":[{"type":"Identifier","start":8812,"end":8815,"name":"key"}],"optional":false}],"optional":false},"property":{"type":"Identifier","start":8836,"end":8841,"name":"catch"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":8842,"end":8927,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8848,"end":8927,"body":[{"type":"ThrowStatement","start":8850,"end":8925,"argument":{"type":"NewExpression","start":8856,"end":8924,"callee":{"type":"Identifier","start":8860,"end":8865,"name":"Error"},"arguments":[{"type":"TemplateLiteral","start":8866,"end":8923,"expressions":[{"type":"Identifier","start":8911,"end":8914,"name":"key"}],"quasis":[{"type":"TemplateElement","start":8867,"end":8909,"value":{"raw":"Exception on removing/cleaning undefined '","cooked":"Exception on removing/cleaning undefined '"},"tail":false},{"type":"TemplateElement","start":8915,"end":8922,"value":{"raw":"' state","cooked":"' state"},"tail":true}]}]}}]}}],"optional":false}}]},"alternate":null}},{"type":"ReturnStatement","start":8950,"end":8975,"argument":{"type":"CallExpression","start":8957,"end":8974,"callee":{"type":"MemberExpression","start":8957,"end":8972,"object":{"type":"Identifier","start":8957,"end":8964,"name":"Promise"},"property":{"type":"Identifier","start":8965,"end":8972,"name":"resolve"},"computed":false,"optional":false},"arguments":[],"optional":false}}]}},{"type":"CallExpression","start":8984,"end":9021,"callee":{"type":"MemberExpression","start":8984,"end":9004,"object":{"type":"CallExpression","start":8984,"end":8999,"callee":{"type":"MemberExpression","start":8984,"end":8997,"object":{"type":"Identifier","start":8984,"end":8991,"name":"storage"},"property":{"type":"Identifier","start":8992,"end":8997,"name":"ready"},"computed":false,"optional":false},"arguments":[],"optional":false},"property":{"type":"Identifier","start":9000,"end":9004,"name":"then"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":9005,"end":9020,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"Identifier","start":9011,"end":9020,"name":"undefined"}}],"optional":false}],"optional":false}}]}}}],"kind":"const"},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":9029,"end":9853,"declaration":{"type":"VariableDeclaration","start":9036,"end":9853,"declarations":[{"type":"VariableDeclarator","start":9042,"end":9852,"id":{"type":"Identifier","start":9042,"end":9053,"name":"storageSync"},"init":{"type":"ArrowFunctionExpression","start":9056,"end":9852,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"ArrowFunctionExpression","start":9062,"end":9852,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":9063,"end":9070,"name":"reducer"}],"body":{"type":"BlockStatement","start":9075,"end":9852,"body":[{"type":"ReturnStatement","start":9082,"end":9849,"argument":{"type":"ArrowFunctionExpression","start":9089,"end":9848,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":9090,"end":9095,"name":"state"},{"type":"Identifier","start":9097,"end":9103,"name":"action"}],"body":{"type":"BlockStatement","start":9108,"end":9848,"body":[{"type":"VariableDeclaration","start":9119,"end":9133,"declarations":[{"type":"VariableDeclarator","start":9123,"end":9132,"id":{"type":"Identifier","start":9123,"end":9132,"name":"nextState"},"init":null}],"kind":"let"},{"type":"IfStatement","start":9294,"end":9458,"test":{"type":"LogicalExpression","start":9298,"end":9336,"left":{"type":"BinaryExpression","start":9299,"end":9325,"left":{"type":"MemberExpression","start":9299,"end":9310,"object":{"type":"Identifier","start":9299,"end":9305,"name":"action"},"property":{"type":"Identifier","start":9306,"end":9310,"name":"type"},"computed":false,"optional":false},"operator":"===","right":{"type":"MemberExpression","start":9315,"end":9325,"object":{"type":"Identifier","start":9315,"end":9320,"name":"State"},"property":{"type":"Identifier","start":9321,"end":9325,"name":"INIT"},"computed":false,"optional":false}},"operator":"&&","right":{"type":"UnaryExpression","start":9330,"end":9336,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":9331,"end":9336,"name":"state"}}},"consequent":{"type":"BlockStatement","start":9338,"end":9399,"body":[{"type":"ExpressionStatement","start":9353,"end":9388,"expression":{"type":"AssignmentExpression","start":9353,"end":9387,"operator":"=","left":{"type":"Identifier","start":9353,"end":9362,"name":"nextState"},"right":{"type":"CallExpression","start":9365,"end":9387,"callee":{"type":"Identifier","start":9365,"end":9372,"name":"reducer"},"arguments":[{"type":"Identifier","start":9373,"end":9378,"name":"state"},{"type":"Identifier","start":9380,"end":9386,"name":"action"}],"optional":false}}}]},"alternate":{"type":"BlockStatement","start":9414,"end":9458,"body":[{"type":"ExpressionStatement","start":9429,"end":9447,"expression":{"type":"AssignmentExpression","start":9429,"end":9446,"operator":"=","left":{"type":"Identifier","start":9429,"end":9438,"name":"nextState"},"right":{"type":"Identifier","start":9441,"end":9446,"name":"state"}}}]}},{"type":"IfStatement","start":9468,"end":9797,"test":{"type":"LogicalExpression","start":9472,"end":9533,"left":{"type":"BinaryExpression","start":9472,"end":9515,"left":{"type":"MemberExpression","start":9472,"end":9483,"object":{"type":"Identifier","start":9472,"end":9478,"name":"action"},"property":{"type":"Identifier","start":9479,"end":9483,"name":"type"},"computed":false,"optional":false},"operator":"===","right":{"type":"MemberExpression","start":9488,"end":9515,"object":{"type":"Identifier","start":9488,"end":9506,"name":"StorageSyncActions"},"property":{"type":"Identifier","start":9507,"end":9515,"name":"HYDRATED"},"computed":false,"optional":false}},"operator":"&&","right":{"type":"MemberExpression","start":9519,"end":9533,"object":{"type":"Identifier","start":9519,"end":9525,"name":"action"},"property":{"type":"Identifier","start":9526,"end":9533,"name":"payload"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":9535,"end":9797,"body":[{"type":"VariableDeclaration","start":9550,"end":9623,"declarations":[{"type":"VariableDeclarator","start":9556,"end":9622,"id":{"type":"Identifier","start":9556,"end":9570,"name":"overwriteMerge"},"init":{"type":"ArrowFunctionExpression","start":9573,"end":9622,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":9574,"end":9590,"name":"destinationArray"},{"type":"Identifier","start":9592,"end":9603,"name":"sourceArray"},{"type":"Identifier","start":9605,"end":9606,"name":"_"}],"body":{"type":"Identifier","start":9611,"end":9622,"name":"sourceArray"}}}],"kind":"const"},{"type":"VariableDeclaration","start":9637,"end":9714,"declarations":[{"type":"VariableDeclarator","start":9643,"end":9713,"id":{"type":"Identifier","start":9643,"end":9650,"name":"options"},"init":{"type":"ObjectExpression","start":9653,"end":9713,"properties":[{"type":"Property","start":9672,"end":9698,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9672,"end":9682,"name":"arrayMerge"},"value":{"type":"Identifier","start":9684,"end":9698,"name":"overwriteMerge"},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":9728,"end":9786,"expression":{"type":"AssignmentExpression","start":9728,"end":9785,"operator":"=","left":{"type":"Identifier","start":9728,"end":9737,"name":"nextState"},"right":{"type":"CallExpression","start":9740,"end":9785,"callee":{"type":"Identifier","start":9740,"end":9749,"name":"deepmerge"},"arguments":[{"type":"Identifier","start":9750,"end":9759,"name":"nextState"},{"type":"MemberExpression","start":9761,"end":9775,"object":{"type":"Identifier","start":9761,"end":9767,"name":"action"},"property":{"type":"Identifier","start":9768,"end":9775,"name":"payload"},"computed":false,"optional":false},{"type":"Identifier","start":9777,"end":9784,"name":"options"}],"optional":false}}}]},"alternate":null},{"type":"ReturnStatement","start":9807,"end":9841,"argument":{"type":"CallExpression","start":9814,"end":9840,"callee":{"type":"Identifier","start":9814,"end":9821,"name":"reducer"},"arguments":[{"type":"Identifier","start":9822,"end":9831,"name":"nextState"},{"type":"Identifier","start":9833,"end":9839,"name":"action"}],"optional":false}}]}}}]}}}}],"kind":"const"},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvbGliL3N5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFXLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsS0FBSyxFQUFTLE1BQU0sYUFBYSxDQUFDO0FBRTNDLE9BQU8sS0FBSyxVQUFVLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFVBQVUsQ0FBQzs7OztBQUV4QyxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUM7QUFDN0IsTUFBTSxVQUFVLEdBQUcsaURBQWlELENBQUM7QUFFckUsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUc7SUFDOUIsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QixRQUFRLEVBQUUsMEJBQTBCO0NBQ3ZDLENBQUM7QUFFRixNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7QUFHaEUsTUFBTSxPQUFPLGtCQUFrQjtJQUMzQixZQUNrQyxPQUF3QixFQUM5QyxNQUFrQixFQUNsQixTQUFrQjtRQUZJLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQzlDLFdBQU0sR0FBTixNQUFNLENBQVk7UUFDbEIsY0FBUyxHQUFULFNBQVMsQ0FBUztRQUd0QixjQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXpCLFVBQUssR0FBb0IsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUM1RCxTQUFTLENBQUUsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDOUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLGtCQUFrQjtRQUNuSCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUMzRCxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUMxQyxRQUFRLEVBQUUsRUFDVixNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQ3ZELE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEVBQ3ZDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxvQkFBb0IsQ0FDeEMsSUFBSSxFQUNKLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsRUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFDOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQzdCLENBQUMsQ0FDTCxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFwQnJCLENBQUM7OytHQUxLLGtCQUFrQixrQkFFZixZQUFZO21IQUZmLGtCQUFrQjsyRkFBbEIsa0JBQWtCO2tCQUQ5QixVQUFVOzswQkFHRixNQUFNOzJCQUFDLFlBQVk7O0FBMEI1Qjs7OztHQUlHO0FBRUgscUNBQXFDO0FBQ3JDLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVLEVBQUUsRUFBRTtJQUNuRCxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3JELE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDMUI7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDLENBQUM7QUFFRixNQUFNLFlBQVksR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUV4RCxNQUFNLENBQUMsTUFBTSw4QkFBOEIsR0FBRyxDQUMxQyxJQUFXLEVBQ1gsT0FBcUIsRUFDckIsb0JBQStDLEVBQy9DLFlBQXFCLEVBQ1QsRUFBRTtJQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxFQUFFO1FBQy9DLE1BQU0sS0FBSyxHQUFHLE1BQU0sZUFBZSxDQUFDO1FBRXBDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQztRQUNmLElBQUksT0FBTyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7UUFDeEQsSUFBSSxXQUFXLENBQUM7UUFDaEIsSUFBSSxPQUFPLENBQUM7UUFFWixJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsRUFBRTtZQUN6QixHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixrQ0FBa0M7WUFDbEMsSUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLEVBQUU7Z0JBQ2pDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdkI7aUJBQU07Z0JBQ0gsMkNBQTJDO2dCQUMzQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7b0JBQ25CLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO2lCQUMvQjtnQkFDRCw2Q0FBNkM7Z0JBQzdDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRTtvQkFDdkIsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUM7aUJBQ3ZDO2FBQ0o7WUFFRCw4REFBOEQ7WUFDOUQsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3hDLElBQ0ksT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxLQUFLLFVBQVU7b0JBQ3ZDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQ3pDO29CQUNFLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO2lCQUMvQjtxQkFBTTtvQkFDSCxPQUFPLENBQUMsS0FBSyxDQUNULG1EQUNJLElBQUksQ0FBQyxHQUFHLENBQ1osZUFBZSxDQUNsQixDQUFDO2lCQUNMO2FBQ0o7aUJBQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQy9DLGdFQUFnRTtnQkFDaEUsT0FBTyxDQUFDLEtBQUssQ0FDVCx5REFDSSxJQUFJLENBQUMsR0FBRyxDQUNaLGVBQWUsQ0FDbEIsQ0FBQzthQUNMO1NBQ0o7UUFFRCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDdkQsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsZ0NBQWdDO2dCQUNoQyxJQUFJLE9BQU8sRUFBRTtvQkFDVCxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN2QixNQUFNLGFBQWEsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFFM0MsSUFBSSxLQUFLLEtBQUssTUFBTSxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO3dCQUN6RCxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7cUJBQ3RDO2lCQUNKO2dCQUVELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFO29CQUM1QixDQUFDLEdBQUcsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO2lCQUNsRCxDQUFDLENBQUM7YUFDTjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsQ0FDaEMsS0FBVSxFQUNWLElBQVcsRUFDWCxPQUFxQixFQUNyQix1QkFBZ0QsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQzFELGlCQUFpQixHQUFHLEtBQUssRUFDekIsYUFBdUMsRUFDMUIsRUFBRTtJQUNmLElBQUk7UUFDQSxJQUFJLGFBQWEsSUFBSSxhQUFhLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ2hELE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQzVCO0tBQ0o7SUFBQyxPQUFRLENBQUMsRUFBRztRQUNWLGlDQUFpQztRQUNqQyxJQUFJLENBQUMsWUFBWSxTQUFTLEVBQUU7WUFDeEIsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDNUI7UUFDRCxNQUFNLENBQUMsQ0FBQztLQUNYO0lBRUQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDL0MsTUFBTSxlQUFlLENBQUM7UUFFdEIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksUUFBUSxDQUFDO1FBQ2IsSUFBSSxLQUFLLENBQUM7UUFDVixJQUFJLE9BQU8sQ0FBQztRQUVaLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3pCLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsVUFBVSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUV6QixJQUFJLE9BQU8sVUFBVSxLQUFLLFdBQVcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2hELHVDQUF1QztnQkFDdkMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFO29CQUNyQixVQUFVLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztpQkFDaEQ7cUJBQU07b0JBQ0gsNEZBQTRGO29CQUM1RixJQUFJLFNBQVMsQ0FBQztvQkFDZCxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUU7d0JBQ2xCLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ3pCO3lCQUFNLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRTt3QkFDekIsU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7cUJBQ2hDO29CQUNELElBQUksU0FBUyxFQUFFO3dCQUNYLFVBQVUsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFOzRCQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUM5QixPQUFPLElBQUksQ0FBQzt3QkFDaEIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNWO29CQUVELDZGQUE2RjtvQkFDN0YsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUU7d0JBQ3hDLElBQUksT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLFVBQVUsRUFBRTs0QkFDekMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUM7eUJBQy9CO3FCQUNKO3lCQUFNLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFO3dCQUMvQyxvRUFBb0U7d0JBQ3BFLE9BQU8sQ0FBQyxLQUFLLENBQ1QseURBQ0ksR0FBRyxDQUFDLElBQUksQ0FDWixlQUFlLENBQ2xCLENBQUM7cUJBQ0w7aUJBQ0o7Z0JBRUQ7OzttQkFHRztnQkFDSCxRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQztnQkFDOUIsS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUM7YUFDM0I7WUFFRCxHQUFHLEdBQUcsSUFBSSxDQUFDO1NBQ2Q7UUFFRCxJQUFJLE9BQU8sVUFBVSxLQUFLLFdBQVcsRUFBRTtZQUNuQyxJQUFJLE9BQU8sRUFBRTtnQkFDVCxJQUFJO29CQUNBLHlDQUF5QztvQkFDekMsVUFBVSxHQUFHLE9BQU8sQ0FDaEIsT0FBTyxVQUFVLEtBQUssUUFBUTt3QkFDMUIsQ0FBQyxDQUFDLFVBQVU7d0JBQ1osQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FDcEQsQ0FBQztpQkFDTDtnQkFBQyxPQUFPLENBQUMsRUFBRTtvQkFDUixPQUFPLENBQUMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUMvQzthQUNKO1lBRUQsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxFQUFFLFVBQVUsQ0FBQztpQkFDcEQsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzdFO2FBQU0sSUFBSSxPQUFPLFVBQVUsS0FBSyxXQUFXLElBQUksaUJBQWlCLEVBQUU7WUFDL0QsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUMzQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsTUFBTSxJQUFJLEtBQUssQ0FBQyw2Q0FBNkMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JHO1FBRUQsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDN0IsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUM5QyxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtJQUM5QyxPQUFPLENBQUMsS0FBVSxFQUFFLE1BQVcsRUFBRSxFQUFFO1FBQy9CLElBQUksU0FBUyxDQUFDO1FBRWQsNkVBQTZFO1FBQzdFLHNEQUFzRDtRQUN0RCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDeEMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDdEM7YUFBTTtZQUNILFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDckI7UUFFRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssa0JBQWtCLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDL0QsTUFBTSxjQUFjLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUM7WUFDekUsTUFBTSxPQUFPLEdBQXVCO2dCQUNoQyxVQUFVLEVBQUUsY0FBYzthQUM3QixDQUFDO1lBQ0YsU0FBUyxHQUFHLFNBQVMsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUM3RDtRQUVELE9BQU8sT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWN0aW9ucywgY3JlYXRlRWZmZWN0IH0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XHJcbmltcG9ydCB7IFN0YXRlLCBTdG9yZSB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcclxuXHJcbmltcG9ydCAqIGFzIGRlZXBtZXJnZV8gZnJvbSAnZGVlcG1lcmdlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIG1lcmdlTWFwLCBwYWlyd2lzZSwgc3RhcnRXaXRoLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jQ29uZmlnIH0gZnJvbSAnLi9zeW5jLm1vZHVsZSc7XHJcbmltcG9ydCB7IF9TWU5DX0NPTkZJRyB9IGZyb20gJy4vdG9rZW5zJztcclxuXHJcbmNvbnN0IGRlZXBtZXJnZSA9IGRlZXBtZXJnZV87XHJcbmNvbnN0IGRldGVjdERhdGUgPSAvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlUKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IFN0b3JhZ2VTeW5jQWN0aW9ucyA9IHtcclxuICAgIERVTU1ZOiAnbmdyeC1zdG9yZS1zeW5jL2R1bW15JyxcclxuICAgIEhZRFJBVEVEOiAnbmdyeC1zdG9yZS1zeW5jL2h5ZHJhdGVkJ1xyXG59O1xyXG5cclxuY29uc3QgaWdub3JlQWN0aW9ucyA9IFtTdGF0ZS5JTklULCBTdG9yYWdlU3luY0FjdGlvbnMuSFlEUkFURURdO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZVN5bmNFZmZlY3RzIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIEBJbmplY3QoX1NZTkNfQ09ORklHKSBwcml2YXRlIF9jb25maWc6IFN0b3JlU3luY0NvbmZpZyxcclxuICAgICAgICBwcml2YXRlIF9zdG9yZTogU3RvcmU8YW55PixcclxuICAgICAgICBwcml2YXRlIF9hY3Rpb25zJDogQWN0aW9uc1xyXG4gICAgKSB7fVxyXG5cclxuICAgIHByaXZhdGUgX2h5ZHJhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgIHN5bmMkOiBPYnNlcnZhYmxlPGFueT4gPSBjcmVhdGVFZmZlY3QoKCkgPT4gdGhpcy5fYWN0aW9ucyQucGlwZShcclxuICAgICAgICBzdGFydFdpdGgoIHsgdHlwZTogU3RvcmFnZVN5bmNBY3Rpb25zLkRVTU1ZIH0pLFxyXG4gICAgICAgIHRhcChhY3Rpb24gPT4gdGhpcy5faHlkcmF0ZWQgPSB0aGlzLl9oeWRyYXRlZCB8fCAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCkpLCAvLyBTaWRlLWVmZmVjdHkgOihcclxuICAgICAgICBmaWx0ZXIoYWN0aW9uID0+IGlnbm9yZUFjdGlvbnMuaW5kZXhPZihhY3Rpb24udHlwZSkgPT09IC0xKSxcclxuICAgICAgICBtZXJnZU1hcCgoKSA9PiB0aGlzLl9zdG9yZS5zZWxlY3QocyA9PiBzKSksXHJcbiAgICAgICAgcGFpcndpc2UoKSxcclxuICAgICAgICBmaWx0ZXIoKCkgPT4gIXRoaXMuX2NvbmZpZy5yZWh5ZHJhdGUgfHwgdGhpcy5faHlkcmF0ZWQpLFxyXG4gICAgICAgIGZpbHRlcigoW3ByZXYsIGN1cnJdKSA9PiBwcmV2ICE9PSBjdXJyKSxcclxuICAgICAgICBtZXJnZU1hcCgoW18sIGN1cnJdKSA9PiBzeW5jU3RhdGVVcGRhdGVBc3luYyhcclxuICAgICAgICAgICAgY3VycixcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmtleXMsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5zdG9yYWdlLFxyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc3RvcmFnZUtleVNlcmlhbGl6ZXIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5yZW1vdmVPblVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnN5bmNDb25kaXRpb25cclxuICAgICAgICApKVxyXG4gICAgKSwgeyBkaXNwYXRjaDogZmFsc2UgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCZWxvdyB0aGlzIHBvaW50IGlzIGVzc2VudGlhbGx5IGEgY29weS1wYXN0ZSBvZlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYnRyb25jb25lL25ncngtc3RvcmUtbG9jYWxzdG9yYWdlXHJcbiAqIG1vZGlmaWVkIHRvIGludGVyYWN0IHdpdGggYW4gYXN5bmNocm9ub3VzIHN0b3JhZ2UgQVBJXHJcbiAqL1xyXG5cclxuLy8gY29ycmVjdGx5IHBhcnNlIGRhdGVzIGZyb20gc3RvcmFnZVxyXG5leHBvcnQgY29uc3QgZGF0ZVJldml2ZXIgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIGRldGVjdERhdGUudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuY29uc3QgZHVtbXlSZXZpdmVyID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2YWx1ZTtcclxuXHJcbmV4cG9ydCBjb25zdCByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMgPSAoXHJcbiAgICBrZXlzOiBhbnlbXSxcclxuICAgIHN0b3JhZ2U6IFN0b3JlU3RvcmFnZSxcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyOiAoKGtleTogc3RyaW5nKSA9PiBzdHJpbmcpLFxyXG4gICAgcmVzdG9yZURhdGVzOiBib29sZWFuXHJcbik6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICByZXR1cm4ga2V5cy5yZWR1Y2UoYXN5bmMgKHByZXZpb3VzUHJvbWlzZSwgY3VycikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgcHJldmlvdXNQcm9taXNlO1xyXG5cclxuICAgICAgICBsZXQga2V5ID0gY3VycjtcclxuICAgICAgICBsZXQgcmV2aXZlciA9IHJlc3RvcmVEYXRlcyA/IGRhdGVSZXZpdmVyIDogZHVtbXlSZXZpdmVyO1xyXG4gICAgICAgIGxldCBkZXNlcmlhbGl6ZTtcclxuICAgICAgICBsZXQgZGVjcnlwdDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGtleSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIC8vIHVzZSB0aGUgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb25cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyW2tleV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldml2ZXIgPSBjdXJyW2tleV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb24gaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycltrZXldLnJldml2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZpdmVyID0gY3VycltrZXldLnJldml2ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHNlcmlhbGl6ZSBmdW5jdGlvbiBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyW2tleV0uZGVzZXJpYWxpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNlcmlhbGl6ZSA9IGN1cnJba2V5XS5kZXNlcmlhbGl6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgZW5jcnlwdCBhbmQgZGVjcnlwdCBmdW5jdGlvbnMgYXJlIGJvdGggcHJlc2VudHNcclxuICAgICAgICAgICAgaWYgKGN1cnJba2V5XS5lbmNyeXB0ICYmIGN1cnJba2V5XS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5kZWNyeXB0ID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ID0gY3VycltrZXldLmRlY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBFaXRoZXIgZW5jcnlwdCBvciBkZWNyeXB0IGlzIG5vdCBhIGZ1bmN0aW9uIG9uICcke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltrZXldXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycltrZXldLmVuY3J5cHQgfHwgY3VycltrZXldLmRlY3J5cHQpIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCBrbm93IHRoYXQgb25lIG9mIHRoZSBlbmNyeXB0aW9uIGZ1bmN0aW9ucyBpcyBub3QgcHJvdmlkZWRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEVpdGhlciBlbmNyeXB0IG9yIGRlY3J5cHQgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgb24gJyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UuZ2V0KHN0b3JhZ2VLZXlTZXJpYWxpemVyKGtleSkpLnRoZW4oc2xpY2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2xpY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZSBwcm92aWRlZCBkZWNyeXB0IGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gZGVjcnlwdChzbGljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPYmplY3RSZWdleCA9IG5ldyBSZWdFeHAoJ1t7XFxcXFtdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGljZSA9PT0gJ251bGwnIHx8IGlzT2JqZWN0UmVnZXgudGVzdChzbGljZS5jaGFyQXQoMCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlID0gSlNPTi5wYXJzZShzbGljZSwgcmV2aXZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIFtrZXldOiBkZXNlcmlhbGl6ZSA/IGRlc2VyaWFsaXplKHNsaWNlKSA6IHNsaWNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBzdG9yYWdlLnJlYWR5KCkudGhlbigoKSA9PiAoe30pKSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc3luY1N0YXRlVXBkYXRlQXN5bmMgPSAoXHJcbiAgICBzdGF0ZTogYW55LFxyXG4gICAga2V5czogYW55W10sXHJcbiAgICBzdG9yYWdlOiBTdG9yZVN0b3JhZ2UsXHJcbiAgICBzdG9yYWdlS2V5U2VyaWFsaXplcjogKGtleTogc3RyaW5nKSA9PiBzdHJpbmcgPSBrZXkgPT4ga2V5LFxyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQgPSBmYWxzZSxcclxuICAgIHN5bmNDb25kaXRpb24/OiAoc3RhdGU6IGFueSkgPT4gYm9vbGVhblxyXG4pOiBQcm9taXNlPHZvaWQ+ID0+ICB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChzeW5jQ29uZGl0aW9uICYmIHN5bmNDb25kaXRpb24oc3RhdGUpICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoICggZSApIHtcclxuICAgICAgICAvLyBUcmVhdCBUeXBlRXJyb3IgYXMgZG8gbm90IHN5bmNcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGtleXMucmVkdWNlKCBhc3luYyAocHJldmlvdXNQcm9taXNlLCBrZXkpID0+IHtcclxuICAgICAgICBhd2FpdCBwcmV2aW91c1Byb21pc2U7XHJcblxyXG4gICAgICAgIGxldCBzdGF0ZVNsaWNlID0gc3RhdGVba2V5XTtcclxuICAgICAgICBsZXQgcmVwbGFjZXI7XHJcbiAgICAgICAgbGV0IHNwYWNlO1xyXG4gICAgICAgIGxldCBlbmNyeXB0O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBzdGF0ZVtuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVTbGljZSAhPT0gJ3VuZGVmaW5lZCcgJiYga2V5W25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2Ugc2VyaWFsaXplIGZ1bmN0aW9uIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uc2VyaWFsaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleVtuYW1lXS5zZXJpYWxpemUoc3RhdGVTbGljZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNlcmlhbGl6ZSBmdW5jdGlvbiBpcyBub3Qgc3BlY2lmaWVkIGtleUZpbHRlciBvbiBmaWVsZHMgaWYgYW4gYXJyYXkgaGFzIGJlZW4gcHJvdmlkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleUZpbHRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5W25hbWVdLnJlZHVjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlGaWx0ZXIgPSBrZXlbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlbbmFtZV0uZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUZpbHRlciA9IGtleVtuYW1lXS5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleUZpbHRlci5yZWR1Y2UoKG1lbW8sIGF0dHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9bYXR0cl0gPSBzdGF0ZVNsaWNlW2F0dHJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lbW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGVuY3J5cHQgYW5kIGRlY3J5cHQgYXJlIHByZXNlbnQsIGFsc28gY2hlY2tlZCBhdCB0aGlzI3JlaHlkcmF0ZUFwcGxpY2F0aW9uU3RhdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uZW5jcnlwdCAmJiBrZXlbbmFtZV0uZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGtleVtuYW1lXS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ID0ga2V5W25hbWVdLmVuY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleVtuYW1lXS5lbmNyeXB0IHx8IGtleVtuYW1lXS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aG9zZSBpcyBub3QgcHJlc2VudCwgdGhlbiBsZXQga25vdyB0aGF0IG9uZSBpcyBtaXNzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRWl0aGVyIGVuY3J5cHQgb3IgZGVjcnlwdCBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBvbiAnJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlbbmFtZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICBSZXBsYWNlciBhbmQgc3BhY2UgYXJndW1lbnRzIHRvIHBhc3MgdG8gSlNPTi5zdHJpbmdpZnkuXHJcbiAgICAgICAgICAgICAgICAgIElmIHRoZXNlIGZpZWxkcyBkb24ndCBleGlzdCwgdW5kZWZpbmVkIHdpbGwgYmUgcGFzc2VkLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlciA9IGtleVtuYW1lXS5yZXBsYWNlcjtcclxuICAgICAgICAgICAgICAgIHNwYWNlID0ga2V5W25hbWVdLnNwYWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAoZW5jcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCBhIHN0cmluZyBtZXNzYWdlIGlzIHBhc3NlZFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBlbmNyeXB0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3RhdGVTbGljZSA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhdGVTbGljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShzdGF0ZVNsaWNlLCByZXBsYWNlciwgc3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBlbmNyeXB0IHN0YXRlOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5zZXQoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSwgc3RhdGVTbGljZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHNhdmUgc3RhdGUgdG8gc3RvcmFnZScpOyB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlID09PSAndW5kZWZpbmVkJyAmJiByZW1vdmVPblVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmUoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcihgRXhjZXB0aW9uIG9uIHJlbW92aW5nL2NsZWFuaW5nIHVuZGVmaW5lZCAnJHtrZXl9JyBzdGF0ZWApOyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH0sIHN0b3JhZ2UucmVhZHkoKS50aGVuKCgpID0+IHVuZGVmaW5lZCkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VTeW5jID0gKCkgPT4gKHJlZHVjZXI6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIChzdGF0ZTogYW55LCBhY3Rpb246IGFueSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0U3RhdGU7XHJcblxyXG4gICAgICAgIC8vIElmIHN0YXRlIGFycml2ZXMgdW5kZWZpbmVkLCB3ZSBuZWVkIHRvIGxldCBpdCB0aHJvdWdoIHRoZSBzdXBwbGllZCByZWR1Y2VyXHJcbiAgICAgICAgLy8gaW4gb3JkZXIgdG8gZ2V0IGEgY29tcGxldGUgc3RhdGUgYXMgZGVmaW5lZCBieSB1c2VyXHJcbiAgICAgICAgaWYgKChhY3Rpb24udHlwZSA9PT0gU3RhdGUuSU5JVCkgJiYgIXN0YXRlKSB7XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dFN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCAmJiBhY3Rpb24ucGF5bG9hZCkge1xyXG4gICAgICAgICAgICBjb25zdCBvdmVyd3JpdGVNZXJnZSA9IChkZXN0aW5hdGlvbkFycmF5LCBzb3VyY2VBcnJheSwgXykgPT4gc291cmNlQXJyYXk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnM6IGRlZXBtZXJnZV8uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGFycmF5TWVyZ2U6IG92ZXJ3cml0ZU1lcmdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IGRlZXBtZXJnZShuZXh0U3RhdGUsIGFjdGlvbi5wYXlsb2FkLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWR1Y2VyKG5leHRTdGF0ZSwgYWN0aW9uKTtcclxuICAgIH07XHJcbn07XHJcbiJdfQ==","start":9855,"end":34009}]},"code":"import { Inject, Injectable } from '@angular/core';\r\nimport { createEffect } from '@ngrx/effects';\r\nimport { State } from '@ngrx/store';\r\nimport * as deepmerge_ from 'deepmerge';\r\nimport { filter, mergeMap, pairwise, startWith, tap } from 'rxjs/operators';\r\nimport { _SYNC_CONFIG } from './tokens';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@ngrx/store\";\r\nimport * as i2 from \"@ngrx/effects\";\r\nconst deepmerge = deepmerge_;\r\nconst detectDate = /(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/;\r\nexport const StorageSyncActions = {\r\n    DUMMY: 'ngrx-store-sync/dummy',\r\n    HYDRATED: 'ngrx-store-sync/hydrated'\r\n};\r\nconst ignoreActions = [State.INIT, StorageSyncActions.HYDRATED];\r\nexport class StorageSyncEffects {\r\n    constructor(_config, _store, _actions$) {\r\n        this._config = _config;\r\n        this._store = _store;\r\n        this._actions$ = _actions$;\r\n        this._hydrated = false;\r\n        this.sync$ = createEffect(() => this._actions$.pipe(startWith({ type: StorageSyncActions.DUMMY }), tap(action => this._hydrated = this._hydrated || (action.type === StorageSyncActions.HYDRATED)), // Side-effecty :(\r\n        filter(action => ignoreActions.indexOf(action.type) === -1), mergeMap(() => this._store.select(s => s)), pairwise(), filter(() => !this._config.rehydrate || this._hydrated), filter(([prev, curr]) => prev !== curr), mergeMap(([_, curr]) => syncStateUpdateAsync(curr, this._config.keys, this._config.storage, this._config.storageKeySerializer, this._config.removeOnUndefined, this._config.syncCondition))), { dispatch: false });\r\n    }\r\n}\r\nStorageSyncEffects.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects, deps: [{ token: _SYNC_CONFIG }, { token: i1.Store }, { token: i2.Actions }], target: i0.ɵɵFactoryTarget.Injectable });\r\nStorageSyncEffects.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [_SYNC_CONFIG]\r\n                }] }, { type: i1.Store }, { type: i2.Actions }]; } });\r\n/**\r\n * Below this point is essentially a copy-paste of\r\n * https://github.com/btroncone/ngrx-store-localstorage\r\n * modified to interact with an asynchronous storage API\r\n */\r\n// correctly parse dates from storage\r\nexport const dateReviver = (key, value) => {\r\n    if (typeof value === 'string' && detectDate.test(value)) {\r\n        return new Date(value);\r\n    }\r\n    return value;\r\n};\r\nconst dummyReviver = (key, value) => value;\r\nexport const rehydrateApplicationStateAsync = (keys, storage, storageKeySerializer, restoreDates) => {\r\n    return keys.reduce(async (previousPromise, curr) => {\r\n        const state = await previousPromise;\r\n        let key = curr;\r\n        let reviver = restoreDates ? dateReviver : dummyReviver;\r\n        let deserialize;\r\n        let decrypt;\r\n        if (typeof key === 'object') {\r\n            key = Object.keys(key)[0];\r\n            // use the custom reviver function\r\n            if (typeof curr[key] === 'function') {\r\n                reviver = curr[key];\r\n            }\r\n            else {\r\n                // use custom reviver function if available\r\n                if (curr[key].reviver) {\r\n                    reviver = curr[key].reviver;\r\n                }\r\n                // use custom serialize function if available\r\n                if (curr[key].deserialize) {\r\n                    deserialize = curr[key].deserialize;\r\n                }\r\n            }\r\n            // Ensure that encrypt and decrypt functions are both presents\r\n            if (curr[key].encrypt && curr[key].decrypt) {\r\n                if (typeof curr[key].encrypt === 'function' &&\r\n                    typeof curr[key].decrypt === 'function') {\r\n                    decrypt = curr[key].decrypt;\r\n                }\r\n                else {\r\n                    console.error(`Either encrypt or decrypt is not a function on '${curr[key]}' key object.`);\r\n                }\r\n            }\r\n            else if (curr[key].encrypt || curr[key].decrypt) {\r\n                // Let know that one of the encryption functions is not provided\r\n                console.error(`Either encrypt or decrypt function is not present on '${curr[key]}' key object.`);\r\n            }\r\n        }\r\n        return storage.get(storageKeySerializer(key)).then(slice => {\r\n            if (slice) {\r\n                // Use provided decrypt function\r\n                if (decrypt) {\r\n                    slice = decrypt(slice);\r\n                    const isObjectRegex = new RegExp('[{\\\\[]');\r\n                    if (slice === 'null' || isObjectRegex.test(slice.charAt(0))) {\r\n                        slice = JSON.parse(slice, reviver);\r\n                    }\r\n                }\r\n                return Object.assign({}, state, {\r\n                    [key]: deserialize ? deserialize(slice) : slice\r\n                });\r\n            }\r\n            return state;\r\n        });\r\n    }, storage.ready().then(() => ({})));\r\n};\r\nexport const syncStateUpdateAsync = (state, keys, storage, storageKeySerializer = key => key, removeOnUndefined = false, syncCondition) => {\r\n    try {\r\n        if (syncCondition && syncCondition(state) !== true) {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Treat TypeError as do not sync\r\n        if (e instanceof TypeError) {\r\n            return Promise.resolve();\r\n        }\r\n        throw e;\r\n    }\r\n    return keys.reduce(async (previousPromise, key) => {\r\n        await previousPromise;\r\n        let stateSlice = state[key];\r\n        let replacer;\r\n        let space;\r\n        let encrypt;\r\n        if (typeof key === 'object') {\r\n            const name = Object.keys(key)[0];\r\n            stateSlice = state[name];\r\n            if (typeof stateSlice !== 'undefined' && key[name]) {\r\n                // use serialize function if specified.\r\n                if (key[name].serialize) {\r\n                    stateSlice = key[name].serialize(stateSlice);\r\n                }\r\n                else {\r\n                    // if serialize function is not specified keyFilter on fields if an array has been provided.\r\n                    let keyFilter;\r\n                    if (key[name].reduce) {\r\n                        keyFilter = key[name];\r\n                    }\r\n                    else if (key[name].filter) {\r\n                        keyFilter = key[name].filter;\r\n                    }\r\n                    if (keyFilter) {\r\n                        stateSlice = keyFilter.reduce((memo, attr) => {\r\n                            memo[attr] = stateSlice[attr];\r\n                            return memo;\r\n                        }, {});\r\n                    }\r\n                    // Check if encrypt and decrypt are present, also checked at this#rehydrateApplicationState()\r\n                    if (key[name].encrypt && key[name].decrypt) {\r\n                        if (typeof key[name].encrypt === 'function') {\r\n                            encrypt = key[name].encrypt;\r\n                        }\r\n                    }\r\n                    else if (key[name].encrypt || key[name].decrypt) {\r\n                        // If one of those is not present, then let know that one is missing\r\n                        console.error(`Either encrypt or decrypt function is not present on '${key[name]}' key object.`);\r\n                    }\r\n                }\r\n                /*\r\n                  Replacer and space arguments to pass to JSON.stringify.\r\n                  If these fields don't exist, undefined will be passed.\r\n                 */\r\n                replacer = key[name].replacer;\r\n                space = key[name].space;\r\n            }\r\n            key = name;\r\n        }\r\n        if (typeof stateSlice !== 'undefined') {\r\n            if (encrypt) {\r\n                try {\r\n                    // ensure that a string message is passed\r\n                    stateSlice = encrypt(typeof stateSlice === 'string'\r\n                        ? stateSlice\r\n                        : JSON.stringify(stateSlice, replacer, space));\r\n                }\r\n                catch (e) {\r\n                    console.warn('Unable to encrypt state:', e);\r\n                }\r\n            }\r\n            return storage.set(storageKeySerializer(key), stateSlice)\r\n                .catch(() => { throw new Error('Unable to save state to storage'); });\r\n        }\r\n        else if (typeof stateSlice === 'undefined' && removeOnUndefined) {\r\n            return storage.remove(storageKeySerializer(key))\r\n                .catch(() => { throw new Error(`Exception on removing/cleaning undefined '${key}' state`); });\r\n        }\r\n        return Promise.resolve();\r\n    }, storage.ready().then(() => undefined));\r\n};\r\nexport const storageSync = () => (reducer) => {\r\n    return (state, action) => {\r\n        let nextState;\r\n        // If state arrives undefined, we need to let it through the supplied reducer\r\n        // in order to get a complete state as defined by user\r\n        if ((action.type === State.INIT) && !state) {\r\n            nextState = reducer(state, action);\r\n        }\r\n        else {\r\n            nextState = state;\r\n        }\r\n        if (action.type === StorageSyncActions.HYDRATED && action.payload) {\r\n            const overwriteMerge = (destinationArray, sourceArray, _) => sourceArray;\r\n            const options = {\r\n                arrayMerge: overwriteMerge\r\n            };\r\n            nextState = deepmerge(nextState, action.payload, options);\r\n        }\r\n        return reducer(nextState, action);\r\n    };\r\n};\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvbGliL3N5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFXLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsS0FBSyxFQUFTLE1BQU0sYUFBYSxDQUFDO0FBRTNDLE9BQU8sS0FBSyxVQUFVLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFVBQVUsQ0FBQzs7OztBQUV4QyxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUM7QUFDN0IsTUFBTSxVQUFVLEdBQUcsaURBQWlELENBQUM7QUFFckUsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUc7SUFDOUIsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QixRQUFRLEVBQUUsMEJBQTBCO0NBQ3ZDLENBQUM7QUFFRixNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7QUFHaEUsTUFBTSxPQUFPLGtCQUFrQjtJQUMzQixZQUNrQyxPQUF3QixFQUM5QyxNQUFrQixFQUNsQixTQUFrQjtRQUZJLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQzlDLFdBQU0sR0FBTixNQUFNLENBQVk7UUFDbEIsY0FBUyxHQUFULFNBQVMsQ0FBUztRQUd0QixjQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXpCLFVBQUssR0FBb0IsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUM1RCxTQUFTLENBQUUsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDOUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLGtCQUFrQjtRQUNuSCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUMzRCxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUMxQyxRQUFRLEVBQUUsRUFDVixNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQ3ZELE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEVBQ3ZDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxvQkFBb0IsQ0FDeEMsSUFBSSxFQUNKLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsRUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFDOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQzdCLENBQUMsQ0FDTCxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFwQnJCLENBQUM7OytHQUxLLGtCQUFrQixrQkFFZixZQUFZO21IQUZmLGtCQUFrQjsyRkFBbEIsa0JBQWtCO2tCQUQ5QixVQUFVOzswQkFHRixNQUFNOzJCQUFDLFlBQVk7O0FBMEI1Qjs7OztHQUlHO0FBRUgscUNBQXFDO0FBQ3JDLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVLEVBQUUsRUFBRTtJQUNuRCxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3JELE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDMUI7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDLENBQUM7QUFFRixNQUFNLFlBQVksR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUV4RCxNQUFNLENBQUMsTUFBTSw4QkFBOEIsR0FBRyxDQUMxQyxJQUFXLEVBQ1gsT0FBcUIsRUFDckIsb0JBQStDLEVBQy9DLFlBQXFCLEVBQ1QsRUFBRTtJQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxFQUFFO1FBQy9DLE1BQU0sS0FBSyxHQUFHLE1BQU0sZUFBZSxDQUFDO1FBRXBDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQztRQUNmLElBQUksT0FBTyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7UUFDeEQsSUFBSSxXQUFXLENBQUM7UUFDaEIsSUFBSSxPQUFPLENBQUM7UUFFWixJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsRUFBRTtZQUN6QixHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixrQ0FBa0M7WUFDbEMsSUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLEVBQUU7Z0JBQ2pDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdkI7aUJBQU07Z0JBQ0gsMkNBQTJDO2dCQUMzQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7b0JBQ25CLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO2lCQUMvQjtnQkFDRCw2Q0FBNkM7Z0JBQzdDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRTtvQkFDdkIsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUM7aUJBQ3ZDO2FBQ0o7WUFFRCw4REFBOEQ7WUFDOUQsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3hDLElBQ0ksT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxLQUFLLFVBQVU7b0JBQ3ZDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQ3pDO29CQUNFLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO2lCQUMvQjtxQkFBTTtvQkFDSCxPQUFPLENBQUMsS0FBSyxDQUNULG1EQUNJLElBQUksQ0FBQyxHQUFHLENBQ1osZUFBZSxDQUNsQixDQUFDO2lCQUNMO2FBQ0o7aUJBQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQy9DLGdFQUFnRTtnQkFDaEUsT0FBTyxDQUFDLEtBQUssQ0FDVCx5REFDSSxJQUFJLENBQUMsR0FBRyxDQUNaLGVBQWUsQ0FDbEIsQ0FBQzthQUNMO1NBQ0o7UUFFRCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDdkQsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsZ0NBQWdDO2dCQUNoQyxJQUFJLE9BQU8sRUFBRTtvQkFDVCxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN2QixNQUFNLGFBQWEsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFFM0MsSUFBSSxLQUFLLEtBQUssTUFBTSxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO3dCQUN6RCxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7cUJBQ3RDO2lCQUNKO2dCQUVELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFO29CQUM1QixDQUFDLEdBQUcsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO2lCQUNsRCxDQUFDLENBQUM7YUFDTjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsQ0FDaEMsS0FBVSxFQUNWLElBQVcsRUFDWCxPQUFxQixFQUNyQix1QkFBZ0QsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQzFELGlCQUFpQixHQUFHLEtBQUssRUFDekIsYUFBdUMsRUFDMUIsRUFBRTtJQUNmLElBQUk7UUFDQSxJQUFJLGFBQWEsSUFBSSxhQUFhLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ2hELE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQzVCO0tBQ0o7SUFBQyxPQUFRLENBQUMsRUFBRztRQUNWLGlDQUFpQztRQUNqQyxJQUFJLENBQUMsWUFBWSxTQUFTLEVBQUU7WUFDeEIsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDNUI7UUFDRCxNQUFNLENBQUMsQ0FBQztLQUNYO0lBRUQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDL0MsTUFBTSxlQUFlLENBQUM7UUFFdEIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksUUFBUSxDQUFDO1FBQ2IsSUFBSSxLQUFLLENBQUM7UUFDVixJQUFJLE9BQU8sQ0FBQztRQUVaLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3pCLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsVUFBVSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUV6QixJQUFJLE9BQU8sVUFBVSxLQUFLLFdBQVcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2hELHVDQUF1QztnQkFDdkMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFO29CQUNyQixVQUFVLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztpQkFDaEQ7cUJBQU07b0JBQ0gsNEZBQTRGO29CQUM1RixJQUFJLFNBQVMsQ0FBQztvQkFDZCxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUU7d0JBQ2xCLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ3pCO3lCQUFNLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRTt3QkFDekIsU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7cUJBQ2hDO29CQUNELElBQUksU0FBUyxFQUFFO3dCQUNYLFVBQVUsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFOzRCQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUM5QixPQUFPLElBQUksQ0FBQzt3QkFDaEIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNWO29CQUVELDZGQUE2RjtvQkFDN0YsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUU7d0JBQ3hDLElBQUksT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLFVBQVUsRUFBRTs0QkFDekMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUM7eUJBQy9CO3FCQUNKO3lCQUFNLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFO3dCQUMvQyxvRUFBb0U7d0JBQ3BFLE9BQU8sQ0FBQyxLQUFLLENBQ1QseURBQ0ksR0FBRyxDQUFDLElBQUksQ0FDWixlQUFlLENBQ2xCLENBQUM7cUJBQ0w7aUJBQ0o7Z0JBRUQ7OzttQkFHRztnQkFDSCxRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQztnQkFDOUIsS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUM7YUFDM0I7WUFFRCxHQUFHLEdBQUcsSUFBSSxDQUFDO1NBQ2Q7UUFFRCxJQUFJLE9BQU8sVUFBVSxLQUFLLFdBQVcsRUFBRTtZQUNuQyxJQUFJLE9BQU8sRUFBRTtnQkFDVCxJQUFJO29CQUNBLHlDQUF5QztvQkFDekMsVUFBVSxHQUFHLE9BQU8sQ0FDaEIsT0FBTyxVQUFVLEtBQUssUUFBUTt3QkFDMUIsQ0FBQyxDQUFDLFVBQVU7d0JBQ1osQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FDcEQsQ0FBQztpQkFDTDtnQkFBQyxPQUFPLENBQUMsRUFBRTtvQkFDUixPQUFPLENBQUMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUMvQzthQUNKO1lBRUQsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxFQUFFLFVBQVUsQ0FBQztpQkFDcEQsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzdFO2FBQU0sSUFBSSxPQUFPLFVBQVUsS0FBSyxXQUFXLElBQUksaUJBQWlCLEVBQUU7WUFDL0QsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUMzQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsTUFBTSxJQUFJLEtBQUssQ0FBQyw2Q0FBNkMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JHO1FBRUQsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDN0IsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUM5QyxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtJQUM5QyxPQUFPLENBQUMsS0FBVSxFQUFFLE1BQVcsRUFBRSxFQUFFO1FBQy9CLElBQUksU0FBUyxDQUFDO1FBRWQsNkVBQTZFO1FBQzdFLHNEQUFzRDtRQUN0RCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDeEMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDdEM7YUFBTTtZQUNILFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDckI7UUFFRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssa0JBQWtCLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDL0QsTUFBTSxjQUFjLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUM7WUFDekUsTUFBTSxPQUFPLEdBQXVCO2dCQUNoQyxVQUFVLEVBQUUsY0FBYzthQUM3QixDQUFDO1lBQ0YsU0FBUyxHQUFHLFNBQVMsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUM3RDtRQUVELE9BQU8sT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWN0aW9ucywgY3JlYXRlRWZmZWN0IH0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XHJcbmltcG9ydCB7IFN0YXRlLCBTdG9yZSB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcclxuXHJcbmltcG9ydCAqIGFzIGRlZXBtZXJnZV8gZnJvbSAnZGVlcG1lcmdlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIG1lcmdlTWFwLCBwYWlyd2lzZSwgc3RhcnRXaXRoLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jQ29uZmlnIH0gZnJvbSAnLi9zeW5jLm1vZHVsZSc7XHJcbmltcG9ydCB7IF9TWU5DX0NPTkZJRyB9IGZyb20gJy4vdG9rZW5zJztcclxuXHJcbmNvbnN0IGRlZXBtZXJnZSA9IGRlZXBtZXJnZV87XHJcbmNvbnN0IGRldGVjdERhdGUgPSAvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlUKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IFN0b3JhZ2VTeW5jQWN0aW9ucyA9IHtcclxuICAgIERVTU1ZOiAnbmdyeC1zdG9yZS1zeW5jL2R1bW15JyxcclxuICAgIEhZRFJBVEVEOiAnbmdyeC1zdG9yZS1zeW5jL2h5ZHJhdGVkJ1xyXG59O1xyXG5cclxuY29uc3QgaWdub3JlQWN0aW9ucyA9IFtTdGF0ZS5JTklULCBTdG9yYWdlU3luY0FjdGlvbnMuSFlEUkFURURdO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZVN5bmNFZmZlY3RzIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIEBJbmplY3QoX1NZTkNfQ09ORklHKSBwcml2YXRlIF9jb25maWc6IFN0b3JlU3luY0NvbmZpZyxcclxuICAgICAgICBwcml2YXRlIF9zdG9yZTogU3RvcmU8YW55PixcclxuICAgICAgICBwcml2YXRlIF9hY3Rpb25zJDogQWN0aW9uc1xyXG4gICAgKSB7fVxyXG5cclxuICAgIHByaXZhdGUgX2h5ZHJhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgIHN5bmMkOiBPYnNlcnZhYmxlPGFueT4gPSBjcmVhdGVFZmZlY3QoKCkgPT4gdGhpcy5fYWN0aW9ucyQucGlwZShcclxuICAgICAgICBzdGFydFdpdGgoIHsgdHlwZTogU3RvcmFnZVN5bmNBY3Rpb25zLkRVTU1ZIH0pLFxyXG4gICAgICAgIHRhcChhY3Rpb24gPT4gdGhpcy5faHlkcmF0ZWQgPSB0aGlzLl9oeWRyYXRlZCB8fCAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCkpLCAvLyBTaWRlLWVmZmVjdHkgOihcclxuICAgICAgICBmaWx0ZXIoYWN0aW9uID0+IGlnbm9yZUFjdGlvbnMuaW5kZXhPZihhY3Rpb24udHlwZSkgPT09IC0xKSxcclxuICAgICAgICBtZXJnZU1hcCgoKSA9PiB0aGlzLl9zdG9yZS5zZWxlY3QocyA9PiBzKSksXHJcbiAgICAgICAgcGFpcndpc2UoKSxcclxuICAgICAgICBmaWx0ZXIoKCkgPT4gIXRoaXMuX2NvbmZpZy5yZWh5ZHJhdGUgfHwgdGhpcy5faHlkcmF0ZWQpLFxyXG4gICAgICAgIGZpbHRlcigoW3ByZXYsIGN1cnJdKSA9PiBwcmV2ICE9PSBjdXJyKSxcclxuICAgICAgICBtZXJnZU1hcCgoW18sIGN1cnJdKSA9PiBzeW5jU3RhdGVVcGRhdGVBc3luYyhcclxuICAgICAgICAgICAgY3VycixcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmtleXMsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5zdG9yYWdlLFxyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc3RvcmFnZUtleVNlcmlhbGl6ZXIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5yZW1vdmVPblVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnN5bmNDb25kaXRpb25cclxuICAgICAgICApKVxyXG4gICAgKSwgeyBkaXNwYXRjaDogZmFsc2UgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCZWxvdyB0aGlzIHBvaW50IGlzIGVzc2VudGlhbGx5IGEgY29weS1wYXN0ZSBvZlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYnRyb25jb25lL25ncngtc3RvcmUtbG9jYWxzdG9yYWdlXHJcbiAqIG1vZGlmaWVkIHRvIGludGVyYWN0IHdpdGggYW4gYXN5bmNocm9ub3VzIHN0b3JhZ2UgQVBJXHJcbiAqL1xyXG5cclxuLy8gY29ycmVjdGx5IHBhcnNlIGRhdGVzIGZyb20gc3RvcmFnZVxyXG5leHBvcnQgY29uc3QgZGF0ZVJldml2ZXIgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIGRldGVjdERhdGUudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuY29uc3QgZHVtbXlSZXZpdmVyID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2YWx1ZTtcclxuXHJcbmV4cG9ydCBjb25zdCByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMgPSAoXHJcbiAgICBrZXlzOiBhbnlbXSxcclxuICAgIHN0b3JhZ2U6IFN0b3JlU3RvcmFnZSxcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyOiAoKGtleTogc3RyaW5nKSA9PiBzdHJpbmcpLFxyXG4gICAgcmVzdG9yZURhdGVzOiBib29sZWFuXHJcbik6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICByZXR1cm4ga2V5cy5yZWR1Y2UoYXN5bmMgKHByZXZpb3VzUHJvbWlzZSwgY3VycikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgcHJldmlvdXNQcm9taXNlO1xyXG5cclxuICAgICAgICBsZXQga2V5ID0gY3VycjtcclxuICAgICAgICBsZXQgcmV2aXZlciA9IHJlc3RvcmVEYXRlcyA/IGRhdGVSZXZpdmVyIDogZHVtbXlSZXZpdmVyO1xyXG4gICAgICAgIGxldCBkZXNlcmlhbGl6ZTtcclxuICAgICAgICBsZXQgZGVjcnlwdDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGtleSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIC8vIHVzZSB0aGUgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb25cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyW2tleV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldml2ZXIgPSBjdXJyW2tleV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb24gaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycltrZXldLnJldml2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZpdmVyID0gY3VycltrZXldLnJldml2ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHNlcmlhbGl6ZSBmdW5jdGlvbiBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyW2tleV0uZGVzZXJpYWxpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNlcmlhbGl6ZSA9IGN1cnJba2V5XS5kZXNlcmlhbGl6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgZW5jcnlwdCBhbmQgZGVjcnlwdCBmdW5jdGlvbnMgYXJlIGJvdGggcHJlc2VudHNcclxuICAgICAgICAgICAgaWYgKGN1cnJba2V5XS5lbmNyeXB0ICYmIGN1cnJba2V5XS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5kZWNyeXB0ID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ID0gY3VycltrZXldLmRlY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBFaXRoZXIgZW5jcnlwdCBvciBkZWNyeXB0IGlzIG5vdCBhIGZ1bmN0aW9uIG9uICcke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltrZXldXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycltrZXldLmVuY3J5cHQgfHwgY3VycltrZXldLmRlY3J5cHQpIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCBrbm93IHRoYXQgb25lIG9mIHRoZSBlbmNyeXB0aW9uIGZ1bmN0aW9ucyBpcyBub3QgcHJvdmlkZWRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEVpdGhlciBlbmNyeXB0IG9yIGRlY3J5cHQgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgb24gJyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UuZ2V0KHN0b3JhZ2VLZXlTZXJpYWxpemVyKGtleSkpLnRoZW4oc2xpY2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2xpY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZSBwcm92aWRlZCBkZWNyeXB0IGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gZGVjcnlwdChzbGljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPYmplY3RSZWdleCA9IG5ldyBSZWdFeHAoJ1t7XFxcXFtdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGljZSA9PT0gJ251bGwnIHx8IGlzT2JqZWN0UmVnZXgudGVzdChzbGljZS5jaGFyQXQoMCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlID0gSlNPTi5wYXJzZShzbGljZSwgcmV2aXZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIFtrZXldOiBkZXNlcmlhbGl6ZSA/IGRlc2VyaWFsaXplKHNsaWNlKSA6IHNsaWNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBzdG9yYWdlLnJlYWR5KCkudGhlbigoKSA9PiAoe30pKSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc3luY1N0YXRlVXBkYXRlQXN5bmMgPSAoXHJcbiAgICBzdGF0ZTogYW55LFxyXG4gICAga2V5czogYW55W10sXHJcbiAgICBzdG9yYWdlOiBTdG9yZVN0b3JhZ2UsXHJcbiAgICBzdG9yYWdlS2V5U2VyaWFsaXplcjogKGtleTogc3RyaW5nKSA9PiBzdHJpbmcgPSBrZXkgPT4ga2V5LFxyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQgPSBmYWxzZSxcclxuICAgIHN5bmNDb25kaXRpb24/OiAoc3RhdGU6IGFueSkgPT4gYm9vbGVhblxyXG4pOiBQcm9taXNlPHZvaWQ+ID0+ICB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChzeW5jQ29uZGl0aW9uICYmIHN5bmNDb25kaXRpb24oc3RhdGUpICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoICggZSApIHtcclxuICAgICAgICAvLyBUcmVhdCBUeXBlRXJyb3IgYXMgZG8gbm90IHN5bmNcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGtleXMucmVkdWNlKCBhc3luYyAocHJldmlvdXNQcm9taXNlLCBrZXkpID0+IHtcclxuICAgICAgICBhd2FpdCBwcmV2aW91c1Byb21pc2U7XHJcblxyXG4gICAgICAgIGxldCBzdGF0ZVNsaWNlID0gc3RhdGVba2V5XTtcclxuICAgICAgICBsZXQgcmVwbGFjZXI7XHJcbiAgICAgICAgbGV0IHNwYWNlO1xyXG4gICAgICAgIGxldCBlbmNyeXB0O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBzdGF0ZVtuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVTbGljZSAhPT0gJ3VuZGVmaW5lZCcgJiYga2V5W25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2Ugc2VyaWFsaXplIGZ1bmN0aW9uIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uc2VyaWFsaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleVtuYW1lXS5zZXJpYWxpemUoc3RhdGVTbGljZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNlcmlhbGl6ZSBmdW5jdGlvbiBpcyBub3Qgc3BlY2lmaWVkIGtleUZpbHRlciBvbiBmaWVsZHMgaWYgYW4gYXJyYXkgaGFzIGJlZW4gcHJvdmlkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleUZpbHRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5W25hbWVdLnJlZHVjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlGaWx0ZXIgPSBrZXlbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlbbmFtZV0uZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUZpbHRlciA9IGtleVtuYW1lXS5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleUZpbHRlci5yZWR1Y2UoKG1lbW8sIGF0dHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9bYXR0cl0gPSBzdGF0ZVNsaWNlW2F0dHJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lbW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGVuY3J5cHQgYW5kIGRlY3J5cHQgYXJlIHByZXNlbnQsIGFsc28gY2hlY2tlZCBhdCB0aGlzI3JlaHlkcmF0ZUFwcGxpY2F0aW9uU3RhdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uZW5jcnlwdCAmJiBrZXlbbmFtZV0uZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGtleVtuYW1lXS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ID0ga2V5W25hbWVdLmVuY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleVtuYW1lXS5lbmNyeXB0IHx8IGtleVtuYW1lXS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aG9zZSBpcyBub3QgcHJlc2VudCwgdGhlbiBsZXQga25vdyB0aGF0IG9uZSBpcyBtaXNzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRWl0aGVyIGVuY3J5cHQgb3IgZGVjcnlwdCBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBvbiAnJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlbbmFtZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICBSZXBsYWNlciBhbmQgc3BhY2UgYXJndW1lbnRzIHRvIHBhc3MgdG8gSlNPTi5zdHJpbmdpZnkuXHJcbiAgICAgICAgICAgICAgICAgIElmIHRoZXNlIGZpZWxkcyBkb24ndCBleGlzdCwgdW5kZWZpbmVkIHdpbGwgYmUgcGFzc2VkLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlciA9IGtleVtuYW1lXS5yZXBsYWNlcjtcclxuICAgICAgICAgICAgICAgIHNwYWNlID0ga2V5W25hbWVdLnNwYWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAoZW5jcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCBhIHN0cmluZyBtZXNzYWdlIGlzIHBhc3NlZFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBlbmNyeXB0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3RhdGVTbGljZSA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhdGVTbGljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShzdGF0ZVNsaWNlLCByZXBsYWNlciwgc3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBlbmNyeXB0IHN0YXRlOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5zZXQoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSwgc3RhdGVTbGljZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHNhdmUgc3RhdGUgdG8gc3RvcmFnZScpOyB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlID09PSAndW5kZWZpbmVkJyAmJiByZW1vdmVPblVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmUoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcihgRXhjZXB0aW9uIG9uIHJlbW92aW5nL2NsZWFuaW5nIHVuZGVmaW5lZCAnJHtrZXl9JyBzdGF0ZWApOyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH0sIHN0b3JhZ2UucmVhZHkoKS50aGVuKCgpID0+IHVuZGVmaW5lZCkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VTeW5jID0gKCkgPT4gKHJlZHVjZXI6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIChzdGF0ZTogYW55LCBhY3Rpb246IGFueSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0U3RhdGU7XHJcblxyXG4gICAgICAgIC8vIElmIHN0YXRlIGFycml2ZXMgdW5kZWZpbmVkLCB3ZSBuZWVkIHRvIGxldCBpdCB0aHJvdWdoIHRoZSBzdXBwbGllZCByZWR1Y2VyXHJcbiAgICAgICAgLy8gaW4gb3JkZXIgdG8gZ2V0IGEgY29tcGxldGUgc3RhdGUgYXMgZGVmaW5lZCBieSB1c2VyXHJcbiAgICAgICAgaWYgKChhY3Rpb24udHlwZSA9PT0gU3RhdGUuSU5JVCkgJiYgIXN0YXRlKSB7XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dFN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCAmJiBhY3Rpb24ucGF5bG9hZCkge1xyXG4gICAgICAgICAgICBjb25zdCBvdmVyd3JpdGVNZXJnZSA9IChkZXN0aW5hdGlvbkFycmF5LCBzb3VyY2VBcnJheSwgXykgPT4gc291cmNlQXJyYXk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnM6IGRlZXBtZXJnZV8uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGFycmF5TWVyZ2U6IG92ZXJ3cml0ZU1lcmdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IGRlZXBtZXJnZShuZXh0U3RhdGUsIGFjdGlvbi5wYXlsb2FkLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWR1Y2VyKG5leHRTdGF0ZSwgYWN0aW9uKTtcclxuICAgIH07XHJcbn07XHJcbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core","@ngrx/effects","@ngrx/store","deepmerge","rxjs/operators","C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\tokens.mjs"],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { Inject, Injectable } from '@angular/core';\r\nimport { createEffect } from '@ngrx/effects';\r\nimport { State } from '@ngrx/store';\r\nimport * as deepmerge_ from 'deepmerge';\r\nimport { filter, mergeMap, pairwise, startWith, tap } from 'rxjs/operators';\r\nimport { _SYNC_CONFIG } from './tokens';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@ngrx/store\";\r\nimport * as i2 from \"@ngrx/effects\";\r\nconst deepmerge = deepmerge_;\r\nconst detectDate = /(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/;\r\nexport const StorageSyncActions = {\r\n    DUMMY: 'ngrx-store-sync/dummy',\r\n    HYDRATED: 'ngrx-store-sync/hydrated'\r\n};\r\nconst ignoreActions = [State.INIT, StorageSyncActions.HYDRATED];\r\nexport class StorageSyncEffects {\r\n    constructor(_config, _store, _actions$) {\r\n        this._config = _config;\r\n        this._store = _store;\r\n        this._actions$ = _actions$;\r\n        this._hydrated = false;\r\n        this.sync$ = createEffect(() => this._actions$.pipe(startWith({ type: StorageSyncActions.DUMMY }), tap(action => this._hydrated = this._hydrated || (action.type === StorageSyncActions.HYDRATED)), // Side-effecty :(\r\n        filter(action => ignoreActions.indexOf(action.type) === -1), mergeMap(() => this._store.select(s => s)), pairwise(), filter(() => !this._config.rehydrate || this._hydrated), filter(([prev, curr]) => prev !== curr), mergeMap(([_, curr]) => syncStateUpdateAsync(curr, this._config.keys, this._config.storage, this._config.storageKeySerializer, this._config.removeOnUndefined, this._config.syncCondition))), { dispatch: false });\r\n    }\r\n}\r\nStorageSyncEffects.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects, deps: [{ token: _SYNC_CONFIG }, { token: i1.Store }, { token: i2.Actions }], target: i0.ɵɵFactoryTarget.Injectable });\r\nStorageSyncEffects.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StorageSyncEffects, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [_SYNC_CONFIG]\r\n                }] }, { type: i1.Store }, { type: i2.Actions }]; } });\r\n/**\r\n * Below this point is essentially a copy-paste of\r\n * https://github.com/btroncone/ngrx-store-localstorage\r\n * modified to interact with an asynchronous storage API\r\n */\r\n// correctly parse dates from storage\r\nexport const dateReviver = (key, value) => {\r\n    if (typeof value === 'string' && detectDate.test(value)) {\r\n        return new Date(value);\r\n    }\r\n    return value;\r\n};\r\nconst dummyReviver = (key, value) => value;\r\nexport const rehydrateApplicationStateAsync = (keys, storage, storageKeySerializer, restoreDates) => {\r\n    return keys.reduce(async (previousPromise, curr) => {\r\n        const state = await previousPromise;\r\n        let key = curr;\r\n        let reviver = restoreDates ? dateReviver : dummyReviver;\r\n        let deserialize;\r\n        let decrypt;\r\n        if (typeof key === 'object') {\r\n            key = Object.keys(key)[0];\r\n            // use the custom reviver function\r\n            if (typeof curr[key] === 'function') {\r\n                reviver = curr[key];\r\n            }\r\n            else {\r\n                // use custom reviver function if available\r\n                if (curr[key].reviver) {\r\n                    reviver = curr[key].reviver;\r\n                }\r\n                // use custom serialize function if available\r\n                if (curr[key].deserialize) {\r\n                    deserialize = curr[key].deserialize;\r\n                }\r\n            }\r\n            // Ensure that encrypt and decrypt functions are both presents\r\n            if (curr[key].encrypt && curr[key].decrypt) {\r\n                if (typeof curr[key].encrypt === 'function' &&\r\n                    typeof curr[key].decrypt === 'function') {\r\n                    decrypt = curr[key].decrypt;\r\n                }\r\n                else {\r\n                    console.error(`Either encrypt or decrypt is not a function on '${curr[key]}' key object.`);\r\n                }\r\n            }\r\n            else if (curr[key].encrypt || curr[key].decrypt) {\r\n                // Let know that one of the encryption functions is not provided\r\n                console.error(`Either encrypt or decrypt function is not present on '${curr[key]}' key object.`);\r\n            }\r\n        }\r\n        return storage.get(storageKeySerializer(key)).then(slice => {\r\n            if (slice) {\r\n                // Use provided decrypt function\r\n                if (decrypt) {\r\n                    slice = decrypt(slice);\r\n                    const isObjectRegex = new RegExp('[{\\\\[]');\r\n                    if (slice === 'null' || isObjectRegex.test(slice.charAt(0))) {\r\n                        slice = JSON.parse(slice, reviver);\r\n                    }\r\n                }\r\n                return Object.assign({}, state, {\r\n                    [key]: deserialize ? deserialize(slice) : slice\r\n                });\r\n            }\r\n            return state;\r\n        });\r\n    }, storage.ready().then(() => ({})));\r\n};\r\nexport const syncStateUpdateAsync = (state, keys, storage, storageKeySerializer = key => key, removeOnUndefined = false, syncCondition) => {\r\n    try {\r\n        if (syncCondition && syncCondition(state) !== true) {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Treat TypeError as do not sync\r\n        if (e instanceof TypeError) {\r\n            return Promise.resolve();\r\n        }\r\n        throw e;\r\n    }\r\n    return keys.reduce(async (previousPromise, key) => {\r\n        await previousPromise;\r\n        let stateSlice = state[key];\r\n        let replacer;\r\n        let space;\r\n        let encrypt;\r\n        if (typeof key === 'object') {\r\n            const name = Object.keys(key)[0];\r\n            stateSlice = state[name];\r\n            if (typeof stateSlice !== 'undefined' && key[name]) {\r\n                // use serialize function if specified.\r\n                if (key[name].serialize) {\r\n                    stateSlice = key[name].serialize(stateSlice);\r\n                }\r\n                else {\r\n                    // if serialize function is not specified keyFilter on fields if an array has been provided.\r\n                    let keyFilter;\r\n                    if (key[name].reduce) {\r\n                        keyFilter = key[name];\r\n                    }\r\n                    else if (key[name].filter) {\r\n                        keyFilter = key[name].filter;\r\n                    }\r\n                    if (keyFilter) {\r\n                        stateSlice = keyFilter.reduce((memo, attr) => {\r\n                            memo[attr] = stateSlice[attr];\r\n                            return memo;\r\n                        }, {});\r\n                    }\r\n                    // Check if encrypt and decrypt are present, also checked at this#rehydrateApplicationState()\r\n                    if (key[name].encrypt && key[name].decrypt) {\r\n                        if (typeof key[name].encrypt === 'function') {\r\n                            encrypt = key[name].encrypt;\r\n                        }\r\n                    }\r\n                    else if (key[name].encrypt || key[name].decrypt) {\r\n                        // If one of those is not present, then let know that one is missing\r\n                        console.error(`Either encrypt or decrypt function is not present on '${key[name]}' key object.`);\r\n                    }\r\n                }\r\n                /*\r\n                  Replacer and space arguments to pass to JSON.stringify.\r\n                  If these fields don't exist, undefined will be passed.\r\n                 */\r\n                replacer = key[name].replacer;\r\n                space = key[name].space;\r\n            }\r\n            key = name;\r\n        }\r\n        if (typeof stateSlice !== 'undefined') {\r\n            if (encrypt) {\r\n                try {\r\n                    // ensure that a string message is passed\r\n                    stateSlice = encrypt(typeof stateSlice === 'string'\r\n                        ? stateSlice\r\n                        : JSON.stringify(stateSlice, replacer, space));\r\n                }\r\n                catch (e) {\r\n                    console.warn('Unable to encrypt state:', e);\r\n                }\r\n            }\r\n            return storage.set(storageKeySerializer(key), stateSlice)\r\n                .catch(() => { throw new Error('Unable to save state to storage'); });\r\n        }\r\n        else if (typeof stateSlice === 'undefined' && removeOnUndefined) {\r\n            return storage.remove(storageKeySerializer(key))\r\n                .catch(() => { throw new Error(`Exception on removing/cleaning undefined '${key}' state`); });\r\n        }\r\n        return Promise.resolve();\r\n    }, storage.ready().then(() => undefined));\r\n};\r\nexport const storageSync = () => (reducer) => {\r\n    return (state, action) => {\r\n        let nextState;\r\n        // If state arrives undefined, we need to let it through the supplied reducer\r\n        // in order to get a complete state as defined by user\r\n        if ((action.type === State.INIT) && !state) {\r\n            nextState = reducer(state, action);\r\n        }\r\n        else {\r\n            nextState = state;\r\n        }\r\n        if (action.type === StorageSyncActions.HYDRATED && action.payload) {\r\n            const overwriteMerge = (destinationArray, sourceArray, _) => sourceArray;\r\n            const options = {\r\n                arrayMerge: overwriteMerge\r\n            };\r\n            nextState = deepmerge(nextState, action.payload, options);\r\n        }\r\n        return reducer(nextState, action);\r\n    };\r\n};\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvbGliL3N5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFXLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsS0FBSyxFQUFTLE1BQU0sYUFBYSxDQUFDO0FBRTNDLE9BQU8sS0FBSyxVQUFVLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFVBQVUsQ0FBQzs7OztBQUV4QyxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUM7QUFDN0IsTUFBTSxVQUFVLEdBQUcsaURBQWlELENBQUM7QUFFckUsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUc7SUFDOUIsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QixRQUFRLEVBQUUsMEJBQTBCO0NBQ3ZDLENBQUM7QUFFRixNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7QUFHaEUsTUFBTSxPQUFPLGtCQUFrQjtJQUMzQixZQUNrQyxPQUF3QixFQUM5QyxNQUFrQixFQUNsQixTQUFrQjtRQUZJLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQzlDLFdBQU0sR0FBTixNQUFNLENBQVk7UUFDbEIsY0FBUyxHQUFULFNBQVMsQ0FBUztRQUd0QixjQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXpCLFVBQUssR0FBb0IsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUM1RCxT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Q0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDdEM7YUFBTTtZQUNILFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDckI7UUFFRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssa0JBQWtCLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDL0QsTUFBTSxjQUFjLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUM7WUFDekUsTUFBTSxPQUFPLEdBQXVCO2dCQUNoQyxVQUFVLEVBQUUsY0FBYzthQUM3QixDQUFDO1lBQ0YsU0FBUyxHQUFHLFNBQVMsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUM3RDtRQUVELE9BQU8sT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWN0aW9ucywgY3JlYXRlRWZmZWN0IH0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XHJcbmltcG9ydCB7IFN0YXRlLCBTdG9yZSB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcclxuXHJcbmltcG9ydCAqIGFzIGRlZXBtZXJnZV8gZnJvbSAnZGVlcG1lcmdlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIG1lcmdlTWFwLCBwYWlyd2lzZSwgc3RhcnRXaXRoLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jQ29uZmlnIH0gZnJvbSAnLi9zeW5jLm1vZHVsZSc7XHJcbmltcG9ydCB7IF9TWU5DX0NPTkZJRyB9IGZyb20gJy4vdG9rZW5zJztcclxuXHJcbmNvbnN0IGRlZXBtZXJnZSA9IGRlZXBtZXJnZV87XHJcbmNvbnN0IGRldGVjdERhdGUgPSAvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlUKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IFN0b3JhZ2VTeW5jQWN0aW9ucyA9IHtcclxuICAgIERVTU1ZOiAnbmdyeC1zdG9yZS1zeW5jL2R1bW15JyxcclxuICAgIEhZRFJBVEVEOiAnbmdyeC1zdG9yZS1zeW5jL2h5ZHJhdGVkJ1xyXG59O1xyXG5cclxuY29uc3QgaWdub3JlQWN0aW9ucyA9IFtTdGF0ZS5JTklULCBTdG9yYWdlU3luY0FjdGlvbnMuSFlEUkFURURdO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZVN5bmNFZmZlY3RzIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIEBJbmplY3QoX1NZTkNfQ09ORklHKSBwcml2YXRlIF9jb25maWc6IFN0b3JlU3luY0NvbmZpZyxcclxuICAgICAgICBwcml2YXRlIF9zdG9yZTogU3RvcmU8YW55PixcclxuICAgICAgICBwcml2YXRlIF9hY3Rpb25zJDogQWN0aW9uc1xyXG4gICAgKSB7fVxyXG5cclxuICAgIHByaXZhdGUgX2h5ZHJhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgIHN5bmMkOiBPYnNlcnZhYmxlPGFueT4gPSBjcmVhdGVFZmZlY3QoKCkgPT4gdGhpcy5fYWN0aW9ucyQucGlwZShcclxuICAgICAgICBzdGFydFdpdGgoIHsgdHlwZTogU3RvcmFnZVN5bmNBY3Rpb25zLkRVTU1ZIH0pLFxyXG4gICAgICAgIHRhcChhY3Rpb24gPT4gdGhpcy5faHlkcmF0ZWQgPSB0aGlzLl9oeWRyYXRlZCB8fCAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCkpLCAvLyBTaWRlLWVmZmVjdHkgOihcclxuICAgICAgICBmaWx0ZXIoYWN0aW9uID0+IGlnbm9yZUFjdGlvbnMuaW5kZXhPZihhY3Rpb24udHlwZSkgPT09IC0xKSxcclxuICAgICAgICBtZXJnZU1hcCgoKSA9PiB0aGlzLl9zdG9yZS5zZWxlY3QocyA9PiBzKSksXHJcbiAgICAgICAgcGFpcndpc2UoKSxcclxuICAgICAgICBmaWx0ZXIoKCkgPT4gIXRoaXMuX2NvbmZpZy5yZWh5ZHJhdGUgfHwgdGhpcy5faHlkcmF0ZWQpLFxyXG4gICAgICAgIGZpbHRlcigoW3ByZXYsIGN1cnJdKSA9PiBwcmV2ICE9PSBjdXJyKSxcclxuICAgICAgICBtZXJnZU1hcCgoW18sIGN1cnJdKSA9PiBzeW5jU3RhdGVVcGRhdGVBc3luYyhcclxuICAgICAgICAgICAgY3VycixcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmtleXMsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5zdG9yYWdlLFxyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc3RvcmFnZUtleVNlcmlhbGl6ZXIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5yZW1vdmVPblVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnN5bmNDb25kaXRpb25cclxuICAgICAgICApKVxyXG4gICAgKSwgeyBkaXNwYXRjaDogZmFsc2UgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCZWxvdyB0aGlzIHBvaW50IGlzIGVzc2VudGlhbGx5IGEgY29weS1wYXN0ZSBvZlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYnRyb25jb25lL25ncngtc3RvcmUtbG9jYWxzdG9yYWdlXHJcbiAqIG1vZGlmaWVkIHRvIGludGVyYWN0IHdpdGggYW4gYXN5bmNocm9ub3VzIHN0b3JhZ2UgQVBJXHJcbiAqL1xyXG5cclxuLy8gY29ycmVjdGx5IHBhcnNlIGRhdGVzIGZyb20gc3RvcmFnZVxyXG5leHBvcnQgY29uc3QgZGF0ZVJldml2ZXIgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIGRldGVjdERhdGUudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuY29uc3QgZHVtbXlSZXZpdmVyID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2YWx1ZTtcclxuXHJcbmV4cG9ydCBjb25zdCByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMgPSAoXHJcbiAgICBrZXlzOiBhbnlbXSxcclxuICAgIHN0b3JhZ2U6IFN0b3JlU3RvcmFnZSxcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyOiAoKGtleTogc3RyaW5nKSA9PiBzdHJpbmcpLFxyXG4gICAgcmVzdG9yZURhdGVzOiBib29sZWFuXHJcbik6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICByZXR1cm4ga2V5cy5yZWR1Y2UoYXN5bmMgKHByZXZpb3VzUHJvbWlzZSwgY3VycikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgcHJldmlvdXNQcm9taXNlO1xyXG5cclxuICAgICAgICBsZXQga2V5ID0gY3VycjtcclxuICAgICAgICBsZXQgcmV2aXZlciA9IHJlc3RvcmVEYXRlcyA/IGRhdGVSZXZpdmVyIDogZHVtbXlSZXZpdmVyO1xyXG4gICAgICAgIGxldCBkZXNlcmlhbGl6ZTtcclxuICAgICAgICBsZXQgZGVjcnlwdDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGtleSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIC8vIHVzZSB0aGUgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb25cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyW2tleV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldml2ZXIgPSBjdXJyW2tleV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHJldml2ZXIgZnVuY3Rpb24gaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycltrZXldLnJldml2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZpdmVyID0gY3VycltrZXldLnJldml2ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHNlcmlhbGl6ZSBmdW5jdGlvbiBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyW2tleV0uZGVzZXJpYWxpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNlcmlhbGl6ZSA9IGN1cnJba2V5XS5kZXNlcmlhbGl6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgZW5jcnlwdCBhbmQgZGVjcnlwdCBmdW5jdGlvbnMgYXJlIGJvdGggcHJlc2VudHNcclxuICAgICAgICAgICAgaWYgKGN1cnJba2V5XS5lbmNyeXB0ICYmIGN1cnJba2V5XS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJba2V5XS5kZWNyeXB0ID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ID0gY3VycltrZXldLmRlY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBFaXRoZXIgZW5jcnlwdCBvciBkZWNyeXB0IGlzIG5vdCBhIGZ1bmN0aW9uIG9uICcke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltrZXldXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycltrZXldLmVuY3J5cHQgfHwgY3VycltrZXldLmRlY3J5cHQpIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCBrbm93IHRoYXQgb25lIG9mIHRoZSBlbmNyeXB0aW9uIGZ1bmN0aW9ucyBpcyBub3QgcHJvdmlkZWRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEVpdGhlciBlbmNyeXB0IG9yIGRlY3J5cHQgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgb24gJyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UuZ2V0KHN0b3JhZ2VLZXlTZXJpYWxpemVyKGtleSkpLnRoZW4oc2xpY2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2xpY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZSBwcm92aWRlZCBkZWNyeXB0IGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gZGVjcnlwdChzbGljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPYmplY3RSZWdleCA9IG5ldyBSZWdFeHAoJ1t7XFxcXFtdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGljZSA9PT0gJ251bGwnIHx8IGlzT2JqZWN0UmVnZXgudGVzdChzbGljZS5jaGFyQXQoMCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlID0gSlNPTi5wYXJzZShzbGljZSwgcmV2aXZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIFtrZXldOiBkZXNlcmlhbGl6ZSA/IGRlc2VyaWFsaXplKHNsaWNlKSA6IHNsaWNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBzdG9yYWdlLnJlYWR5KCkudGhlbigoKSA9PiAoe30pKSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc3luY1N0YXRlVXBkYXRlQXN5bmMgPSAoXHJcbiAgICBzdGF0ZTogYW55LFxyXG4gICAga2V5czogYW55W10sXHJcbiAgICBzdG9yYWdlOiBTdG9yZVN0b3JhZ2UsXHJcbiAgICBzdG9yYWdlS2V5U2VyaWFsaXplcjogKGtleTogc3RyaW5nKSA9PiBzdHJpbmcgPSBrZXkgPT4ga2V5LFxyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQgPSBmYWxzZSxcclxuICAgIHN5bmNDb25kaXRpb24/OiAoc3RhdGU6IGFueSkgPT4gYm9vbGVhblxyXG4pOiBQcm9taXNlPHZvaWQ+ID0+ICB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChzeW5jQ29uZGl0aW9uICYmIHN5bmNDb25kaXRpb24oc3RhdGUpICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoICggZSApIHtcclxuICAgICAgICAvLyBUcmVhdCBUeXBlRXJyb3IgYXMgZG8gbm90IHN5bmNcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGtleXMucmVkdWNlKCBhc3luYyAocHJldmlvdXNQcm9taXNlLCBrZXkpID0+IHtcclxuICAgICAgICBhd2FpdCBwcmV2aW91c1Byb21pc2U7XHJcblxyXG4gICAgICAgIGxldCBzdGF0ZVNsaWNlID0gc3RhdGVba2V5XTtcclxuICAgICAgICBsZXQgcmVwbGFjZXI7XHJcbiAgICAgICAgbGV0IHNwYWNlO1xyXG4gICAgICAgIGxldCBlbmNyeXB0O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBzdGF0ZVtuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVTbGljZSAhPT0gJ3VuZGVmaW5lZCcgJiYga2V5W25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1c2Ugc2VyaWFsaXplIGZ1bmN0aW9uIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uc2VyaWFsaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleVtuYW1lXS5zZXJpYWxpemUoc3RhdGVTbGljZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNlcmlhbGl6ZSBmdW5jdGlvbiBpcyBub3Qgc3BlY2lmaWVkIGtleUZpbHRlciBvbiBmaWVsZHMgaWYgYW4gYXJyYXkgaGFzIGJlZW4gcHJvdmlkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleUZpbHRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5W25hbWVdLnJlZHVjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlGaWx0ZXIgPSBrZXlbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlbbmFtZV0uZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUZpbHRlciA9IGtleVtuYW1lXS5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVTbGljZSA9IGtleUZpbHRlci5yZWR1Y2UoKG1lbW8sIGF0dHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9bYXR0cl0gPSBzdGF0ZVNsaWNlW2F0dHJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lbW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGVuY3J5cHQgYW5kIGRlY3J5cHQgYXJlIHByZXNlbnQsIGFsc28gY2hlY2tlZCBhdCB0aGlzI3JlaHlkcmF0ZUFwcGxpY2F0aW9uU3RhdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlbbmFtZV0uZW5jcnlwdCAmJiBrZXlbbmFtZV0uZGVjcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGtleVtuYW1lXS5lbmNyeXB0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ID0ga2V5W25hbWVdLmVuY3J5cHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleVtuYW1lXS5lbmNyeXB0IHx8IGtleVtuYW1lXS5kZWNyeXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aG9zZSBpcyBub3QgcHJlc2VudCwgdGhlbiBsZXQga25vdyB0aGF0IG9uZSBpcyBtaXNzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRWl0aGVyIGVuY3J5cHQgb3IgZGVjcnlwdCBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBvbiAnJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlbbmFtZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0nIGtleSBvYmplY3QuYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICBSZXBsYWNlciBhbmQgc3BhY2UgYXJndW1lbnRzIHRvIHBhc3MgdG8gSlNPTi5zdHJpbmdpZnkuXHJcbiAgICAgICAgICAgICAgICAgIElmIHRoZXNlIGZpZWxkcyBkb24ndCBleGlzdCwgdW5kZWZpbmVkIHdpbGwgYmUgcGFzc2VkLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlciA9IGtleVtuYW1lXS5yZXBsYWNlcjtcclxuICAgICAgICAgICAgICAgIHNwYWNlID0ga2V5W25hbWVdLnNwYWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAoZW5jcnlwdCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCBhIHN0cmluZyBtZXNzYWdlIGlzIHBhc3NlZFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlU2xpY2UgPSBlbmNyeXB0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3RhdGVTbGljZSA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhdGVTbGljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShzdGF0ZVNsaWNlLCByZXBsYWNlciwgc3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBlbmNyeXB0IHN0YXRlOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5zZXQoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSwgc3RhdGVTbGljZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHNhdmUgc3RhdGUgdG8gc3RvcmFnZScpOyB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZVNsaWNlID09PSAndW5kZWZpbmVkJyAmJiByZW1vdmVPblVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmUoc3RvcmFnZUtleVNlcmlhbGl6ZXIoa2V5KSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IHRocm93IG5ldyBFcnJvcihgRXhjZXB0aW9uIG9uIHJlbW92aW5nL2NsZWFuaW5nIHVuZGVmaW5lZCAnJHtrZXl9JyBzdGF0ZWApOyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH0sIHN0b3JhZ2UucmVhZHkoKS50aGVuKCgpID0+IHVuZGVmaW5lZCkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VTeW5jID0gKCkgPT4gKHJlZHVjZXI6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIChzdGF0ZTogYW55LCBhY3Rpb246IGFueSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0U3RhdGU7XHJcblxyXG4gICAgICAgIC8vIElmIHN0YXRlIGFycml2ZXMgdW5kZWZpbmVkLCB3ZSBuZWVkIHRvIGxldCBpdCB0aHJvdWdoIHRoZSBzdXBwbGllZCByZWR1Y2VyXHJcbiAgICAgICAgLy8gaW4gb3JkZXIgdG8gZ2V0IGEgY29tcGxldGUgc3RhdGUgYXMgZGVmaW5lZCBieSB1c2VyXHJcbiAgICAgICAgaWYgKChhY3Rpb24udHlwZSA9PT0gU3RhdGUuSU5JVCkgJiYgIXN0YXRlKSB7XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dFN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCAmJiBhY3Rpb24ucGF5bG9hZCkge1xyXG4gICAgICAgICAgICBjb25zdCBvdmVyd3JpdGVNZXJnZSA9IChkZXN0aW5hdGlvbkFycmF5LCBzb3VyY2VBcnJheSwgXykgPT4gc291cmNlQXJyYXk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnM6IGRlZXBtZXJnZV8uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGFycmF5TWVyZ2U6IG92ZXJ3cml0ZU1lcmdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZSA9IGRlZXBtZXJnZShuZXh0U3RhdGUsIGFjdGlvbi5wYXlsb2FkLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWR1Y2VyKG5leHRTdGF0ZSwgYWN0aW9uKTtcclxuICAgIH07XHJcbn07XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"sync.js","sourceRoot":"","sources":["../../../../projects/ngrx-store-sync/src/lib/sync.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[15,0,0,15],[17,0,0,17],[27,0,0,27],[29,0,0,29],[35,0,0,35],[50,0,0,50],[51,0,0,51]],[[0,0,1,0],[7,0,1,7],[9,0,1,18],[21,0,1,30],[23,0,1,32],[29,0,1,38],[44,0,1,53],[45,0,1,54]],[[0,0,2,0],[7,0,2,7],[9,0,2,9],[14,0,2,14],[16,0,2,23],[22,0,2,29],[35,0,2,42],[36,0,2,43]],[[0,0,4,0],[7,0,4,7],[12,0,4,12],[22,0,4,22],[28,0,4,28],[39,0,4,39],[40,0,4,40]],[[0,0,6,0],[7,0,6,7],[9,0,6,9],[15,0,6,15],[17,0,6,17],[25,0,6,25],[27,0,6,27],[35,0,6,35],[37,0,6,37],[46,0,6,46],[48,0,6,48],[51,0,6,51],[53,0,6,53],[59,0,6,59],[75,0,6,75],[76,0,6,76]],[[0,0,8,0],[7,0,8,7],[9,0,8,9],[21,0,8,21],[23,0,8,23],[29,0,8,29],[39,0,8,39],[40,0,8,40]],[],[],[],[[0,0,10,0],[6,0,10,6],[15,0,10,15],[18,0,10,18],[28,0,10,28],[29,0,10,29]],[[0,0,11,0],[6,0,11,6],[16,0,11,16],[19,0,11,19],[68,0,11,68],[69,0,11,69]],[[0,0,13,0],[6,0,13,6],[7,0,13,7],[13,0,13,13],[31,0,13,31],[34,0,13,34]],[[4,0,14,4],[9,0,14,9],[11,0,14,11],[34,0,14,34]],[[4,0,15,4],[12,0,15,12],[14,0,15,14],[40,0,15,40]],[[1,0,16,1],[2,0,16,2]],[[0,0,18,0],[6,0,18,6],[19,0,18,19],[22,0,18,22],[23,0,18,23],[28,0,18,28],[29,0,18,29],[33,0,18,33],[35,0,18,35],[53,0,18,53],[54,0,18,54],[62,0,18,62],[63,0,18,63],[64,0,18,64]],[[0,0,21,0],[6,0,21,6],[13,0,21,13],[31,0,21,31]],[[4,0,22,4],[16,0,23,38],[23,0,23,62],[25,0,24,16],[31,0,24,34],[33,0,25,16],[42,0,25,34]],[[8,0,23,38],[20,0,23,45],[23,0,23,38],[30,0,23,45],[31,0,23,62]],[[8,0,24,16],[19,0,24,22],[22,0,24,16],[28,0,24,22],[29,0,24,34]],[[8,0,25,16],[22,0,25,25],[25,0,25,16],[34,0,25,25],[35,0,25,34]],[[8,0,28,12],[22,0,28,21],[25,0,28,24],[30,0,28,29],[31,0,28,30]],[[8,0,30,5],[18,0,30,10],[21,0,30,30],[33,0,30,42],[34,0,30,43],[37,0,30,46],[39,0,30,48],[40,0,30,49],[44,0,30,53],[45,0,30,54],[54,0,30,63],[55,0,30,64],[59,0,30,68],[60,0,31,8],[69,0,31,17],[70,0,31,19],[72,0,31,21],[76,0,31,25],[78,0,31,27],[96,0,31,45],[97,0,31,46],[102,0,31,51],[104,0,31,53],[105,0,31,54],[107,0,32,8],[110,0,32,11],[111,0,32,12],[117,0,32,18],[118,0,32,19],[120,0,32,21],[121,0,32,22],[125,0,32,26],[126,0,32,27],[135,0,32,36],[138,0,32,39],[142,0,32,43],[143,0,32,44],[152,0,32,53],[156,0,32,57],[157,0,32,58],[163,0,32,64],[164,0,32,65],[168,0,32,69],[173,0,32,74],[191,0,32,92],[192,0,32,93],[200,0,32,101],[201,0,32,102],[202,0,32,103],[204,0,32,105],[222,0,32,123]],[[8,0,33,8],[14,0,33,14],[15,0,33,15],[21,0,33,21],[22,0,33,22],[24,0,33,24],[25,0,33,25],[38,0,33,38],[39,0,33,39],[46,0,33,46],[47,0,33,47],[53,0,33,53],[54,0,33,54],[58,0,33,58],[59,0,33,59],[64,0,33,64],[65,0,33,65],[66,0,33,66],[67,0,33,67],[69,0,34,8],[77,0,34,16],[78,0,34,17],[81,0,34,20],[83,0,34,22],[84,0,34,23],[88,0,34,27],[89,0,34,28],[95,0,34,34],[96,0,34,35],[102,0,34,41],[103,0,34,42],[104,0,34,43],[105,0,34,44],[107,0,34,46],[108,0,34,47],[109,0,34,48],[110,0,34,49],[111,0,34,50],[113,0,35,8],[121,0,35,16],[123,0,35,18],[125,0,36,8],[131,0,36,14],[132,0,36,15],[135,0,36,18],[137,0,36,20],[138,0,36,21],[139,0,36,22],[143,0,36,26],[144,0,36,27],[151,0,36,34],[152,0,36,35],[161,0,36,44],[165,0,36,48],[169,0,36,52],[170,0,36,53],[179,0,36,62],[180,0,36,63],[182,0,37,8],[188,0,37,14],[189,0,37,15],[190,0,37,16],[191,0,37,17],[195,0,37,21],[197,0,37,23],[201,0,37,27],[202,0,37,28],[204,0,37,30],[206,0,37,32],[207,0,37,33],[211,0,37,37],[216,0,37,42],[220,0,37,46],[221,0,37,47],[223,0,38,8],[231,0,38,16],[232,0,38,17],[233,0,38,18],[234,0,38,19],[235,0,38,20],[237,0,38,22],[241,0,38,26],[242,0,38,27],[244,0,38,29],[246,0,38,31],[247,0,38,32],[267,0,38,52],[268,0,39,12],[272,0,39,16],[274,0,40,12],[278,0,40,16],[279,0,40,17],[286,0,40,24],[287,0,40,25],[291,0,40,29],[293,0,41,12],[297,0,41,16],[298,0,41,17],[305,0,41,24],[306,0,41,25],[313,0,41,32],[315,0,42,12],[319,0,42,16],[320,0,42,17],[327,0,42,24],[328,0,42,25],[348,0,42,45],[350,0,43,12],[354,0,43,16],[355,0,43,17],[362,0,43,24],[363,0,43,25],[380,0,43,42],[382,0,44,12],[386,0,44,16],[387,0,44,17],[394,0,44,24],[395,0,44,25],[408,0,44,38],[409,0,45,9],[410,0,45,10],[411,0,46,5],[413,0,46,7],[415,0,46,9],[423,0,46,17],[425,0,46,19],[430,0,46,24],[432,0,46,26],[433,0,46,27],[434,0,46,28]],[[4,0,26,7],[5,0,26,8]],[],[[111,0,21,13],[129,0,21,31],[147,0,23,16],[159,0,23,28]],[[115,0,21,13],[133,0,21,31]],[[91,0,21,13],[109,0,21,31]],[[18,0,20,1],[28,0,20,11]],[],[[26,0,23,9],[32,0,23,15]],[[27,0,23,16],[39,0,23,28]],[],[[0,0,49,0]],[],[],[],[[3,0,53,3]],[[0,0,55,0],[37,0,55,37]],[[0,0,56,0],[6,0,56,6],[7,0,56,7],[13,0,56,13],[24,0,56,24],[27,0,56,27],[28,0,56,28],[31,0,56,39],[33,0,56,41],[38,0,56,51],[40,0,56,53],[42,0,56,55]],[[4,0,57,4],[8,0,57,8],[15,0,57,15],[20,0,57,20],[25,0,57,25],[33,0,57,33],[37,0,57,37],[47,0,57,47],[48,0,57,48],[52,0,57,52],[53,0,57,53],[58,0,57,58],[59,0,57,59],[61,0,57,61]],[[8,0,58,8],[15,0,58,15],[19,0,58,19],[23,0,58,23],[24,0,58,24],[29,0,58,29],[30,0,58,30],[31,0,58,31]],[[5,0,59,5]],[[4,0,60,4],[11,0,60,11],[16,0,60,16],[17,0,60,17]],[[0,0,61,0],[1,0,61,1],[2,0,61,2]],[[0,0,63,0],[6,0,63,6],[18,0,63,18],[21,0,63,21],[22,0,63,22],[25,0,63,33],[27,0,63,35],[32,0,63,45],[34,0,63,47],[36,0,63,49],[37,0,63,50],[42,0,63,55],[43,0,63,56]],[[0,0,65,0],[6,0,65,6],[7,0,65,7],[13,0,65,13],[43,0,65,43],[46,0,65,46],[47,0,66,4],[51,0,66,15],[53,0,67,4],[60,0,67,25],[62,0,68,4],[82,0,68,51],[84,0,69,4],[96,0,69,25],[98,0,70,16],[100,0,70,18]],[[4,0,71,4],[11,0,71,11],[15,0,71,15],[16,0,71,16],[22,0,71,22],[23,0,71,23],[28,0,71,28],[30,0,71,30],[45,0,71,45],[47,0,71,47],[51,0,71,51],[53,0,71,53],[55,0,71,55]],[[8,0,72,8],[14,0,72,14],[19,0,72,19],[22,0,72,22],[28,0,72,28],[43,0,72,43],[44,0,72,44]],[[8,0,74,8],[12,0,74,12],[15,0,74,15],[18,0,74,18],[22,0,74,22],[23,0,74,23]],[[8,0,75,8],[12,0,75,12],[19,0,75,19],[22,0,75,22],[34,0,75,34],[35,0,75,35],[36,0,75,36],[37,0,75,37],[48,0,75,48],[49,0,75,49],[50,0,75,50],[51,0,75,51],[63,0,75,63],[64,0,75,64]],[[8,0,76,8],[12,0,76,12],[23,0,76,23],[24,0,76,24]],[[8,0,77,8],[12,0,77,12],[19,0,77,19],[20,0,77,20]],[[8,0,79,8],[12,0,79,12],[19,0,79,19],[22,0,79,22],[27,0,79,27],[35,0,79,35],[37,0,79,37]],[[12,0,80,12],[15,0,80,15],[18,0,80,18],[24,0,80,24],[25,0,80,25],[29,0,80,29],[30,0,80,30],[33,0,80,33],[34,0,80,34],[35,0,80,35],[36,0,80,36],[37,0,80,37],[38,0,80,38]],[[12,0,81,12],[46,0,81,46]],[[12,0,82,12],[16,0,82,16],[23,0,82,23],[27,0,82,27],[28,0,82,28],[31,0,82,31],[32,0,82,32],[37,0,82,37],[47,0,82,47],[49,0,82,49]],[[16,0,83,16],[23,0,83,23],[26,0,83,26],[30,0,83,30],[31,0,83,31],[34,0,83,34],[35,0,83,35],[36,0,83,36]],[[13,0,84,13]],[[17,0,84,19]],[[16,0,85,16],[59,0,85,59]],[[16,0,86,16],[20,0,86,20],[24,0,86,24],[25,0,86,25],[28,0,86,28],[29,0,86,29],[30,0,86,30],[37,0,86,37],[39,0,86,39]],[[20,0,87,20],[27,0,87,27],[30,0,87,30],[34,0,87,34],[35,0,87,35],[38,0,87,38],[39,0,87,39],[40,0,87,40],[47,0,87,47],[48,0,87,48]],[[17,0,88,17]],[[16,0,89,16],[61,0,89,61]],[[16,0,90,16],[20,0,90,20],[24,0,90,24],[25,0,90,25],[28,0,90,28],[29,0,90,29],[30,0,90,30],[41,0,90,41],[43,0,90,43]],[[20,0,91,20],[31,0,91,31],[34,0,91,34],[38,0,91,38],[39,0,91,39],[42,0,91,42],[43,0,91,43],[44,0,91,44],[55,0,91,55],[56,0,91,56]],[[17,0,92,17]],[[13,0,93,13]],[[12,0,95,12],[74,0,95,74]],[[12,0,96,12],[16,0,96,16],[20,0,96,20],[21,0,96,21],[24,0,96,24],[25,0,96,25],[26,0,96,26],[33,0,96,33],[37,0,96,37],[41,0,96,41],[42,0,96,42],[45,0,96,45],[46,0,96,46],[47,0,96,47],[54,0,96,54],[56,0,96,56]],[[16,0,97,16],[20,0,98,20],[27,0,98,27],[31,0,98,31],[32,0,98,32],[35,0,98,35],[36,0,98,36],[37,0,98,37],[44,0,98,44],[49,0,98,49],[59,0,98,59]],[[20,0,99,20],[27,0,99,27],[31,0,99,31],[32,0,99,32],[35,0,99,35],[36,0,99,36],[37,0,99,37],[44,0,99,44],[49,0,99,49],[59,0,99,59],[61,0,100,18]],[[20,0,101,20],[27,0,101,27],[30,0,101,30],[34,0,101,34],[35,0,101,35],[38,0,101,38],[39,0,101,39],[40,0,101,40],[47,0,101,47],[48,0,101,48]],[[17,0,102,17]],[[21,0,102,23]],[[20,0,103,20],[27,0,103,27],[28,0,103,28],[33,0,103,33],[34,0,104,24],[85,0,105,28],[89,0,105,32],[90,0,105,33],[93,0,105,36],[94,0,106,24],[109,0,106,39],[110,0,107,21],[111,0,107,22]],[[17,0,108,17]],[[13,0,109,13]],[[17,0,109,19],[21,0,109,23],[25,0,109,27],[26,0,109,28],[29,0,109,31],[30,0,109,32],[31,0,109,33],[38,0,109,40],[42,0,109,44],[46,0,109,48],[47,0,109,49],[50,0,109,52],[51,0,109,53],[52,0,109,54],[59,0,109,61],[61,0,109,63]],[[16,0,110,16],[80,0,110,80]],[[16,0,111,16],[23,0,111,23],[24,0,111,24],[29,0,111,29],[30,0,112,20],[87,0,113,24],[91,0,113,28],[92,0,113,29],[95,0,113,32],[96,0,114,20],[111,0,114,35],[112,0,115,17],[113,0,115,18]],[[13,0,116,13]],[[9,0,117,9]],[[8,0,119,8],[15,0,119,15],[22,0,119,22],[23,0,119,23],[26,0,119,26],[27,0,119,27],[47,0,119,47],[48,0,119,48],[51,0,119,51],[52,0,119,52],[53,0,119,53],[54,0,119,54],[58,0,119,58],[59,0,119,59],[64,0,119,64],[65,0,119,65],[67,0,119,67]],[[12,0,120,12],[16,0,120,16],[21,0,120,21],[23,0,120,23]],[[16,0,121,16],[48,0,121,48]],[[16,0,122,16],[20,0,122,20],[27,0,122,27],[29,0,122,29]],[[20,0,123,20],[25,0,123,25],[28,0,123,28],[35,0,123,35],[36,0,123,36],[41,0,123,41],[42,0,123,42],[43,0,123,43]],[[20,0,124,20],[26,0,124,26],[39,0,124,39],[42,0,124,42],[46,0,124,46],[52,0,124,52],[53,0,124,53],[61,0,124,61],[62,0,124,62],[63,0,124,63]],[[20,0,126,20],[24,0,126,24],[29,0,126,29],[34,0,126,34],[40,0,126,40],[44,0,126,44],[57,0,126,57],[58,0,126,58],[62,0,126,62],[63,0,126,63],[68,0,126,68],[69,0,126,69],[75,0,126,75],[76,0,126,76],[77,0,126,77],[78,0,126,78],[79,0,126,79],[81,0,126,81]],[[24,0,127,24],[29,0,127,29],[32,0,127,32],[36,0,127,36],[37,0,127,37],[42,0,127,42],[43,0,127,43],[48,0,127,48],[50,0,127,50],[57,0,127,57],[58,0,127,58],[59,0,127,59]],[[21,0,128,21]],[[17,0,129,17]],[[16,0,131,16],[23,0,131,23],[29,0,131,29],[30,0,131,30],[36,0,131,36],[37,0,131,37],[39,0,131,39],[41,0,131,41],[46,0,131,46],[48,0,131,48]],[[20,0,132,20],[21,0,132,21],[24,0,132,24],[25,0,132,25],[27,0,132,27],[38,0,132,38],[39,0,132,39],[40,0,132,40],[41,0,132,41],[52,0,132,52],[53,0,132,53],[58,0,132,58],[59,0,132,59],[60,0,132,60],[61,0,132,61],[62,0,132,62],[67,0,132,67]],[[17,0,133,17],[18,0,133,18],[19,0,133,19]],[[13,0,134,13]],[[12,0,135,12],[19,0,135,19],[24,0,135,24],[25,0,135,25]],[[8,0,136,8],[9,0,136,9],[10,0,136,10],[11,0,136,11]],[[4,0,137,4],[5,0,137,5],[7,0,137,7],[14,0,137,14],[15,0,137,15],[20,0,137,20],[22,0,137,22],[23,0,137,23],[27,0,137,27],[28,0,137,28],[31,0,137,31],[33,0,137,33],[34,0,137,34],[35,0,137,35],[37,0,137,37],[38,0,137,38],[39,0,137,39],[40,0,137,40],[41,0,137,41]],[[0,0,138,0],[1,0,138,1],[2,0,138,2]],[[0,0,140,0],[6,0,140,6],[7,0,140,7],[13,0,140,13],[33,0,140,33],[36,0,140,36],[37,0,141,4],[42,0,141,14],[44,0,142,4],[48,0,142,15],[50,0,143,4],[57,0,143,25],[59,0,144,4],[82,0,144,52],[85,0,144,55],[86,0,144,56],[88,0,144,58],[89,0,144,59],[92,0,144,62],[94,0,145,4],[111,0,145,21],[114,0,145,24],[119,0,145,29],[121,0,146,4],[134,0,146,43],[136,0,147,17],[138,0,147,19]],[[4,0,148,4],[8,0,148,8]],[[8,0,149,8],[12,0,149,12],[25,0,149,25],[29,0,149,29],[42,0,149,42],[43,0,149,43],[48,0,149,48],[49,0,149,49],[54,0,149,54],[58,0,149,58],[60,0,149,60]],[[12,0,150,12],[19,0,150,19],[26,0,150,26],[27,0,150,27],[34,0,150,34],[36,0,150,36],[37,0,150,37]],[[9,0,151,9]],[[5,0,152,5]],[[4,0,152,6],[11,0,152,14],[12,0,152,15],[14,0,152,18]],[[8,0,153,8],[41,0,153,41]],[[8,0,154,8],[12,0,154,12],[13,0,154,13],[25,0,154,25],[34,0,154,34],[36,0,154,36]],[[12,0,155,12],[19,0,155,19],[26,0,155,26],[27,0,155,27],[34,0,155,34],[36,0,155,36],[37,0,155,37]],[[9,0,156,9]],[[8,0,157,8],[14,0,157,14],[15,0,157,15],[16,0,157,16]],[[5,0,158,5]],[[4,0,160,4],[11,0,160,11],[15,0,160,15],[16,0,160,16],[22,0,160,22],[23,0,160,24],[28,0,160,29],[30,0,160,31],[45,0,160,46],[47,0,160,48],[50,0,160,51],[52,0,160,53],[54,0,160,55]],[[8,0,161,8],[14,0,161,14],[29,0,161,29],[30,0,161,30]],[[8,0,163,8],[12,0,163,12],[22,0,163,22],[25,0,163,25],[30,0,163,30],[31,0,163,31],[34,0,163,34],[35,0,163,35],[36,0,163,36]],[[8,0,164,8],[12,0,164,12],[20,0,164,20],[21,0,164,21]],[[8,0,165,8],[12,0,165,12],[17,0,165,17],[18,0,165,18]],[[8,0,166,8],[12,0,166,12],[19,0,166,19],[20,0,166,20]],[[8,0,168,8],[12,0,168,12],[19,0,168,19],[22,0,168,22],[27,0,168,27],[35,0,168,35],[37,0,168,37]],[[12,0,169,12],[18,0,169,18],[22,0,169,22],[25,0,169,25],[31,0,169,31],[32,0,169,32],[36,0,169,36],[37,0,169,37],[40,0,169,40],[41,0,169,41],[42,0,169,42],[43,0,169,43],[44,0,169,44],[45,0,169,45]],[[12,0,170,12],[22,0,170,22],[25,0,170,25],[30,0,170,30],[31,0,170,31],[35,0,170,35],[36,0,170,36],[37,0,170,37]],[[12,0,172,12],[16,0,172,16],[23,0,172,23],[33,0,172,33],[38,0,172,38],[49,0,172,49],[53,0,172,53],[56,0,172,56],[57,0,172,57],[61,0,172,61],[62,0,172,62],[64,0,172,64]],[[16,0,173,16],[55,0,173,55]],[[16,0,174,16],[20,0,174,20],[23,0,174,23],[24,0,174,24],[28,0,174,28],[29,0,174,29],[30,0,174,30],[39,0,174,39],[41,0,174,41]],[[20,0,175,20],[30,0,175,30],[33,0,175,33],[36,0,175,36],[37,0,175,37],[41,0,175,41],[42,0,175,42],[43,0,175,43],[52,0,175,52],[53,0,175,53],[63,0,175,63],[64,0,175,64],[65,0,175,65]],[[17,0,176,17]],[[21,0,176,23]],[[20,0,177,20],[112,0,177,112]],[[20,0,178,20],[24,0,178,24],[33,0,178,33],[34,0,178,34]],[[20,0,179,20],[24,0,179,24],[27,0,179,27],[28,0,179,28],[32,0,179,32],[33,0,179,33],[34,0,179,34],[40,0,179,40],[42,0,179,42]],[[24,0,180,24],[33,0,180,33],[36,0,180,36],[39,0,180,39],[40,0,180,40],[44,0,180,44],[45,0,180,45],[46,0,180,46]],[[21,0,181,21]],[[25,0,181,27],[29,0,181,31],[32,0,181,34],[33,0,181,35],[37,0,181,39],[38,0,181,40],[39,0,181,41],[45,0,181,47],[47,0,181,49]],[[24,0,182,24],[33,0,182,33],[36,0,182,36],[39,0,182,39],[40,0,182,40],[44,0,182,44],[45,0,182,45],[46,0,182,46],[52,0,182,52],[53,0,182,53]],[[21,0,183,21]],[[20,0,184,20],[24,0,184,24],[33,0,184,33],[35,0,184,35]],[[24,0,185,24],[34,0,185,34],[37,0,185,37],[46,0,185,46],[47,0,185,47],[53,0,185,53],[54,0,185,54],[55,0,185,55],[59,0,185,59],[61,0,185,61],[65,0,185,65],[67,0,185,67],[69,0,185,69]],[[28,0,186,28],[32,0,186,32],[33,0,186,33],[37,0,186,37],[38,0,186,38],[41,0,186,41],[51,0,186,51],[52,0,186,52],[56,0,186,56],[57,0,186,57],[58,0,186,58]],[[28,0,187,28],[35,0,187,35],[39,0,187,39],[40,0,187,40]],[[24,0,188,24],[25,0,188,25],[27,0,188,27],[29,0,188,29],[30,0,188,30],[31,0,188,31]],[[21,0,189,21]],[[20,0,191,20],[113,0,191,113]],[[20,0,192,20],[24,0,192,24],[27,0,192,27],[28,0,192,28],[32,0,192,32],[33,0,192,33],[34,0,192,34],[41,0,192,41],[45,0,192,45],[48,0,192,48],[49,0,192,49],[53,0,192,53],[54,0,192,54],[55,0,192,55],[62,0,192,62],[64,0,192,64]],[[24,0,193,24],[28,0,193,28],[35,0,193,35],[38,0,193,38],[39,0,193,39],[43,0,193,43],[44,0,193,44],[45,0,193,45],[52,0,193,52],[57,0,193,57],[67,0,193,67],[69,0,193,69]],[[28,0,194,28],[35,0,194,35],[38,0,194,38],[41,0,194,41],[42,0,194,42],[46,0,194,46],[47,0,194,47],[48,0,194,48],[55,0,194,55],[56,0,194,56]],[[25,0,195,25]],[[21,0,196,21]],[[25,0,196,27],[29,0,196,31],[32,0,196,34],[33,0,196,35],[37,0,196,39],[38,0,196,40],[39,0,196,41],[46,0,196,48],[50,0,196,52],[53,0,196,55],[54,0,196,56],[58,0,196,60],[59,0,196,61],[60,0,196,62],[67,0,196,69],[69,0,196,71]],[[24,0,197,24],[92,0,197,92]],[[24,0,198,24],[31,0,198,31],[32,0,198,32],[37,0,198,37],[38,0,199,28],[95,0,200,32],[98,0,200,35],[99,0,200,36],[103,0,200,40],[104,0,201,28],[119,0,201,43],[120,0,202,25],[121,0,202,26]],[[21,0,203,21]],[[17,0,204,17]],[[16,0,206,16]],[],[],[[19,0,209,19]],[[16,0,210,16],[24,0,210,24],[27,0,210,27],[30,0,210,30],[31,0,210,31],[35,0,210,35],[36,0,210,36],[37,0,210,37],[45,0,210,45],[46,0,210,46]],[[16,0,211,16],[21,0,211,21],[24,0,211,24],[27,0,211,27],[28,0,211,28],[32,0,211,32],[33,0,211,33],[34,0,211,34],[39,0,211,39],[40,0,211,40]],[[13,0,212,13]],[[12,0,214,12],[15,0,214,15],[18,0,214,18],[22,0,214,22],[23,0,214,23]],[[9,0,215,9]],[[8,0,217,8],[12,0,217,12],[19,0,217,19],[29,0,217,29],[34,0,217,34],[45,0,217,45],[47,0,217,47]],[[12,0,218,12],[16,0,218,16],[23,0,218,23],[25,0,218,25]],[[16,0,219,16],[20,0,219,20]],[[20,0,220,20],[61,0,220,61]],[[20,0,221,20],[30,0,221,30],[33,0,221,33],[40,0,221,40],[41,0,222,24],[48,0,222,31],[58,0,222,41],[63,0,222,46],[71,0,222,54]],[[24,0,223,28],[25,0,223,29],[26,0,223,30],[36,0,223,40]],[[24,0,224,28],[25,0,224,29],[26,0,224,30],[30,0,224,34],[31,0,224,35],[40,0,224,44],[41,0,224,45],[51,0,224,55],[53,0,224,57],[61,0,224,65],[63,0,224,67],[68,0,224,72],[69,0,224,73],[70,0,225,21],[71,0,225,22]],[[17,0,226,17]],[[16,0,226,18],[23,0,226,25],[24,0,226,26],[26,0,226,28]],[[20,0,227,20],[27,0,227,27],[28,0,227,28],[32,0,227,32],[33,0,227,33],[59,0,227,59],[61,0,227,61],[62,0,227,62],[63,0,227,63],[64,0,227,64]],[[17,0,228,17]],[[13,0,229,13]],[[12,0,231,12],[19,0,231,19],[26,0,231,26],[27,0,231,27],[30,0,231,30],[31,0,231,31],[51,0,231,51],[52,0,231,52],[55,0,231,55],[56,0,231,56],[58,0,231,58],[68,0,231,68],[69,0,231,69]],[[17,0,232,17],[22,0,232,22],[23,0,232,23],[26,0,232,26],[28,0,232,28],[31,0,232,31],[37,0,232,37],[41,0,232,41],[46,0,232,46],[47,0,232,47],[80,0,232,80],[81,0,232,81],[82,0,232,82],[83,0,232,83],[84,0,232,84],[85,0,232,85],[86,0,232,86]],[[9,0,233,9]],[[13,0,233,15],[17,0,233,19],[24,0,233,26],[34,0,233,36],[39,0,233,41],[50,0,233,52],[54,0,233,56],[71,0,233,73],[73,0,233,75]],[[12,0,234,12],[19,0,234,19],[26,0,234,26],[27,0,234,27],[33,0,234,33],[34,0,234,34],[54,0,234,54],[55,0,234,55],[58,0,234,58],[59,0,234,59],[60,0,234,60]],[[17,0,235,17],[22,0,235,22],[23,0,235,23],[26,0,235,26],[28,0,235,28],[31,0,235,31],[37,0,235,37],[41,0,235,41],[46,0,235,46],[47,0,235,47],[92,0,235,92],[95,0,235,95],[104,0,235,104],[105,0,235,105],[106,0,235,106],[107,0,235,107],[108,0,235,108],[109,0,235,109],[110,0,235,110]],[[9,0,236,9]],[[8,0,238,8],[15,0,238,15],[22,0,238,22],[23,0,238,23],[30,0,238,30],[32,0,238,32],[33,0,238,33]],[[4,0,239,4],[5,0,239,5],[7,0,239,7],[14,0,239,14],[15,0,239,15],[20,0,239,20],[22,0,239,22],[23,0,239,23],[27,0,239,27],[28,0,239,28],[31,0,239,31],[33,0,239,33],[34,0,239,34],[43,0,239,43],[44,0,239,44],[45,0,239,45],[46,0,239,46]],[[0,0,240,0],[1,0,240,1],[2,0,240,2]],[[0,0,242,0],[6,0,242,6],[7,0,242,7],[13,0,242,13],[24,0,242,24],[27,0,242,27],[30,0,242,30],[32,0,242,32],[33,0,242,33],[34,0,242,34],[41,0,242,46],[43,0,242,48],[45,0,242,50]],[[4,0,243,4],[11,0,243,11],[12,0,243,12],[17,0,243,22],[19,0,243,24],[25,0,243,35],[27,0,243,37],[29,0,243,39]],[[8,0,244,8],[12,0,244,12],[21,0,244,21],[22,0,244,22]],[[8,0,246,8],[85,0,246,85]],[[8,0,247,8],[62,0,247,62]],[[8,0,248,8],[12,0,248,12],[13,0,248,13],[19,0,248,19],[20,0,248,20],[24,0,248,24],[29,0,248,29],[34,0,248,34],[35,0,248,35],[39,0,248,39],[40,0,248,40],[44,0,248,44],[45,0,248,45],[50,0,248,50],[52,0,248,52]],[[12,0,249,12],[21,0,249,21],[24,0,249,24],[31,0,249,31],[32,0,249,32],[37,0,249,37],[39,0,249,39],[45,0,249,45],[46,0,249,46],[47,0,249,47]],[[9,0,250,9]],[[13,0,250,15]],[[12,0,251,12],[21,0,251,21],[24,0,251,24],[29,0,251,29],[30,0,251,30]],[[9,0,252,9]],[[8,0,254,8],[12,0,254,12],[18,0,254,18],[19,0,254,19],[23,0,254,23],[28,0,254,28],[46,0,254,46],[47,0,254,47],[55,0,254,55],[59,0,254,59],[65,0,254,65],[66,0,254,66],[73,0,254,73],[75,0,254,75]],[[12,0,255,12],[18,0,255,18],[32,0,255,32],[35,0,255,35],[36,0,255,36],[52,0,255,52],[54,0,255,54],[65,0,255,65],[67,0,255,67],[68,0,255,68],[70,0,255,70],[72,0,255,72],[73,0,255,73],[84,0,255,84],[85,0,255,85]],[[12,0,256,12],[18,0,256,18],[25,0,256,25],[28,0,256,48]],[[16,0,257,16],[26,0,257,26],[28,0,257,28],[42,0,257,42]],[[13,0,258,13],[14,0,258,14]],[[12,0,259,12],[21,0,259,21],[24,0,259,24],[33,0,259,33],[34,0,259,34],[43,0,259,43],[45,0,259,45],[51,0,259,51],[52,0,259,52],[59,0,259,59],[61,0,259,61],[68,0,259,68],[69,0,259,69],[70,0,259,70]],[[9,0,260,9]],[[8,0,262,8],[15,0,262,15],[22,0,262,22],[23,0,262,23],[32,0,262,32],[34,0,262,34],[40,0,262,40],[41,0,262,41],[42,0,262,42]],[[4,0,263,4],[5,0,263,5],[6,0,263,6]],[[0,0,264,0],[1,0,264,1],[2,0,264,2]]],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\r\nimport { Actions, createEffect } from '@ngrx/effects';\r\nimport { State, Store } from '@ngrx/store';\r\n\r\nimport * as deepmerge_ from 'deepmerge';\r\nimport { Observable } from 'rxjs';\r\nimport { filter, mergeMap, pairwise, startWith, tap } from 'rxjs/operators';\r\nimport { StoreStorage, StoreSyncConfig } from './sync.module';\r\nimport { _SYNC_CONFIG } from './tokens';\r\n\r\nconst deepmerge = deepmerge_;\r\nconst detectDate = /(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/;\r\n\r\nexport const StorageSyncActions = {\r\n    DUMMY: 'ngrx-store-sync/dummy',\r\n    HYDRATED: 'ngrx-store-sync/hydrated'\r\n};\r\n\r\nconst ignoreActions = [State.INIT, StorageSyncActions.HYDRATED];\r\n\r\n@Injectable()\r\nexport class StorageSyncEffects {\r\n    constructor(\r\n        @Inject(_SYNC_CONFIG) private _config: StoreSyncConfig,\r\n        private _store: Store<any>,\r\n        private _actions$: Actions\r\n    ) {}\r\n\r\n    private _hydrated = false;\r\n\r\n     sync$: Observable<any> = createEffect(() => this._actions$.pipe(\r\n        startWith( { type: StorageSyncActions.DUMMY }),\r\n        tap(action => this._hydrated = this._hydrated || (action.type === StorageSyncActions.HYDRATED)), // Side-effecty :(\r\n        filter(action => ignoreActions.indexOf(action.type) === -1),\r\n        mergeMap(() => this._store.select(s => s)),\r\n        pairwise(),\r\n        filter(() => !this._config.rehydrate || this._hydrated),\r\n        filter(([prev, curr]) => prev !== curr),\r\n        mergeMap(([_, curr]) => syncStateUpdateAsync(\r\n            curr,\r\n            this._config.keys,\r\n            this._config.storage,\r\n            this._config.storageKeySerializer,\r\n            this._config.removeOnUndefined,\r\n            this._config.syncCondition\r\n        ))\r\n    ), { dispatch: false });\r\n}\r\n\r\n/**\r\n * Below this point is essentially a copy-paste of\r\n * https://github.com/btroncone/ngrx-store-localstorage\r\n * modified to interact with an asynchronous storage API\r\n */\r\n\r\n// correctly parse dates from storage\r\nexport const dateReviver = (key: string, value: any) => {\r\n    if (typeof value === 'string' && detectDate.test(value)) {\r\n        return new Date(value);\r\n    }\r\n    return value;\r\n};\r\n\r\nconst dummyReviver = (key: string, value: any) => value;\r\n\r\nexport const rehydrateApplicationStateAsync = (\r\n    keys: any[],\r\n    storage: StoreStorage,\r\n    storageKeySerializer: ((key: string) => string),\r\n    restoreDates: boolean\r\n): Promise<any> => {\r\n    return keys.reduce(async (previousPromise, curr) => {\r\n        const state = await previousPromise;\r\n\r\n        let key = curr;\r\n        let reviver = restoreDates ? dateReviver : dummyReviver;\r\n        let deserialize;\r\n        let decrypt;\r\n\r\n        if (typeof key === 'object') {\r\n            key = Object.keys(key)[0];\r\n            // use the custom reviver function\r\n            if (typeof curr[key] === 'function') {\r\n                reviver = curr[key];\r\n            } else {\r\n                // use custom reviver function if available\r\n                if (curr[key].reviver) {\r\n                    reviver = curr[key].reviver;\r\n                }\r\n                // use custom serialize function if available\r\n                if (curr[key].deserialize) {\r\n                    deserialize = curr[key].deserialize;\r\n                }\r\n            }\r\n\r\n            // Ensure that encrypt and decrypt functions are both presents\r\n            if (curr[key].encrypt && curr[key].decrypt) {\r\n                if (\r\n                    typeof curr[key].encrypt === 'function' &&\r\n                    typeof curr[key].decrypt === 'function'\r\n                ) {\r\n                    decrypt = curr[key].decrypt;\r\n                } else {\r\n                    console.error(\r\n                        `Either encrypt or decrypt is not a function on '${\r\n                            curr[key]\r\n                        }' key object.`\r\n                    );\r\n                }\r\n            } else if (curr[key].encrypt || curr[key].decrypt) {\r\n                // Let know that one of the encryption functions is not provided\r\n                console.error(\r\n                    `Either encrypt or decrypt function is not present on '${\r\n                        curr[key]\r\n                    }' key object.`\r\n                );\r\n            }\r\n        }\r\n\r\n        return storage.get(storageKeySerializer(key)).then(slice => {\r\n            if (slice) {\r\n                // Use provided decrypt function\r\n                if (decrypt) {\r\n                    slice = decrypt(slice);\r\n                    const isObjectRegex = new RegExp('[{\\\\[]');\r\n\r\n                    if (slice === 'null' || isObjectRegex.test(slice.charAt(0))) {\r\n                        slice = JSON.parse(slice, reviver);\r\n                    }\r\n                }\r\n\r\n                return Object.assign({}, state, {\r\n                    [key]: deserialize ? deserialize(slice) : slice\r\n                });\r\n            }\r\n            return state;\r\n        });\r\n    }, storage.ready().then(() => ({})));\r\n};\r\n\r\nexport const syncStateUpdateAsync = (\r\n    state: any,\r\n    keys: any[],\r\n    storage: StoreStorage,\r\n    storageKeySerializer: (key: string) => string = key => key,\r\n    removeOnUndefined = false,\r\n    syncCondition?: (state: any) => boolean\r\n): Promise<void> =>  {\r\n    try {\r\n        if (syncCondition && syncCondition(state) !== true) {\r\n            return Promise.resolve();\r\n        }\r\n    } catch ( e ) {\r\n        // Treat TypeError as do not sync\r\n        if (e instanceof TypeError) {\r\n            return Promise.resolve();\r\n        }\r\n        throw e;\r\n    }\r\n\r\n    return keys.reduce( async (previousPromise, key) => {\r\n        await previousPromise;\r\n\r\n        let stateSlice = state[key];\r\n        let replacer;\r\n        let space;\r\n        let encrypt;\r\n\r\n        if (typeof key === 'object') {\r\n            const name = Object.keys(key)[0];\r\n            stateSlice = state[name];\r\n\r\n            if (typeof stateSlice !== 'undefined' && key[name]) {\r\n                // use serialize function if specified.\r\n                if (key[name].serialize) {\r\n                    stateSlice = key[name].serialize(stateSlice);\r\n                } else {\r\n                    // if serialize function is not specified keyFilter on fields if an array has been provided.\r\n                    let keyFilter;\r\n                    if (key[name].reduce) {\r\n                        keyFilter = key[name];\r\n                    } else if (key[name].filter) {\r\n                        keyFilter = key[name].filter;\r\n                    }\r\n                    if (keyFilter) {\r\n                        stateSlice = keyFilter.reduce((memo, attr) => {\r\n                            memo[attr] = stateSlice[attr];\r\n                            return memo;\r\n                        }, {});\r\n                    }\r\n\r\n                    // Check if encrypt and decrypt are present, also checked at this#rehydrateApplicationState()\r\n                    if (key[name].encrypt && key[name].decrypt) {\r\n                        if (typeof key[name].encrypt === 'function') {\r\n                            encrypt = key[name].encrypt;\r\n                        }\r\n                    } else if (key[name].encrypt || key[name].decrypt) {\r\n                        // If one of those is not present, then let know that one is missing\r\n                        console.error(\r\n                            `Either encrypt or decrypt function is not present on '${\r\n                                key[name]\r\n                            }' key object.`\r\n                        );\r\n                    }\r\n                }\r\n\r\n                /*\r\n                  Replacer and space arguments to pass to JSON.stringify.\r\n                  If these fields don't exist, undefined will be passed.\r\n                 */\r\n                replacer = key[name].replacer;\r\n                space = key[name].space;\r\n            }\r\n\r\n            key = name;\r\n        }\r\n\r\n        if (typeof stateSlice !== 'undefined') {\r\n            if (encrypt) {\r\n                try {\r\n                    // ensure that a string message is passed\r\n                    stateSlice = encrypt(\r\n                        typeof stateSlice === 'string'\r\n                            ? stateSlice\r\n                            : JSON.stringify(stateSlice, replacer, space)\r\n                    );\r\n                } catch (e) {\r\n                    console.warn('Unable to encrypt state:', e);\r\n                }\r\n            }\r\n\r\n            return storage.set(storageKeySerializer(key), stateSlice)\r\n                .catch(() => { throw new Error('Unable to save state to storage'); });\r\n        } else if (typeof stateSlice === 'undefined' && removeOnUndefined) {\r\n            return storage.remove(storageKeySerializer(key))\r\n                .catch(() => { throw new Error(`Exception on removing/cleaning undefined '${key}' state`); });\r\n        }\r\n\r\n        return Promise.resolve();\r\n    }, storage.ready().then(() => undefined));\r\n};\r\n\r\nexport const storageSync = () => (reducer: any) => {\r\n    return (state: any, action: any) => {\r\n        let nextState;\r\n\r\n        // If state arrives undefined, we need to let it through the supplied reducer\r\n        // in order to get a complete state as defined by user\r\n        if ((action.type === State.INIT) && !state) {\r\n            nextState = reducer(state, action);\r\n        } else {\r\n            nextState = state;\r\n        }\r\n\r\n        if (action.type === StorageSyncActions.HYDRATED && action.payload) {\r\n            const overwriteMerge = (destinationArray, sourceArray, _) => sourceArray;\r\n            const options: deepmerge_.Options = {\r\n                arrayMerge: overwriteMerge\r\n            };\r\n            nextState = deepmerge(nextState, action.payload, options);\r\n        }\r\n\r\n        return reducer(nextState, action);\r\n    };\r\n};\r\n"]},"resolvedIds":{"@angular/core":{"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"@ngrx/effects":{"external":true,"id":"@ngrx/effects","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"@ngrx/store":{"external":true,"id":"@ngrx/store","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"deepmerge":{"external":true,"id":"deepmerge","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"rxjs/operators":{"external":true,"id":"rxjs/operators","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"./tokens":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\tokens.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":13811,"body":[{"type":"ImportDeclaration","start":0,"end":84,"specifiers":[{"type":"ImportSpecifier","start":9,"end":24,"imported":{"type":"Identifier","start":9,"end":24,"name":"APP_INITIALIZER"},"local":{"type":"Identifier","start":9,"end":24,"name":"APP_INITIALIZER"}},{"type":"ImportSpecifier","start":26,"end":40,"imported":{"type":"Identifier","start":26,"end":40,"name":"InjectionToken"},"local":{"type":"Identifier","start":26,"end":40,"name":"InjectionToken"}},{"type":"ImportSpecifier","start":42,"end":50,"imported":{"type":"Identifier","start":42,"end":50,"name":"Injector"},"local":{"type":"Identifier","start":42,"end":50,"name":"Injector"}},{"type":"ImportSpecifier","start":52,"end":60,"imported":{"type":"Identifier","start":52,"end":60,"name":"NgModule"},"local":{"type":"Identifier","start":52,"end":60,"name":"NgModule"}}],"source":{"type":"Literal","start":68,"end":83,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ImportDeclaration","start":86,"end":132,"specifiers":[{"type":"ImportSpecifier","start":95,"end":108,"imported":{"type":"Identifier","start":95,"end":108,"name":"EffectsModule"},"local":{"type":"Identifier","start":95,"end":108,"name":"EffectsModule"}}],"source":{"type":"Literal","start":116,"end":131,"value":"@ngrx/effects","raw":"'@ngrx/effects'"}},{"type":"ImportDeclaration","start":134,"end":185,"specifiers":[{"type":"ImportSpecifier","start":143,"end":156,"imported":{"type":"Identifier","start":143,"end":156,"name":"META_REDUCERS"},"local":{"type":"Identifier","start":143,"end":156,"name":"META_REDUCERS"}},{"type":"ImportSpecifier","start":158,"end":163,"imported":{"type":"Identifier","start":158,"end":163,"name":"Store"},"local":{"type":"Identifier","start":158,"end":163,"name":"Store"}}],"source":{"type":"Literal","start":171,"end":184,"value":"@ngrx/store","raw":"'@ngrx/store'"}},{"type":"ImportDeclaration","start":187,"end":296,"specifiers":[{"type":"ImportSpecifier","start":196,"end":226,"imported":{"type":"Identifier","start":196,"end":226,"name":"rehydrateApplicationStateAsync"},"local":{"type":"Identifier","start":196,"end":226,"name":"rehydrateApplicationStateAsync"}},{"type":"ImportSpecifier","start":228,"end":239,"imported":{"type":"Identifier","start":228,"end":239,"name":"storageSync"},"local":{"type":"Identifier","start":228,"end":239,"name":"storageSync"}},{"type":"ImportSpecifier","start":241,"end":259,"imported":{"type":"Identifier","start":241,"end":259,"name":"StorageSyncActions"},"local":{"type":"Identifier","start":241,"end":259,"name":"StorageSyncActions"}},{"type":"ImportSpecifier","start":261,"end":279,"imported":{"type":"Identifier","start":261,"end":279,"name":"StorageSyncEffects"},"local":{"type":"Identifier","start":261,"end":279,"name":"StorageSyncEffects"}}],"source":{"type":"Literal","start":287,"end":295,"value":"./sync","raw":"'./sync'"}},{"type":"ImportDeclaration","start":298,"end":360,"specifiers":[{"type":"ImportSpecifier","start":307,"end":327,"imported":{"type":"Identifier","start":307,"end":327,"name":"_INITIAL_SYNC_CONFIG"},"local":{"type":"Identifier","start":307,"end":327,"name":"_INITIAL_SYNC_CONFIG"}},{"type":"ImportSpecifier","start":329,"end":341,"imported":{"type":"Identifier","start":329,"end":341,"name":"_SYNC_CONFIG"},"local":{"type":"Identifier","start":329,"end":341,"name":"_SYNC_CONFIG"}}],"source":{"type":"Literal","start":349,"end":359,"value":"./tokens","raw":"'./tokens'"}},{"type":"ImportDeclaration","start":362,"end":398,"specifiers":[{"type":"ImportNamespaceSpecifier","start":369,"end":376,"local":{"type":"Identifier","start":374,"end":376,"name":"i0"}}],"source":{"type":"Literal","start":382,"end":397,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":400,"end":436,"specifiers":[{"type":"ImportNamespaceSpecifier","start":407,"end":414,"local":{"type":"Identifier","start":412,"end":414,"name":"i1"}}],"source":{"type":"Literal","start":420,"end":435,"value":"@ngrx/effects","raw":"\"@ngrx/effects\""}},{"type":"ExportNamedDeclaration","start":438,"end":1037,"declaration":{"type":"FunctionDeclaration","start":445,"end":1037,"id":{"type":"Identifier","start":454,"end":478,"name":"_storeInitializerFactory"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":479,"end":484,"name":"store"},{"type":"Identifier","start":486,"end":492,"name":"config"}],"body":{"type":"BlockStatement","start":494,"end":1037,"body":[{"type":"IfStatement","start":501,"end":577,"test":{"type":"UnaryExpression","start":505,"end":522,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":506,"end":522,"object":{"type":"Identifier","start":506,"end":512,"name":"config"},"property":{"type":"Identifier","start":513,"end":522,"name":"rehydrate"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":524,"end":577,"body":[{"type":"ReturnStatement","start":535,"end":570,"argument":{"type":"ArrowFunctionExpression","start":542,"end":569,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":548,"end":569,"callee":{"type":"MemberExpression","start":548,"end":563,"object":{"type":"Identifier","start":548,"end":555,"name":"Promise"},"property":{"type":"Identifier","start":556,"end":563,"name":"resolve"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":564,"end":568,"value":true,"raw":"true"}],"optional":false}}}]},"alternate":null},{"type":"ReturnStatement","start":583,"end":1034,"argument":{"type":"ArrowFunctionExpression","start":590,"end":1033,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":596,"end":1033,"callee":{"type":"MemberExpression","start":596,"end":877,"object":{"type":"CallExpression","start":596,"end":872,"callee":{"type":"Identifier","start":596,"end":626,"name":"rehydrateApplicationStateAsync"},"arguments":[{"type":"MemberExpression","start":627,"end":638,"object":{"type":"Identifier","start":627,"end":633,"name":"config"},"property":{"type":"Identifier","start":634,"end":638,"name":"keys"},"computed":false,"optional":false},{"type":"MemberExpression","start":640,"end":654,"object":{"type":"Identifier","start":640,"end":646,"name":"config"},"property":{"type":"Identifier","start":647,"end":654,"name":"storage"},"computed":false,"optional":false},{"type":"MemberExpression","start":656,"end":683,"object":{"type":"Identifier","start":656,"end":662,"name":"config"},"property":{"type":"Identifier","start":663,"end":683,"name":"storageKeySerializer"},"computed":false,"optional":false},{"type":"MemberExpression","start":791,"end":810,"object":{"type":"Identifier","start":791,"end":797,"name":"config"},"property":{"type":"Identifier","start":798,"end":810,"name":"restoreDates"},"computed":false,"optional":false}],"optional":false},"property":{"type":"Identifier","start":873,"end":877,"name":"then"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":878,"end":1032,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":878,"end":883,"name":"state"}],"body":{"type":"BlockStatement","start":887,"end":1032,"body":[{"type":"ExpressionStatement","start":898,"end":1003,"expression":{"type":"CallExpression","start":898,"end":1002,"callee":{"type":"MemberExpression","start":898,"end":912,"object":{"type":"Identifier","start":898,"end":903,"name":"store"},"property":{"type":"Identifier","start":904,"end":912,"name":"dispatch"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":913,"end":1001,"properties":[{"type":"Property","start":928,"end":961,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":928,"end":932,"name":"type"},"value":{"type":"MemberExpression","start":934,"end":961,"object":{"type":"Identifier","start":934,"end":952,"name":"StorageSyncActions"},"property":{"type":"Identifier","start":953,"end":961,"name":"HYDRATED"},"computed":false,"optional":false},"kind":"init"},{"type":"Property","start":976,"end":990,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":976,"end":983,"name":"payload"},"value":{"type":"Identifier","start":985,"end":990,"name":"state"},"kind":"init"}]}],"optional":false}},{"type":"ReturnStatement","start":1013,"end":1025,"argument":{"type":"Literal","start":1020,"end":1024,"value":true,"raw":"true"}}]}}],"optional":false}}}]}},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":1039,"end":1159,"declaration":{"type":"FunctionDeclaration","start":1046,"end":1159,"id":{"type":"Identifier","start":1055,"end":1081,"name":"_storageSyncReducerFactory"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1084,"end":1159,"body":[{"type":"VariableDeclaration","start":1091,"end":1118,"declarations":[{"type":"VariableDeclarator","start":1097,"end":1117,"id":{"type":"Identifier","start":1097,"end":1101,"name":"sync"},"init":{"type":"CallExpression","start":1104,"end":1117,"callee":{"type":"Identifier","start":1104,"end":1115,"name":"storageSync"},"arguments":[],"optional":false}}],"kind":"const"},{"type":"ReturnStatement","start":1124,"end":1156,"argument":{"type":"ArrowFunctionExpression","start":1131,"end":1155,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1132,"end":1138,"name":"reduce"}],"body":{"type":"CallExpression","start":1143,"end":1155,"callee":{"type":"Identifier","start":1143,"end":1147,"name":"sync"},"arguments":[{"type":"Identifier","start":1148,"end":1154,"name":"reduce"}],"optional":false}}}]}},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":1161,"end":1574,"declaration":{"type":"FunctionDeclaration","start":1168,"end":1574,"id":{"type":"Identifier","start":1177,"end":1195,"name":"_validateStateKeys"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1196,"end":1200,"name":"keys"}],"body":{"type":"BlockStatement","start":1202,"end":1574,"body":[{"type":"ReturnStatement","start":1209,"end":1571,"argument":{"type":"CallExpression","start":1216,"end":1570,"callee":{"type":"MemberExpression","start":1216,"end":1224,"object":{"type":"Identifier","start":1216,"end":1220,"name":"keys"},"property":{"type":"Identifier","start":1221,"end":1224,"name":"map"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":1225,"end":1569,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1225,"end":1228,"name":"key"}],"body":{"type":"BlockStatement","start":1232,"end":1569,"body":[{"type":"VariableDeclaration","start":1243,"end":1258,"declarations":[{"type":"VariableDeclarator","start":1247,"end":1257,"id":{"type":"Identifier","start":1247,"end":1251,"name":"attr"},"init":{"type":"Identifier","start":1254,"end":1257,"name":"key"}}],"kind":"let"},{"type":"IfStatement","start":1268,"end":1350,"test":{"type":"BinaryExpression","start":1272,"end":1295,"left":{"type":"UnaryExpression","start":1272,"end":1282,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":1279,"end":1282,"name":"key"}},"operator":"===","right":{"type":"Literal","start":1287,"end":1295,"value":"object","raw":"'object'"}},"consequent":{"type":"BlockStatement","start":1297,"end":1350,"body":[{"type":"ExpressionStatement","start":1312,"end":1339,"expression":{"type":"AssignmentExpression","start":1312,"end":1338,"operator":"=","left":{"type":"Identifier","start":1312,"end":1316,"name":"attr"},"right":{"type":"MemberExpression","start":1319,"end":1338,"object":{"type":"CallExpression","start":1319,"end":1335,"callee":{"type":"MemberExpression","start":1319,"end":1330,"object":{"type":"Identifier","start":1319,"end":1325,"name":"Object"},"property":{"type":"Identifier","start":1326,"end":1330,"name":"keys"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1331,"end":1334,"name":"key"}],"optional":false},"property":{"type":"Literal","start":1336,"end":1337,"value":0,"raw":"0"},"computed":true,"optional":false}}}]},"alternate":null},{"type":"IfStatement","start":1360,"end":1541,"test":{"type":"BinaryExpression","start":1364,"end":1388,"left":{"type":"UnaryExpression","start":1364,"end":1375,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":1371,"end":1375,"name":"attr"}},"operator":"!==","right":{"type":"Literal","start":1380,"end":1388,"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":1390,"end":1541,"body":[{"type":"ThrowStatement","start":1405,"end":1530,"argument":{"type":"NewExpression","start":1411,"end":1529,"callee":{"type":"Identifier","start":1415,"end":1424,"name":"TypeError"},"arguments":[{"type":"BinaryExpression","start":1425,"end":1528,"left":{"type":"TemplateLiteral","start":1425,"end":1463,"expressions":[],"quasis":[{"type":"TemplateElement","start":1426,"end":1462,"value":{"raw":"StorageSync Unknown Parameter Type: ","cooked":"StorageSync Unknown Parameter Type: "},"tail":true}]},"operator":"+","right":{"type":"TemplateLiteral","start":1483,"end":1528,"expressions":[{"type":"UnaryExpression","start":1515,"end":1526,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":1522,"end":1526,"name":"attr"}}],"quasis":[{"type":"TemplateElement","start":1484,"end":1513,"value":{"raw":"Expected type of string, got ","cooked":"Expected type of string, got "},"tail":false},{"type":"TemplateElement","start":1527,"end":1527,"value":{"raw":"","cooked":""},"tail":true}]}}]}}]},"alternate":null},{"type":"ReturnStatement","start":1551,"end":1562,"argument":{"type":"Identifier","start":1558,"end":1561,"name":"key"}}]}}],"optional":false}}]}},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":1576,"end":1974,"declaration":{"type":"FunctionDeclaration","start":1583,"end":1974,"id":{"type":"Identifier","start":1592,"end":1605,"name":"_createConfig"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1606,"end":1614,"name":"injector"},{"type":"Identifier","start":1616,"end":1622,"name":"config"}],"body":{"type":"BlockStatement","start":1624,"end":1974,"body":[{"type":"VariableDeclaration","start":1631,"end":1711,"declarations":[{"type":"VariableDeclarator","start":1637,"end":1710,"id":{"type":"Identifier","start":1637,"end":1643,"name":"result"},"init":{"type":"ConditionalExpression","start":1646,"end":1710,"test":{"type":"BinaryExpression","start":1646,"end":1678,"left":{"type":"Identifier","start":1646,"end":1652,"name":"config"},"operator":"instanceof","right":{"type":"Identifier","start":1664,"end":1678,"name":"InjectionToken"}},"consequent":{"type":"CallExpression","start":1681,"end":1701,"callee":{"type":"MemberExpression","start":1681,"end":1693,"object":{"type":"Identifier","start":1681,"end":1689,"name":"injector"},"property":{"type":"Identifier","start":1690,"end":1693,"name":"get"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1694,"end":1700,"name":"config"}],"optional":false},"alternate":{"type":"Identifier","start":1704,"end":1710,"name":"config"}}}],"kind":"const"},{"type":"IfStatement","start":1717,"end":1823,"test":{"type":"BinaryExpression","start":1721,"end":1762,"left":{"type":"MemberExpression","start":1721,"end":1748,"object":{"type":"Identifier","start":1721,"end":1727,"name":"result"},"property":{"type":"Identifier","start":1728,"end":1748,"name":"storageKeySerializer"},"computed":false,"optional":false},"operator":"===","right":{"type":"Identifier","start":1753,"end":1762,"name":"undefined"}},"consequent":{"type":"BlockStatement","start":1764,"end":1823,"body":[{"type":"ExpressionStatement","start":1775,"end":1816,"expression":{"type":"AssignmentExpression","start":1775,"end":1815,"operator":"=","left":{"type":"MemberExpression","start":1775,"end":1802,"object":{"type":"Identifier","start":1775,"end":1781,"name":"result"},"property":{"type":"Identifier","start":1782,"end":1802,"name":"storageKeySerializer"},"computed":false,"optional":false},"right":{"type":"ArrowFunctionExpression","start":1805,"end":1815,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1805,"end":1808,"name":"key"}],"body":{"type":"Identifier","start":1812,"end":1815,"name":"key"}}}}]},"alternate":null},{"type":"IfStatement","start":1829,"end":1913,"test":{"type":"BinaryExpression","start":1833,"end":1866,"left":{"type":"MemberExpression","start":1833,"end":1852,"object":{"type":"Identifier","start":1833,"end":1839,"name":"result"},"property":{"type":"Identifier","start":1840,"end":1852,"name":"restoreDates"},"computed":false,"optional":false},"operator":"===","right":{"type":"Identifier","start":1857,"end":1866,"name":"undefined"}},"consequent":{"type":"BlockStatement","start":1868,"end":1913,"body":[{"type":"ExpressionStatement","start":1879,"end":1906,"expression":{"type":"AssignmentExpression","start":1879,"end":1905,"operator":"=","left":{"type":"MemberExpression","start":1879,"end":1898,"object":{"type":"Identifier","start":1879,"end":1885,"name":"result"},"property":{"type":"Identifier","start":1886,"end":1898,"name":"restoreDates"},"computed":false,"optional":false},"right":{"type":"Literal","start":1901,"end":1905,"value":true,"raw":"true"}}}]},"alternate":null},{"type":"ExpressionStatement","start":1919,"end":1951,"expression":{"type":"CallExpression","start":1919,"end":1950,"callee":{"type":"Identifier","start":1919,"end":1937,"name":"_validateStateKeys"},"arguments":[{"type":"MemberExpression","start":1938,"end":1949,"object":{"type":"Identifier","start":1938,"end":1944,"name":"result"},"property":{"type":"Identifier","start":1945,"end":1949,"name":"keys"},"computed":false,"optional":false}],"optional":false}},{"type":"ReturnStatement","start":1957,"end":1971,"argument":{"type":"Identifier","start":1964,"end":1970,"name":"result"}}]}},"specifiers":[],"source":null},{"type":"ExportNamedDeclaration","start":1976,"end":2013,"declaration":{"type":"ClassDeclaration","start":1983,"end":2013,"id":{"type":"Identifier","start":1989,"end":2008,"name":"StoreSyncRootModule"},"superClass":null,"body":{"type":"ClassBody","start":2009,"end":2013,"body":[]}},"specifiers":[],"source":null},{"type":"ExpressionStatement","start":2015,"end":2197,"expression":{"type":"AssignmentExpression","start":2015,"end":2196,"operator":"=","left":{"type":"MemberExpression","start":2015,"end":2039,"object":{"type":"Identifier","start":2015,"end":2034,"name":"StoreSyncRootModule"},"property":{"type":"Identifier","start":2035,"end":2039,"name":"ɵfac"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":2042,"end":2196,"callee":{"type":"MemberExpression","start":2042,"end":2063,"object":{"type":"Identifier","start":2042,"end":2044,"name":"i0"},"property":{"type":"Identifier","start":2045,"end":2063,"name":"ɵɵngDeclareFactory"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":2064,"end":2195,"properties":[{"type":"Property","start":2066,"end":2086,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2066,"end":2076,"name":"minVersion"},"value":{"type":"Literal","start":2078,"end":2086,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":2088,"end":2105,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2088,"end":2095,"name":"version"},"value":{"type":"Literal","start":2097,"end":2105,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":2107,"end":2119,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2107,"end":2115,"name":"ngImport"},"value":{"type":"Identifier","start":2117,"end":2119,"name":"i0"},"kind":"init"},{"type":"Property","start":2121,"end":2146,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2121,"end":2125,"name":"type"},"value":{"type":"Identifier","start":2127,"end":2146,"name":"StoreSyncRootModule"},"kind":"init"},{"type":"Property","start":2148,"end":2156,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2148,"end":2152,"name":"deps"},"value":{"type":"ArrayExpression","start":2154,"end":2156,"elements":[]},"kind":"init"},{"type":"Property","start":2158,"end":2193,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2158,"end":2164,"name":"target"},"value":{"type":"MemberExpression","start":2166,"end":2193,"object":{"type":"MemberExpression","start":2166,"end":2184,"object":{"type":"Identifier","start":2166,"end":2168,"name":"i0"},"property":{"type":"Identifier","start":2169,"end":2184,"name":"ɵɵFactoryTarget"},"computed":false,"optional":false},"property":{"type":"Identifier","start":2185,"end":2193,"name":"NgModule"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":2199,"end":2371,"expression":{"type":"AssignmentExpression","start":2199,"end":2370,"operator":"=","left":{"type":"MemberExpression","start":2199,"end":2223,"object":{"type":"Identifier","start":2199,"end":2218,"name":"StoreSyncRootModule"},"property":{"type":"Identifier","start":2219,"end":2223,"name":"ɵmod"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":2226,"end":2370,"callee":{"type":"MemberExpression","start":2226,"end":2248,"object":{"type":"Identifier","start":2226,"end":2228,"name":"i0"},"property":{"type":"Identifier","start":2229,"end":2248,"name":"ɵɵngDeclareNgModule"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":2249,"end":2369,"properties":[{"type":"Property","start":2251,"end":2271,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2251,"end":2261,"name":"minVersion"},"value":{"type":"Literal","start":2263,"end":2271,"value":"14.0.0","raw":"\"14.0.0\""},"kind":"init"},{"type":"Property","start":2273,"end":2290,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2273,"end":2280,"name":"version"},"value":{"type":"Literal","start":2282,"end":2290,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":2292,"end":2304,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2292,"end":2300,"name":"ngImport"},"value":{"type":"Identifier","start":2302,"end":2304,"name":"i0"},"kind":"init"},{"type":"Property","start":2306,"end":2331,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2306,"end":2310,"name":"type"},"value":{"type":"Identifier","start":2312,"end":2331,"name":"StoreSyncRootModule"},"kind":"init"},{"type":"Property","start":2333,"end":2367,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2333,"end":2340,"name":"imports"},"value":{"type":"ArrayExpression","start":2342,"end":2367,"elements":[{"type":"MemberExpression","start":2343,"end":2366,"object":{"type":"Identifier","start":2343,"end":2345,"name":"i1"},"property":{"type":"Identifier","start":2346,"end":2366,"name":"EffectsFeatureModule"},"computed":false,"optional":false}]},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":2373,"end":2568,"expression":{"type":"AssignmentExpression","start":2373,"end":2567,"operator":"=","left":{"type":"MemberExpression","start":2373,"end":2397,"object":{"type":"Identifier","start":2373,"end":2392,"name":"StoreSyncRootModule"},"property":{"type":"Identifier","start":2393,"end":2397,"name":"ɵinj"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":2400,"end":2567,"callee":{"type":"MemberExpression","start":2400,"end":2422,"object":{"type":"Identifier","start":2400,"end":2402,"name":"i0"},"property":{"type":"Identifier","start":2403,"end":2422,"name":"ɵɵngDeclareInjector"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":2423,"end":2566,"properties":[{"type":"Property","start":2425,"end":2445,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2425,"end":2435,"name":"minVersion"},"value":{"type":"Literal","start":2437,"end":2445,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":2447,"end":2464,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2447,"end":2454,"name":"version"},"value":{"type":"Literal","start":2456,"end":2464,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":2466,"end":2478,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2466,"end":2474,"name":"ngImport"},"value":{"type":"Identifier","start":2476,"end":2478,"name":"i0"},"kind":"init"},{"type":"Property","start":2480,"end":2505,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2480,"end":2484,"name":"type"},"value":{"type":"Identifier","start":2486,"end":2505,"name":"StoreSyncRootModule"},"kind":"init"},{"type":"Property","start":2507,"end":2564,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2507,"end":2514,"name":"imports"},"value":{"type":"ArrayExpression","start":2516,"end":2564,"elements":[{"type":"CallExpression","start":2517,"end":2563,"callee":{"type":"MemberExpression","start":2517,"end":2541,"object":{"type":"Identifier","start":2517,"end":2530,"name":"EffectsModule"},"property":{"type":"Identifier","start":2531,"end":2541,"name":"forFeature"},"computed":false,"optional":false},"arguments":[{"type":"ArrayExpression","start":2542,"end":2562,"elements":[{"type":"Identifier","start":2543,"end":2561,"name":"StorageSyncEffects"}]}],"optional":false}]},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":2570,"end":2910,"expression":{"type":"CallExpression","start":2570,"end":2909,"callee":{"type":"MemberExpression","start":2570,"end":2597,"object":{"type":"Identifier","start":2570,"end":2572,"name":"i0"},"property":{"type":"Identifier","start":2573,"end":2597,"name":"ɵɵngDeclareClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":2598,"end":2908,"properties":[{"type":"Property","start":2600,"end":2620,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2600,"end":2610,"name":"minVersion"},"value":{"type":"Literal","start":2612,"end":2620,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":2622,"end":2639,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2622,"end":2629,"name":"version"},"value":{"type":"Literal","start":2631,"end":2639,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":2641,"end":2653,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2641,"end":2649,"name":"ngImport"},"value":{"type":"Identifier","start":2651,"end":2653,"name":"i0"},"kind":"init"},{"type":"Property","start":2655,"end":2680,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2655,"end":2659,"name":"type"},"value":{"type":"Identifier","start":2661,"end":2680,"name":"StoreSyncRootModule"},"kind":"init"},{"type":"Property","start":2682,"end":2906,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2682,"end":2692,"name":"decorators"},"value":{"type":"ArrayExpression","start":2694,"end":2906,"elements":[{"type":"ObjectExpression","start":2695,"end":2905,"properties":[{"type":"Property","start":2710,"end":2724,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2710,"end":2714,"name":"type"},"value":{"type":"Identifier","start":2716,"end":2724,"name":"NgModule"},"kind":"init"},{"type":"Property","start":2739,"end":2894,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2739,"end":2743,"name":"args"},"value":{"type":"ArrayExpression","start":2745,"end":2894,"elements":[{"type":"ObjectExpression","start":2746,"end":2893,"properties":[{"type":"Property","start":2769,"end":2874,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2769,"end":2776,"name":"imports"},"value":{"type":"ArrayExpression","start":2778,"end":2874,"elements":[{"type":"CallExpression","start":2805,"end":2851,"callee":{"type":"MemberExpression","start":2805,"end":2829,"object":{"type":"Identifier","start":2805,"end":2818,"name":"EffectsModule"},"property":{"type":"Identifier","start":2819,"end":2829,"name":"forFeature"},"computed":false,"optional":false},"arguments":[{"type":"ArrayExpression","start":2830,"end":2850,"elements":[{"type":"Identifier","start":2831,"end":2849,"name":"StorageSyncEffects"}]}],"optional":false}]},"kind":"init"}]}]},"kind":"init"}]}]},"kind":"init"}]}],"optional":false}},{"type":"ExportNamedDeclaration","start":2912,"end":3502,"declaration":{"type":"ClassDeclaration","start":2919,"end":3502,"id":{"type":"Identifier","start":2925,"end":2940,"name":"StoreSyncModule"},"superClass":null,"body":{"type":"ClassBody","start":2941,"end":3502,"body":[{"type":"MethodDefinition","start":2948,"end":3499,"static":true,"computed":false,"key":{"type":"Identifier","start":2955,"end":2962,"name":"forRoot"},"kind":"method","value":{"type":"FunctionExpression","start":2962,"end":3499,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2963,"end":2969,"name":"config"}],"body":{"type":"BlockStatement","start":2971,"end":3499,"body":[{"type":"ReturnStatement","start":2982,"end":3492,"argument":{"type":"ObjectExpression","start":2989,"end":3491,"properties":[{"type":"Property","start":3004,"end":3033,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3004,"end":3012,"name":"ngModule"},"value":{"type":"Identifier","start":3014,"end":3033,"name":"StoreSyncRootModule"},"kind":"init"},{"type":"Property","start":3048,"end":3480,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3048,"end":3057,"name":"providers"},"value":{"type":"ArrayExpression","start":3059,"end":3480,"elements":[{"type":"ObjectExpression","start":3078,"end":3129,"properties":[{"type":"Property","start":3080,"end":3109,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3080,"end":3087,"name":"provide"},"value":{"type":"Identifier","start":3089,"end":3109,"name":"_INITIAL_SYNC_CONFIG"},"kind":"init"},{"type":"Property","start":3111,"end":3127,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3111,"end":3119,"name":"useValue"},"value":{"type":"Identifier","start":3121,"end":3127,"name":"config"},"kind":"init"}]},{"type":"ObjectExpression","start":3148,"end":3240,"properties":[{"type":"Property","start":3150,"end":3171,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3150,"end":3157,"name":"provide"},"value":{"type":"Identifier","start":3159,"end":3171,"name":"_SYNC_CONFIG"},"kind":"init"},{"type":"Property","start":3173,"end":3211,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3173,"end":3177,"name":"deps"},"value":{"type":"ArrayExpression","start":3179,"end":3211,"elements":[{"type":"Identifier","start":3180,"end":3188,"name":"Injector"},{"type":"Identifier","start":3190,"end":3210,"name":"_INITIAL_SYNC_CONFIG"}]},"kind":"init"},{"type":"Property","start":3213,"end":3238,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3213,"end":3223,"name":"useFactory"},"value":{"type":"Identifier","start":3225,"end":3238,"name":"_createConfig"},"kind":"init"}]},{"type":"ObjectExpression","start":3259,"end":3338,"properties":[{"type":"Property","start":3261,"end":3283,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3261,"end":3268,"name":"provide"},"value":{"type":"Identifier","start":3270,"end":3283,"name":"META_REDUCERS"},"kind":"init"},{"type":"Property","start":3285,"end":3323,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3285,"end":3295,"name":"useFactory"},"value":{"type":"Identifier","start":3297,"end":3323,"name":"_storageSyncReducerFactory"},"kind":"init"},{"type":"Property","start":3325,"end":3336,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3325,"end":3330,"name":"multi"},"value":{"type":"Literal","start":3332,"end":3336,"value":true,"raw":"true"},"kind":"init"}]},{"type":"ObjectExpression","start":3357,"end":3465,"properties":[{"type":"Property","start":3359,"end":3383,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3359,"end":3366,"name":"provide"},"value":{"type":"Identifier","start":3368,"end":3383,"name":"APP_INITIALIZER"},"kind":"init"},{"type":"Property","start":3385,"end":3412,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3385,"end":3389,"name":"deps"},"value":{"type":"ArrayExpression","start":3391,"end":3412,"elements":[{"type":"Identifier","start":3392,"end":3397,"name":"Store"},{"type":"Identifier","start":3399,"end":3411,"name":"_SYNC_CONFIG"}]},"kind":"init"},{"type":"Property","start":3414,"end":3450,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3414,"end":3424,"name":"useFactory"},"value":{"type":"Identifier","start":3426,"end":3450,"name":"_storeInitializerFactory"},"kind":"init"},{"type":"Property","start":3452,"end":3463,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3452,"end":3457,"name":"multi"},"value":{"type":"Literal","start":3459,"end":3463,"value":true,"raw":"true"},"kind":"init"}]}]},"kind":"init"}]}}]}}}]}},"specifiers":[],"source":null},{"type":"ExpressionStatement","start":3504,"end":3678,"expression":{"type":"AssignmentExpression","start":3504,"end":3677,"operator":"=","left":{"type":"MemberExpression","start":3504,"end":3524,"object":{"type":"Identifier","start":3504,"end":3519,"name":"StoreSyncModule"},"property":{"type":"Identifier","start":3520,"end":3524,"name":"ɵfac"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":3527,"end":3677,"callee":{"type":"MemberExpression","start":3527,"end":3548,"object":{"type":"Identifier","start":3527,"end":3529,"name":"i0"},"property":{"type":"Identifier","start":3530,"end":3548,"name":"ɵɵngDeclareFactory"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":3549,"end":3676,"properties":[{"type":"Property","start":3551,"end":3571,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3551,"end":3561,"name":"minVersion"},"value":{"type":"Literal","start":3563,"end":3571,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":3573,"end":3590,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3573,"end":3580,"name":"version"},"value":{"type":"Literal","start":3582,"end":3590,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":3592,"end":3604,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3592,"end":3600,"name":"ngImport"},"value":{"type":"Identifier","start":3602,"end":3604,"name":"i0"},"kind":"init"},{"type":"Property","start":3606,"end":3627,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3606,"end":3610,"name":"type"},"value":{"type":"Identifier","start":3612,"end":3627,"name":"StoreSyncModule"},"kind":"init"},{"type":"Property","start":3629,"end":3637,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3629,"end":3633,"name":"deps"},"value":{"type":"ArrayExpression","start":3635,"end":3637,"elements":[]},"kind":"init"},{"type":"Property","start":3639,"end":3674,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3639,"end":3645,"name":"target"},"value":{"type":"MemberExpression","start":3647,"end":3674,"object":{"type":"MemberExpression","start":3647,"end":3665,"object":{"type":"Identifier","start":3647,"end":3649,"name":"i0"},"property":{"type":"Identifier","start":3650,"end":3665,"name":"ɵɵFactoryTarget"},"computed":false,"optional":false},"property":{"type":"Identifier","start":3666,"end":3674,"name":"NgModule"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":3680,"end":3808,"expression":{"type":"AssignmentExpression","start":3680,"end":3807,"operator":"=","left":{"type":"MemberExpression","start":3680,"end":3700,"object":{"type":"Identifier","start":3680,"end":3695,"name":"StoreSyncModule"},"property":{"type":"Identifier","start":3696,"end":3700,"name":"ɵmod"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":3703,"end":3807,"callee":{"type":"MemberExpression","start":3703,"end":3725,"object":{"type":"Identifier","start":3703,"end":3705,"name":"i0"},"property":{"type":"Identifier","start":3706,"end":3725,"name":"ɵɵngDeclareNgModule"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":3726,"end":3806,"properties":[{"type":"Property","start":3728,"end":3748,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3728,"end":3738,"name":"minVersion"},"value":{"type":"Literal","start":3740,"end":3748,"value":"14.0.0","raw":"\"14.0.0\""},"kind":"init"},{"type":"Property","start":3750,"end":3767,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3750,"end":3757,"name":"version"},"value":{"type":"Literal","start":3759,"end":3767,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":3769,"end":3781,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3769,"end":3777,"name":"ngImport"},"value":{"type":"Identifier","start":3779,"end":3781,"name":"i0"},"kind":"init"},{"type":"Property","start":3783,"end":3804,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3783,"end":3787,"name":"type"},"value":{"type":"Identifier","start":3789,"end":3804,"name":"StoreSyncModule"},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":3810,"end":3938,"expression":{"type":"AssignmentExpression","start":3810,"end":3937,"operator":"=","left":{"type":"MemberExpression","start":3810,"end":3830,"object":{"type":"Identifier","start":3810,"end":3825,"name":"StoreSyncModule"},"property":{"type":"Identifier","start":3826,"end":3830,"name":"ɵinj"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":3833,"end":3937,"callee":{"type":"MemberExpression","start":3833,"end":3855,"object":{"type":"Identifier","start":3833,"end":3835,"name":"i0"},"property":{"type":"Identifier","start":3836,"end":3855,"name":"ɵɵngDeclareInjector"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":3856,"end":3936,"properties":[{"type":"Property","start":3858,"end":3878,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3858,"end":3868,"name":"minVersion"},"value":{"type":"Literal","start":3870,"end":3878,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":3880,"end":3897,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3880,"end":3887,"name":"version"},"value":{"type":"Literal","start":3889,"end":3897,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":3899,"end":3911,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3899,"end":3907,"name":"ngImport"},"value":{"type":"Identifier","start":3909,"end":3911,"name":"i0"},"kind":"init"},{"type":"Property","start":3913,"end":3934,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3913,"end":3917,"name":"type"},"value":{"type":"Identifier","start":3919,"end":3934,"name":"StoreSyncModule"},"kind":"init"}]}],"optional":false}}},{"type":"ExpressionStatement","start":3940,"end":4131,"expression":{"type":"CallExpression","start":3940,"end":4130,"callee":{"type":"MemberExpression","start":3940,"end":3967,"object":{"type":"Identifier","start":3940,"end":3942,"name":"i0"},"property":{"type":"Identifier","start":3943,"end":3967,"name":"ɵɵngDeclareClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":3968,"end":4129,"properties":[{"type":"Property","start":3970,"end":3990,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3970,"end":3980,"name":"minVersion"},"value":{"type":"Literal","start":3982,"end":3990,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":3992,"end":4009,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3992,"end":3999,"name":"version"},"value":{"type":"Literal","start":4001,"end":4009,"value":"14.2.8","raw":"\"14.2.8\""},"kind":"init"},{"type":"Property","start":4011,"end":4023,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4011,"end":4019,"name":"ngImport"},"value":{"type":"Identifier","start":4021,"end":4023,"name":"i0"},"kind":"init"},{"type":"Property","start":4025,"end":4046,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4025,"end":4029,"name":"type"},"value":{"type":"Identifier","start":4031,"end":4046,"name":"StoreSyncModule"},"kind":"init"},{"type":"Property","start":4048,"end":4127,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4048,"end":4058,"name":"decorators"},"value":{"type":"ArrayExpression","start":4060,"end":4127,"elements":[{"type":"ObjectExpression","start":4061,"end":4126,"properties":[{"type":"Property","start":4076,"end":4090,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4076,"end":4080,"name":"type"},"value":{"type":"Identifier","start":4082,"end":4090,"name":"NgModule"},"kind":"init"},{"type":"Property","start":4105,"end":4115,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4105,"end":4109,"name":"args"},"value":{"type":"ArrayExpression","start":4111,"end":4115,"elements":[{"type":"ObjectExpression","start":4112,"end":4114,"properties":[]}]},"kind":"init"}]}]},"kind":"init"}]}],"optional":false}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9zeW5jLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQXVCLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlDLE9BQU8sRUFBaUIsYUFBYSxFQUFlLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMvRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzdHLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsTUFBTSxVQUFVLENBQUM7OztBQTBDOUQsTUFBTSxVQUFVLHdCQUF3QixDQUFDLEtBQWlCLEVBQUUsTUFBdUI7SUFDL0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7UUFDbkIsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3RDO0lBRUQsT0FBTyxHQUFHLEVBQUUsQ0FBQyw4QkFBOEIsQ0FDdkMsTUFBTSxDQUFDLElBQUksRUFDWCxNQUFNLENBQUMsT0FBTyxFQUNkLE1BQU0sQ0FBQyxvQkFBK0MsRUFBRSxvR0FBb0c7SUFDNUosTUFBTSxDQUFDLFlBQXVCLENBQUMsc0RBQXNEO0tBQ3hGLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ1gsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNYLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxRQUFRO1lBQ2pDLE9BQU8sRUFBRSxLQUFLO1NBQ2pCLENBQUMsQ0FBQztRQUNILE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSwwQkFBMEI7SUFDdEMsTUFBTSxJQUFJLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFDM0IsT0FBTyxDQUFDLE1BQTBCLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLElBQVc7SUFDMUMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUVmLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3pCLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlCO1FBRUQsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDMUIsTUFBTSxJQUFJLFNBQVMsQ0FDZixzQ0FBc0M7Z0JBQ3RDLGdDQUFnQyxPQUFPLElBQUksRUFBRSxDQUNoRCxDQUFDO1NBQ0w7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSxhQUFhLENBQ3pCLFFBQWtCLEVBQ2xCLE1BQXlEO0lBRXpELE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNoRixJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsS0FBSyxTQUFTLEVBQUU7UUFDM0MsTUFBTSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQzVDO0lBRUQsSUFBSSxNQUFNLENBQUMsWUFBWSxLQUFLLFNBQVMsRUFBRTtRQUNuQyxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztLQUM5QjtJQUVELGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBT0QsTUFBTSxPQUFPLG1CQUFtQjs7Z0hBQW5CLG1CQUFtQjtpSEFBbkIsbUJBQW1CO2lIQUFuQixtQkFBbUIsWUFIeEIsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7MkZBR3pDLG1CQUFtQjtrQkFML0IsUUFBUTttQkFBQztvQkFDTixPQUFPLEVBQUU7d0JBQ0wsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7cUJBQ2pEO2lCQUNKOztBQUlELE1BQU0sT0FBTyxlQUFlO0lBQ2pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBeUQ7UUFDM0UsT0FBTztZQUNILFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsU0FBUyxFQUFFO2dCQUNQLEVBQUUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7Z0JBQ25ELEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CLENBQUMsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFO2dCQUM1RixFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7Z0JBQy9FLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxDQUFDLEVBQUUsVUFBVSxFQUFFLHdCQUF3QixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7YUFDL0c7U0FDSixDQUFDO0lBQ04sQ0FBQzs7NEdBWFEsZUFBZTs2R0FBZixlQUFlOzZHQUFmLGVBQWU7MkZBQWYsZUFBZTtrQkFEM0IsUUFBUTttQkFBQyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBQX0lOSVRJQUxJWkVSLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0b3IsIE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEVmZmVjdHNNb2R1bGUgfSBmcm9tICdAbmdyeC9lZmZlY3RzJztcclxuaW1wb3J0IHsgQWN0aW9uUmVkdWNlciwgTUVUQV9SRURVQ0VSUywgTWV0YVJlZHVjZXIsIFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMsIHN0b3JhZ2VTeW5jLCBTdG9yYWdlU3luY0FjdGlvbnMsIFN0b3JhZ2VTeW5jRWZmZWN0cyB9IGZyb20gJy4vc3luYyc7XHJcbmltcG9ydCB7IF9JTklUSUFMX1NZTkNfQ09ORklHLCBfU1lOQ19DT05GSUcgfSBmcm9tICcuL3Rva2Vucyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlU3RvcmFnZSB7XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBrZXkuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gaWRlbnRpZnkgdGhpcyB2YWx1ZVxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGtleVxyXG4gICAgICovXHJcbiAgICBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5LlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGlkZW50aWZ5IHRoaXMgdmFsdWVcclxuICAgICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoaXMga2V5XHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGtleSBhbmQgdmFsdWUgYXJlIHNldFxyXG4gICAgICovXHJcbiAgICBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYW55IHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byBpZGVudGlmeSB0aGlzIHZhbHVlXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHZhbHVlIGlzIHJlbW92ZWRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZSBzdG9yYWdlIGlzIHJlYWR5IHRvIGJlIHVzZWRcclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RvcmFnZSBpcyByZWFkeSB0byBiZSB1c2VkXHJcbiAgICAgKi9cclxuICAgIHJlYWR5KCk6IFByb21pc2U8YW55PjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdG9yZVN5bmNDb25maWcge1xyXG4gICAga2V5czogYW55W107XHJcbiAgICByZWh5ZHJhdGU/OiBib29sZWFuO1xyXG4gICAgc3RvcmFnZTogU3RvcmVTdG9yYWdlO1xyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQ/OiBib29sZWFuO1xyXG4gICAgcmVzdG9yZURhdGVzPzogYm9vbGVhbjtcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyPzogKGtleTogc3RyaW5nKSA9PiBzdHJpbmc7XHJcbiAgICBzeW5jQ29uZGl0aW9uPzogKHN0YXRlOiBhbnkpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfc3RvcmVJbml0aWFsaXplckZhY3Rvcnkoc3RvcmU6IFN0b3JlPGFueT4sIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnKTogKCkgPT4gUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIWNvbmZpZy5yZWh5ZHJhdGUpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMoXHJcbiAgICAgICAgY29uZmlnLmtleXMsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2UsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2VLZXlTZXJpYWxpemVyIGFzIChrZXk6IHN0cmluZykgPT4gc3RyaW5nLCAvLyBDb25maWcgYWx3YXlzIHVwZGF0ZWQgdG8gZW5zdXJlIHByb3BlcnR5IGlzIGRlZmluZWQgKGkuZS4gdXNlIGlkZW50aXR5IG1hcHBpbmcgaWYgbm9uZSBzcGVjaWZpZWQpXHJcbiAgICAgICAgY29uZmlnLnJlc3RvcmVEYXRlcyBhcyBib29sZWFuIC8vIENvbmZpZyBhbHdheXMgdXBkYXRlZCB0byBlbnN1cmUgcHJvcGVydHkgaXMgZGVmaW5lZFxyXG4gICAgKS50aGVuKHN0YXRlID0+IHtcclxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCxcclxuICAgICAgICAgICAgcGF5bG9hZDogc3RhdGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX3N0b3JhZ2VTeW5jUmVkdWNlckZhY3RvcnkoKTogTWV0YVJlZHVjZXI8YW55PiB7XHJcbiAgICBjb25zdCBzeW5jID0gc3RvcmFnZVN5bmMoKTtcclxuICAgIHJldHVybiAocmVkdWNlOiBBY3Rpb25SZWR1Y2VyPGFueT4pID0+IHN5bmMocmVkdWNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF92YWxpZGF0ZVN0YXRlS2V5cyhrZXlzOiBhbnlbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiBrZXlzLm1hcChrZXkgPT4ge1xyXG4gICAgICAgIGxldCBhdHRyID0ga2V5O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgYXR0ciA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgU3RvcmFnZVN5bmMgVW5rbm93biBQYXJhbWV0ZXIgVHlwZTogYCArXHJcbiAgICAgICAgICAgICAgICBgRXhwZWN0ZWQgdHlwZSBvZiBzdHJpbmcsIGdvdCAke3R5cGVvZiBhdHRyfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUNvbmZpZyhcclxuICAgIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnIHwgSW5qZWN0aW9uVG9rZW48U3RvcmVTeW5jQ29uZmlnPlxyXG4pOiBTdG9yZVN5bmNDb25maWcge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29uZmlnIGluc3RhbmNlb2YgSW5qZWN0aW9uVG9rZW4gPyBpbmplY3Rvci5nZXQoY29uZmlnKSA6IGNvbmZpZztcclxuICAgIGlmIChyZXN1bHQuc3RvcmFnZUtleVNlcmlhbGl6ZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5zdG9yYWdlS2V5U2VyaWFsaXplciA9IGtleSA9PiBrZXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdC5yZXN0b3JlRGF0ZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5yZXN0b3JlRGF0ZXMgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIF92YWxpZGF0ZVN0YXRlS2V5cyhyZXN1bHQua2V5cyk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gICAgaW1wb3J0czogW1xyXG4gICAgICAgIEVmZmVjdHNNb2R1bGUuZm9yRmVhdHVyZShbU3RvcmFnZVN5bmNFZmZlY3RzXSlcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY1Jvb3RNb2R1bGUge31cclxuXHJcbkBOZ01vZHVsZSh7fSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY01vZHVsZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvclJvb3QoY29uZmlnOiBTdG9yZVN5bmNDb25maWcgfCBJbmplY3Rpb25Ub2tlbjxTdG9yZVN5bmNDb25maWc+KTogTW9kdWxlV2l0aFByb3ZpZGVyczxTdG9yZVN5bmNSb290TW9kdWxlPiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IFN0b3JlU3luY1Jvb3RNb2R1bGUsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfSU5JVElBTF9TWU5DX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfU1lOQ19DT05GSUcsIGRlcHM6IFtJbmplY3RvciwgX0lOSVRJQUxfU1lOQ19DT05GSUddLCB1c2VGYWN0b3J5OiBfY3JlYXRlQ29uZmlnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE1FVEFfUkVEVUNFUlMsIHVzZUZhY3Rvcnk6IF9zdG9yYWdlU3luY1JlZHVjZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsIGRlcHM6IFtTdG9yZSwgX1NZTkNfQ09ORklHXSwgdXNlRmFjdG9yeTogX3N0b3JlSW5pdGlhbGl6ZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","start":4133,"end":13811}]},"code":"import { APP_INITIALIZER, InjectionToken, Injector, NgModule } from '@angular/core';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { META_REDUCERS, Store } from '@ngrx/store';\r\nimport { rehydrateApplicationStateAsync, storageSync, StorageSyncActions, StorageSyncEffects } from './sync';\r\nimport { _INITIAL_SYNC_CONFIG, _SYNC_CONFIG } from './tokens';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@ngrx/effects\";\r\nexport function _storeInitializerFactory(store, config) {\r\n    if (!config.rehydrate) {\r\n        return () => Promise.resolve(true);\r\n    }\r\n    return () => rehydrateApplicationStateAsync(config.keys, config.storage, config.storageKeySerializer, // Config always updated to ensure property is defined (i.e. use identity mapping if none specified)\r\n    config.restoreDates // Config always updated to ensure property is defined\r\n    ).then(state => {\r\n        store.dispatch({\r\n            type: StorageSyncActions.HYDRATED,\r\n            payload: state\r\n        });\r\n        return true;\r\n    });\r\n}\r\nexport function _storageSyncReducerFactory() {\r\n    const sync = storageSync();\r\n    return (reduce) => sync(reduce);\r\n}\r\nexport function _validateStateKeys(keys) {\r\n    return keys.map(key => {\r\n        let attr = key;\r\n        if (typeof key === 'object') {\r\n            attr = Object.keys(key)[0];\r\n        }\r\n        if (typeof attr !== 'string') {\r\n            throw new TypeError(`StorageSync Unknown Parameter Type: ` +\r\n                `Expected type of string, got ${typeof attr}`);\r\n        }\r\n        return key;\r\n    });\r\n}\r\nexport function _createConfig(injector, config) {\r\n    const result = config instanceof InjectionToken ? injector.get(config) : config;\r\n    if (result.storageKeySerializer === undefined) {\r\n        result.storageKeySerializer = key => key;\r\n    }\r\n    if (result.restoreDates === undefined) {\r\n        result.restoreDates = true;\r\n    }\r\n    _validateStateKeys(result.keys);\r\n    return result;\r\n}\r\nexport class StoreSyncRootModule {\r\n}\r\nStoreSyncRootModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nStoreSyncRootModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, imports: [i1.EffectsFeatureModule] });\r\nStoreSyncRootModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, imports: [EffectsModule.forFeature([StorageSyncEffects])] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [\r\n                        EffectsModule.forFeature([StorageSyncEffects])\r\n                    ]\r\n                }]\r\n        }] });\r\nexport class StoreSyncModule {\r\n    static forRoot(config) {\r\n        return {\r\n            ngModule: StoreSyncRootModule,\r\n            providers: [\r\n                { provide: _INITIAL_SYNC_CONFIG, useValue: config },\r\n                { provide: _SYNC_CONFIG, deps: [Injector, _INITIAL_SYNC_CONFIG], useFactory: _createConfig },\r\n                { provide: META_REDUCERS, useFactory: _storageSyncReducerFactory, multi: true },\r\n                { provide: APP_INITIALIZER, deps: [Store, _SYNC_CONFIG], useFactory: _storeInitializerFactory, multi: true }\r\n            ]\r\n        };\r\n    }\r\n}\r\nStoreSyncModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nStoreSyncModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule });\r\nStoreSyncModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{}]\r\n        }] });\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9zeW5jLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQXVCLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlDLE9BQU8sRUFBaUIsYUFBYSxFQUFlLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMvRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzdHLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsTUFBTSxVQUFVLENBQUM7OztBQTBDOUQsTUFBTSxVQUFVLHdCQUF3QixDQUFDLEtBQWlCLEVBQUUsTUFBdUI7SUFDL0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7UUFDbkIsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3RDO0lBRUQsT0FBTyxHQUFHLEVBQUUsQ0FBQyw4QkFBOEIsQ0FDdkMsTUFBTSxDQUFDLElBQUksRUFDWCxNQUFNLENBQUMsT0FBTyxFQUNkLE1BQU0sQ0FBQyxvQkFBK0MsRUFBRSxvR0FBb0c7SUFDNUosTUFBTSxDQUFDLFlBQXVCLENBQUMsc0RBQXNEO0tBQ3hGLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ1gsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNYLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxRQUFRO1lBQ2pDLE9BQU8sRUFBRSxLQUFLO1NBQ2pCLENBQUMsQ0FBQztRQUNILE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSwwQkFBMEI7SUFDdEMsTUFBTSxJQUFJLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFDM0IsT0FBTyxDQUFDLE1BQTBCLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLElBQVc7SUFDMUMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUVmLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3pCLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlCO1FBRUQsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDMUIsTUFBTSxJQUFJLFNBQVMsQ0FDZixzQ0FBc0M7Z0JBQ3RDLGdDQUFnQyxPQUFPLElBQUksRUFBRSxDQUNoRCxDQUFDO1NBQ0w7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSxhQUFhLENBQ3pCLFFBQWtCLEVBQ2xCLE1BQXlEO0lBRXpELE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNoRixJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsS0FBSyxTQUFTLEVBQUU7UUFDM0MsTUFBTSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQzVDO0lBRUQsSUFBSSxNQUFNLENBQUMsWUFBWSxLQUFLLFNBQVMsRUFBRTtRQUNuQyxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztLQUM5QjtJQUVELGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBT0QsTUFBTSxPQUFPLG1CQUFtQjs7Z0hBQW5CLG1CQUFtQjtpSEFBbkIsbUJBQW1CO2lIQUFuQixtQkFBbUIsWUFIeEIsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7MkZBR3pDLG1CQUFtQjtrQkFML0IsUUFBUTttQkFBQztvQkFDTixPQUFPLEVBQUU7d0JBQ0wsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7cUJBQ2pEO2lCQUNKOztBQUlELE1BQU0sT0FBTyxlQUFlO0lBQ2pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBeUQ7UUFDM0UsT0FBTztZQUNILFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsU0FBUyxFQUFFO2dCQUNQLEVBQUUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7Z0JBQ25ELEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CLENBQUMsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFO2dCQUM1RixFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7Z0JBQy9FLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxDQUFDLEVBQUUsVUFBVSxFQUFFLHdCQUF3QixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7YUFDL0c7U0FDSixDQUFDO0lBQ04sQ0FBQzs7NEdBWFEsZUFBZTs2R0FBZixlQUFlOzZHQUFmLGVBQWU7MkZBQWYsZUFBZTtrQkFEM0IsUUFBUTttQkFBQyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBQX0lOSVRJQUxJWkVSLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0b3IsIE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEVmZmVjdHNNb2R1bGUgfSBmcm9tICdAbmdyeC9lZmZlY3RzJztcclxuaW1wb3J0IHsgQWN0aW9uUmVkdWNlciwgTUVUQV9SRURVQ0VSUywgTWV0YVJlZHVjZXIsIFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMsIHN0b3JhZ2VTeW5jLCBTdG9yYWdlU3luY0FjdGlvbnMsIFN0b3JhZ2VTeW5jRWZmZWN0cyB9IGZyb20gJy4vc3luYyc7XHJcbmltcG9ydCB7IF9JTklUSUFMX1NZTkNfQ09ORklHLCBfU1lOQ19DT05GSUcgfSBmcm9tICcuL3Rva2Vucyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlU3RvcmFnZSB7XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBrZXkuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gaWRlbnRpZnkgdGhpcyB2YWx1ZVxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGtleVxyXG4gICAgICovXHJcbiAgICBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5LlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGlkZW50aWZ5IHRoaXMgdmFsdWVcclxuICAgICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoaXMga2V5XHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGtleSBhbmQgdmFsdWUgYXJlIHNldFxyXG4gICAgICovXHJcbiAgICBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYW55IHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byBpZGVudGlmeSB0aGlzIHZhbHVlXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHZhbHVlIGlzIHJlbW92ZWRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZSBzdG9yYWdlIGlzIHJlYWR5IHRvIGJlIHVzZWRcclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RvcmFnZSBpcyByZWFkeSB0byBiZSB1c2VkXHJcbiAgICAgKi9cclxuICAgIHJlYWR5KCk6IFByb21pc2U8YW55PjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdG9yZVN5bmNDb25maWcge1xyXG4gICAga2V5czogYW55W107XHJcbiAgICByZWh5ZHJhdGU/OiBib29sZWFuO1xyXG4gICAgc3RvcmFnZTogU3RvcmVTdG9yYWdlO1xyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQ/OiBib29sZWFuO1xyXG4gICAgcmVzdG9yZURhdGVzPzogYm9vbGVhbjtcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyPzogKGtleTogc3RyaW5nKSA9PiBzdHJpbmc7XHJcbiAgICBzeW5jQ29uZGl0aW9uPzogKHN0YXRlOiBhbnkpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfc3RvcmVJbml0aWFsaXplckZhY3Rvcnkoc3RvcmU6IFN0b3JlPGFueT4sIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnKTogKCkgPT4gUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIWNvbmZpZy5yZWh5ZHJhdGUpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMoXHJcbiAgICAgICAgY29uZmlnLmtleXMsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2UsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2VLZXlTZXJpYWxpemVyIGFzIChrZXk6IHN0cmluZykgPT4gc3RyaW5nLCAvLyBDb25maWcgYWx3YXlzIHVwZGF0ZWQgdG8gZW5zdXJlIHByb3BlcnR5IGlzIGRlZmluZWQgKGkuZS4gdXNlIGlkZW50aXR5IG1hcHBpbmcgaWYgbm9uZSBzcGVjaWZpZWQpXHJcbiAgICAgICAgY29uZmlnLnJlc3RvcmVEYXRlcyBhcyBib29sZWFuIC8vIENvbmZpZyBhbHdheXMgdXBkYXRlZCB0byBlbnN1cmUgcHJvcGVydHkgaXMgZGVmaW5lZFxyXG4gICAgKS50aGVuKHN0YXRlID0+IHtcclxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCxcclxuICAgICAgICAgICAgcGF5bG9hZDogc3RhdGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX3N0b3JhZ2VTeW5jUmVkdWNlckZhY3RvcnkoKTogTWV0YVJlZHVjZXI8YW55PiB7XHJcbiAgICBjb25zdCBzeW5jID0gc3RvcmFnZVN5bmMoKTtcclxuICAgIHJldHVybiAocmVkdWNlOiBBY3Rpb25SZWR1Y2VyPGFueT4pID0+IHN5bmMocmVkdWNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF92YWxpZGF0ZVN0YXRlS2V5cyhrZXlzOiBhbnlbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiBrZXlzLm1hcChrZXkgPT4ge1xyXG4gICAgICAgIGxldCBhdHRyID0ga2V5O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgYXR0ciA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgU3RvcmFnZVN5bmMgVW5rbm93biBQYXJhbWV0ZXIgVHlwZTogYCArXHJcbiAgICAgICAgICAgICAgICBgRXhwZWN0ZWQgdHlwZSBvZiBzdHJpbmcsIGdvdCAke3R5cGVvZiBhdHRyfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUNvbmZpZyhcclxuICAgIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnIHwgSW5qZWN0aW9uVG9rZW48U3RvcmVTeW5jQ29uZmlnPlxyXG4pOiBTdG9yZVN5bmNDb25maWcge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29uZmlnIGluc3RhbmNlb2YgSW5qZWN0aW9uVG9rZW4gPyBpbmplY3Rvci5nZXQoY29uZmlnKSA6IGNvbmZpZztcclxuICAgIGlmIChyZXN1bHQuc3RvcmFnZUtleVNlcmlhbGl6ZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5zdG9yYWdlS2V5U2VyaWFsaXplciA9IGtleSA9PiBrZXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdC5yZXN0b3JlRGF0ZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5yZXN0b3JlRGF0ZXMgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIF92YWxpZGF0ZVN0YXRlS2V5cyhyZXN1bHQua2V5cyk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gICAgaW1wb3J0czogW1xyXG4gICAgICAgIEVmZmVjdHNNb2R1bGUuZm9yRmVhdHVyZShbU3RvcmFnZVN5bmNFZmZlY3RzXSlcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY1Jvb3RNb2R1bGUge31cclxuXHJcbkBOZ01vZHVsZSh7fSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY01vZHVsZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvclJvb3QoY29uZmlnOiBTdG9yZVN5bmNDb25maWcgfCBJbmplY3Rpb25Ub2tlbjxTdG9yZVN5bmNDb25maWc+KTogTW9kdWxlV2l0aFByb3ZpZGVyczxTdG9yZVN5bmNSb290TW9kdWxlPiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IFN0b3JlU3luY1Jvb3RNb2R1bGUsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfSU5JVElBTF9TWU5DX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfU1lOQ19DT05GSUcsIGRlcHM6IFtJbmplY3RvciwgX0lOSVRJQUxfU1lOQ19DT05GSUddLCB1c2VGYWN0b3J5OiBfY3JlYXRlQ29uZmlnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE1FVEFfUkVEVUNFUlMsIHVzZUZhY3Rvcnk6IF9zdG9yYWdlU3luY1JlZHVjZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsIGRlcHM6IFtTdG9yZSwgX1NZTkNfQ09ORklHXSwgdXNlRmFjdG9yeTogX3N0b3JlSW5pdGlhbGl6ZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core","@ngrx/effects","@ngrx/store","C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.mjs","C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\tokens.mjs"],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.module.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { APP_INITIALIZER, InjectionToken, Injector, NgModule } from '@angular/core';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { META_REDUCERS, Store } from '@ngrx/store';\r\nimport { rehydrateApplicationStateAsync, storageSync, StorageSyncActions, StorageSyncEffects } from './sync';\r\nimport { _INITIAL_SYNC_CONFIG, _SYNC_CONFIG } from './tokens';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@ngrx/effects\";\r\nexport function _storeInitializerFactory(store, config) {\r\n    if (!config.rehydrate) {\r\n        return () => Promise.resolve(true);\r\n    }\r\n    return () => rehydrateApplicationStateAsync(config.keys, config.storage, config.storageKeySerializer, // Config always updated to ensure property is defined (i.e. use identity mapping if none specified)\r\n    config.restoreDates // Config always updated to ensure property is defined\r\n    ).then(state => {\r\n        store.dispatch({\r\n            type: StorageSyncActions.HYDRATED,\r\n            payload: state\r\n        });\r\n        return true;\r\n    });\r\n}\r\nexport function _storageSyncReducerFactory() {\r\n    const sync = storageSync();\r\n    return (reduce) => sync(reduce);\r\n}\r\nexport function _validateStateKeys(keys) {\r\n    return keys.map(key => {\r\n        let attr = key;\r\n        if (typeof key === 'object') {\r\n            attr = Object.keys(key)[0];\r\n        }\r\n        if (typeof attr !== 'string') {\r\n            throw new TypeError(`StorageSync Unknown Parameter Type: ` +\r\n                `Expected type of string, got ${typeof attr}`);\r\n        }\r\n        return key;\r\n    });\r\n}\r\nexport function _createConfig(injector, config) {\r\n    const result = config instanceof InjectionToken ? injector.get(config) : config;\r\n    if (result.storageKeySerializer === undefined) {\r\n        result.storageKeySerializer = key => key;\r\n    }\r\n    if (result.restoreDates === undefined) {\r\n        result.restoreDates = true;\r\n    }\r\n    _validateStateKeys(result.keys);\r\n    return result;\r\n}\r\nexport class StoreSyncRootModule {\r\n}\r\nStoreSyncRootModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nStoreSyncRootModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, imports: [i1.EffectsFeatureModule] });\r\nStoreSyncRootModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, imports: [EffectsModule.forFeature([StorageSyncEffects])] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncRootModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [\r\n                        EffectsModule.forFeature([StorageSyncEffects])\r\n                    ]\r\n                }]\r\n        }] });\r\nexport class StoreSyncModule {\r\n    static forRoot(config) {\r\n        return {\r\n            ngModule: StoreSyncRootModule,\r\n            providers: [\r\n                { provide: _INITIAL_SYNC_CONFIG, useValue: config },\r\n                { provide: _SYNC_CONFIG, deps: [Injector, _INITIAL_SYNC_CONFIG], useFactory: _createConfig },\r\n                { provide: META_REDUCERS, useFactory: _storageSyncReducerFactory, multi: true },\r\n                { provide: APP_INITIALIZER, deps: [Store, _SYNC_CONFIG], useFactory: _storeInitializerFactory, multi: true }\r\n            ]\r\n        };\r\n    }\r\n}\r\nStoreSyncModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nStoreSyncModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule });\r\nStoreSyncModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.8\", ngImport: i0, type: StoreSyncModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{}]\r\n        }] });\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9zeW5jLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQXVCLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlDLE9BQU8sRUFBaUIsYUFBYSxFQUFlLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMvRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzdHLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsTUFBTSxVQUFVLENBQUM7OztBQTBDOUQsTUFBTSxVQUFVLHdCQUF3QixDQUFDLEtBQWlCLEVBQUUsTUFBdUI7SUFDL0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7UUFDbkIsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3RDO0lBRUQsT0FBTyxHQUFHLEVBQUUsQ0FBQyw4QkFBOEIsQ0FDdkMsTUFBTSxDQUFDLElBQUksRUFDWCxNQUFNLENBQUMsT0FBTyxFQUNkLE1BQU0sQ0FBQyxvQkFBK0MsRUFBRSxvR0FBb0c7SUFDNUosTUFBTSxDQUFDLFlBQXVCLENBQUMsc0RBQXNEO0tBQ3hGLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ1gsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNYLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxRQUFRO1lBQ2pDLE9BQU8sRUFBRSxLQUFLO1NBQ2pCLENBQUMsQ0FBQztRQUNILE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSwwQkFBMEI7SUFDdEMsTUFBTSxJQUFJLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFDM0IsT0FBTyxDQUFDLE1BQTBCLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLElBQVc7SUFDMUMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUVmLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3pCLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlCO1FBRUQsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDMUIsTUFBTSxJQUFJLFNBQVMsQ0FDZixzQ0FBc0M7Z0JBQ3RDLGdDQUFnQyxPQUFPLElBQUksRUFBRSxDQUNoRCxDQUFDO1NBQ0w7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELE1BQU0sVUFBVSxhQUFhLENBQ3pCLFFBQWtCLEVBQ2xCLE1BQXlEO0lBRXpELE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNoRixJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsS0FBSyxTQUFTLEVBQUU7UUFDM0MsTUFBTSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQzVDO0lBRUQsSUFBSSxNQUFNLENBQUMsWUFBWSxLQUFLLFNBQVMsRUFBRTtRQUNuQyxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztLQUM5QjtJQUVELGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBT0QsTUFBTSxPQUFPLG1CQUFtQjs7Z0hBQW5CLG1CQUFtQjtpSEFBbkIsbUJBQW1CO2lIQUFuQixtQkFBbUIsWUFIeEIsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7MkZBR3pDLG1CQUFtQjtrQkFML0IsUUFBUTttQkFBQztvQkFDTixPQUFPLEVBQUU7d0JBQ0wsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7cUJBQ2pEO2lCQUNKOztBQUlELE1BQU0sT0FBTyxlQUFlO0lBQ2pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBeUQ7UUFDM0UsT0FBTztZQUNILFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsU0FBUyxFQUFFO2dCQUNQLEVBQUUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7Z0JBQ25ELEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CLENBQUMsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFO2dCQUM1RixFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7Z0JBQy9FLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxDQUFDLEVBQUUsVUFBVSxFQUFFLHdCQUF3QixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7YUFDL0c7U0FDSixDQUFDO0lBQ04sQ0FBQzs7NEdBWFEsZUFBZTs2R0FBZixlQUFlOzZHQUFmLGVBQWU7MkZBQWYsZUFBZTtrQkFEM0IsUUFBUTttQkFBQyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBQX0lOSVRJQUxJWkVSLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0b3IsIE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEVmZmVjdHNNb2R1bGUgfSBmcm9tICdAbmdyeC9lZmZlY3RzJztcclxuaW1wb3J0IHsgQWN0aW9uUmVkdWNlciwgTUVUQV9SRURVQ0VSUywgTWV0YVJlZHVjZXIsIFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMsIHN0b3JhZ2VTeW5jLCBTdG9yYWdlU3luY0FjdGlvbnMsIFN0b3JhZ2VTeW5jRWZmZWN0cyB9IGZyb20gJy4vc3luYyc7XHJcbmltcG9ydCB7IF9JTklUSUFMX1NZTkNfQ09ORklHLCBfU1lOQ19DT05GSUcgfSBmcm9tICcuL3Rva2Vucyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlU3RvcmFnZSB7XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBrZXkuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gaWRlbnRpZnkgdGhpcyB2YWx1ZVxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGtleVxyXG4gICAgICovXHJcbiAgICBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5LlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGlkZW50aWZ5IHRoaXMgdmFsdWVcclxuICAgICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoaXMga2V5XHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGtleSBhbmQgdmFsdWUgYXJlIHNldFxyXG4gICAgICovXHJcbiAgICBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYW55IHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byBpZGVudGlmeSB0aGlzIHZhbHVlXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHZhbHVlIGlzIHJlbW92ZWRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZSBzdG9yYWdlIGlzIHJlYWR5IHRvIGJlIHVzZWRcclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RvcmFnZSBpcyByZWFkeSB0byBiZSB1c2VkXHJcbiAgICAgKi9cclxuICAgIHJlYWR5KCk6IFByb21pc2U8YW55PjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdG9yZVN5bmNDb25maWcge1xyXG4gICAga2V5czogYW55W107XHJcbiAgICByZWh5ZHJhdGU/OiBib29sZWFuO1xyXG4gICAgc3RvcmFnZTogU3RvcmVTdG9yYWdlO1xyXG4gICAgcmVtb3ZlT25VbmRlZmluZWQ/OiBib29sZWFuO1xyXG4gICAgcmVzdG9yZURhdGVzPzogYm9vbGVhbjtcclxuICAgIHN0b3JhZ2VLZXlTZXJpYWxpemVyPzogKGtleTogc3RyaW5nKSA9PiBzdHJpbmc7XHJcbiAgICBzeW5jQ29uZGl0aW9uPzogKHN0YXRlOiBhbnkpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfc3RvcmVJbml0aWFsaXplckZhY3Rvcnkoc3RvcmU6IFN0b3JlPGFueT4sIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnKTogKCkgPT4gUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIWNvbmZpZy5yZWh5ZHJhdGUpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiByZWh5ZHJhdGVBcHBsaWNhdGlvblN0YXRlQXN5bmMoXHJcbiAgICAgICAgY29uZmlnLmtleXMsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2UsXHJcbiAgICAgICAgY29uZmlnLnN0b3JhZ2VLZXlTZXJpYWxpemVyIGFzIChrZXk6IHN0cmluZykgPT4gc3RyaW5nLCAvLyBDb25maWcgYWx3YXlzIHVwZGF0ZWQgdG8gZW5zdXJlIHByb3BlcnR5IGlzIGRlZmluZWQgKGkuZS4gdXNlIGlkZW50aXR5IG1hcHBpbmcgaWYgbm9uZSBzcGVjaWZpZWQpXHJcbiAgICAgICAgY29uZmlnLnJlc3RvcmVEYXRlcyBhcyBib29sZWFuIC8vIENvbmZpZyBhbHdheXMgdXBkYXRlZCB0byBlbnN1cmUgcHJvcGVydHkgaXMgZGVmaW5lZFxyXG4gICAgKS50aGVuKHN0YXRlID0+IHtcclxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0b3JhZ2VTeW5jQWN0aW9ucy5IWURSQVRFRCxcclxuICAgICAgICAgICAgcGF5bG9hZDogc3RhdGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX3N0b3JhZ2VTeW5jUmVkdWNlckZhY3RvcnkoKTogTWV0YVJlZHVjZXI8YW55PiB7XHJcbiAgICBjb25zdCBzeW5jID0gc3RvcmFnZVN5bmMoKTtcclxuICAgIHJldHVybiAocmVkdWNlOiBBY3Rpb25SZWR1Y2VyPGFueT4pID0+IHN5bmMocmVkdWNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF92YWxpZGF0ZVN0YXRlS2V5cyhrZXlzOiBhbnlbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiBrZXlzLm1hcChrZXkgPT4ge1xyXG4gICAgICAgIGxldCBhdHRyID0ga2V5O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgYXR0ciA9IE9iamVjdC5rZXlzKGtleSlbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgU3RvcmFnZVN5bmMgVW5rbm93biBQYXJhbWV0ZXIgVHlwZTogYCArXHJcbiAgICAgICAgICAgICAgICBgRXhwZWN0ZWQgdHlwZSBvZiBzdHJpbmcsIGdvdCAke3R5cGVvZiBhdHRyfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUNvbmZpZyhcclxuICAgIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIGNvbmZpZzogU3RvcmVTeW5jQ29uZmlnIHwgSW5qZWN0aW9uVG9rZW48U3RvcmVTeW5jQ29uZmlnPlxyXG4pOiBTdG9yZVN5bmNDb25maWcge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29uZmlnIGluc3RhbmNlb2YgSW5qZWN0aW9uVG9rZW4gPyBpbmplY3Rvci5nZXQoY29uZmlnKSA6IGNvbmZpZztcclxuICAgIGlmIChyZXN1bHQuc3RvcmFnZUtleVNlcmlhbGl6ZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5zdG9yYWdlS2V5U2VyaWFsaXplciA9IGtleSA9PiBrZXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdC5yZXN0b3JlRGF0ZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJlc3VsdC5yZXN0b3JlRGF0ZXMgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIF92YWxpZGF0ZVN0YXRlS2V5cyhyZXN1bHQua2V5cyk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gICAgaW1wb3J0czogW1xyXG4gICAgICAgIEVmZmVjdHNNb2R1bGUuZm9yRmVhdHVyZShbU3RvcmFnZVN5bmNFZmZlY3RzXSlcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY1Jvb3RNb2R1bGUge31cclxuXHJcbkBOZ01vZHVsZSh7fSlcclxuZXhwb3J0IGNsYXNzIFN0b3JlU3luY01vZHVsZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvclJvb3QoY29uZmlnOiBTdG9yZVN5bmNDb25maWcgfCBJbmplY3Rpb25Ub2tlbjxTdG9yZVN5bmNDb25maWc+KTogTW9kdWxlV2l0aFByb3ZpZGVyczxTdG9yZVN5bmNSb290TW9kdWxlPiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IFN0b3JlU3luY1Jvb3RNb2R1bGUsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfSU5JVElBTF9TWU5DX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBfU1lOQ19DT05GSUcsIGRlcHM6IFtJbmplY3RvciwgX0lOSVRJQUxfU1lOQ19DT05GSUddLCB1c2VGYWN0b3J5OiBfY3JlYXRlQ29uZmlnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE1FVEFfUkVEVUNFUlMsIHVzZUZhY3Rvcnk6IF9zdG9yYWdlU3luY1JlZHVjZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsIGRlcHM6IFtTdG9yZSwgX1NZTkNfQ09ORklHXSwgdXNlRmFjdG9yeTogX3N0b3JlSW5pdGlhbGl6ZXJGYWN0b3J5LCBtdWx0aTogdHJ1ZSB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"sync.module.js","sourceRoot":"","sources":["../../../../projects/ngrx-store-sync/src/lib/sync.module.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[24,0,0,24],[26,0,0,26],[40,0,0,40],[42,0,0,42],[50,0,0,50],[52,0,0,73],[60,0,0,81],[62,0,0,83],[68,0,0,89],[83,0,0,104],[84,0,0,105]],[[0,0,1,0],[7,0,1,7],[9,0,1,9],[22,0,1,22],[24,0,1,24],[30,0,1,30],[45,0,1,45],[46,0,1,46]],[[0,0,2,0],[7,0,2,7],[9,0,2,24],[22,0,2,37],[24,0,2,52],[29,0,2,57],[31,0,2,59],[37,0,2,65],[50,0,2,78],[51,0,2,79]],[[0,0,3,0],[7,0,3,7],[9,0,3,9],[39,0,3,39],[41,0,3,41],[52,0,3,52],[54,0,3,54],[72,0,3,72],[74,0,3,74],[92,0,3,92],[94,0,3,94],[100,0,3,100],[108,0,3,108],[109,0,3,109]],[[0,0,4,0],[7,0,4,7],[9,0,4,9],[29,0,4,29],[31,0,4,31],[43,0,4,43],[45,0,4,45],[51,0,4,51],[61,0,4,61],[62,0,4,62]],[],[],[[0,0,46,0],[6,0,46,6],[16,0,46,16],[40,0,46,40],[41,0,46,41],[46,0,46,58],[48,0,46,60],[54,0,46,83]],[[4,0,47,4],[8,0,47,8],[9,0,47,9],[15,0,47,15],[16,0,47,16],[25,0,47,25],[27,0,47,27]],[[8,0,48,8],[15,0,48,15],[18,0,48,18],[20,0,48,20],[21,0,48,21],[28,0,48,28],[29,0,48,29],[36,0,48,36],[37,0,48,37],[41,0,48,41],[42,0,48,42],[43,0,48,43]],[[5,0,49,5]],[[4,0,51,4],[11,0,51,11],[14,0,51,14],[16,0,51,16],[17,0,51,17],[47,0,51,47],[48,0,52,8],[54,0,52,14],[55,0,52,15],[59,0,52,19],[61,0,53,8],[67,0,53,14],[68,0,53,15],[75,0,53,22],[77,0,54,8],[83,0,54,14],[84,0,54,15],[104,0,54,62],[106,0,54,64],[206,0,54,164]],[[4,0,55,8],[10,0,55,14],[11,0,55,15],[23,0,55,38],[24,0,55,39],[78,0,55,93]],[[5,0,56,5],[6,0,56,6],[10,0,56,10],[11,0,56,11],[16,0,56,16],[17,0,56,17],[19,0,56,19]],[[8,0,57,8],[13,0,57,13],[14,0,57,14],[22,0,57,22],[23,0,57,23]],[[12,0,58,12],[16,0,58,16],[18,0,58,18],[36,0,58,36],[37,0,58,37],[45,0,58,45]],[[12,0,59,12],[19,0,59,19],[21,0,59,21],[26,0,59,26]],[[9,0,60,9],[10,0,60,10],[11,0,60,11]],[[8,0,61,8],[15,0,61,15],[19,0,61,19],[20,0,61,20]],[[4,0,62,4],[5,0,62,5],[6,0,62,6],[7,0,62,7]],[[0,0,63,0],[1,0,63,1]],[[0,0,65,0],[6,0,65,6],[16,0,65,16],[42,0,65,42]],[[4,0,66,4],[10,0,66,10],[14,0,66,14],[17,0,66,17],[28,0,66,28],[30,0,66,30],[31,0,66,31]],[[4,0,67,4],[11,0,67,11],[12,0,67,12],[18,0,67,38],[20,0,67,40],[22,0,67,42],[23,0,67,43],[27,0,67,47],[28,0,67,48],[34,0,67,54],[35,0,67,55],[36,0,67,56]],[[0,0,68,0],[1,0,68,1]],[[0,0,70,0],[6,0,70,6],[16,0,70,16],[34,0,70,34],[35,0,70,35],[39,0,70,46]],[[4,0,71,4],[11,0,71,11],[15,0,71,15],[16,0,71,16],[19,0,71,19],[20,0,71,20],[23,0,71,23],[24,0,71,24],[26,0,71,26]],[[8,0,72,8],[12,0,72,12],[16,0,72,16],[19,0,72,19],[22,0,72,22],[23,0,72,23]],[[8,0,74,8],[12,0,74,12],[19,0,74,19],[22,0,74,22],[27,0,74,27],[35,0,74,35],[37,0,74,37]],[[12,0,75,12],[16,0,75,16],[19,0,75,19],[25,0,75,25],[26,0,75,26],[30,0,75,30],[31,0,75,31],[34,0,75,34],[35,0,75,35],[36,0,75,36],[37,0,75,37],[38,0,75,38],[39,0,75,39]],[[9,0,76,9]],[[8,0,78,8],[12,0,78,12],[19,0,78,19],[23,0,78,23],[28,0,78,28],[36,0,78,36],[38,0,78,38]],[[12,0,79,12],[18,0,79,18],[22,0,79,22],[31,0,79,31],[32,0,80,16],[70,0,80,54]],[[16,0,81,16],[48,0,81,48],[55,0,81,55],[59,0,81,59],[61,0,81,61],[62,0,82,13],[63,0,82,14]],[[9,0,83,9]],[[8,0,84,8],[15,0,84,15],[18,0,84,18],[19,0,84,19]],[[4,0,85,4],[5,0,85,5],[6,0,85,6],[7,0,85,7]],[[0,0,86,0],[1,0,86,1]],[[0,0,88,0],[6,0,88,6],[16,0,88,16],[29,0,88,29],[30,0,89,4],[38,0,89,22],[40,0,90,4],[46,0,90,61]],[[4,0,92,4],[10,0,92,10],[16,0,92,16],[19,0,92,19],[25,0,92,25],[37,0,92,37],[51,0,92,51],[52,0,92,52],[53,0,92,53],[54,0,92,54],[62,0,92,62],[63,0,92,63],[66,0,92,66],[67,0,92,67],[73,0,92,73],[74,0,92,74],[75,0,92,75],[76,0,92,76],[77,0,92,77],[83,0,92,83],[84,0,92,84]],[[4,0,93,4],[8,0,93,8],[14,0,93,14],[15,0,93,15],[35,0,93,35],[40,0,93,40],[49,0,93,49],[51,0,93,51]],[[8,0,94,8],[14,0,94,14],[15,0,94,15],[35,0,94,35],[38,0,94,38],[41,0,94,41],[42,0,94,42],[44,0,94,44],[45,0,94,45],[48,0,94,48],[49,0,94,49]],[[5,0,95,5]],[[4,0,97,4],[8,0,97,8],[14,0,97,14],[15,0,97,15],[27,0,97,27],[32,0,97,32],[41,0,97,41],[43,0,97,43]],[[8,0,98,8],[14,0,98,14],[15,0,98,15],[27,0,98,27],[30,0,98,30],[34,0,98,34],[35,0,98,35]],[[5,0,99,5]],[[4,0,101,4],[22,0,101,22],[23,0,101,23],[29,0,101,29],[30,0,101,30],[34,0,101,34],[35,0,101,35],[36,0,101,36]],[[4,0,102,4],[11,0,102,11],[17,0,102,17],[18,0,102,18]],[[0,0,103,0],[1,0,103,1]],[[0,0,110,0],[6,0,110,6],[13,0,110,13],[32,0,110,32]],[],[[112,0,110,13],[131,0,110,32]],[[113,0,110,13],[132,0,110,32]],[[113,0,110,13],[132,0,110,32],[144,0,107,8],[157,0,107,21],[158,0,107,22],[168,0,107,32],[169,0,107,33],[170,0,107,34],[188,0,107,52],[189,0,107,53],[190,0,107,54]],[[91,0,110,13],[110,0,110,32]],[[18,0,105,1],[26,0,105,9]],[[19,0,105,10]],[[20,0,106,4],[27,0,106,11],[29,0,106,13]],[[24,0,107,8],[37,0,107,21],[38,0,107,22],[48,0,107,32],[49,0,107,33],[50,0,107,34],[68,0,107,52],[69,0,107,53],[70,0,107,54]],[[21,0,108,5]],[[17,0,109,1]],[],[[0,0,113,0],[6,0,113,6],[13,0,113,13],[28,0,113,28]],[[4,0,114,11],[10,0,114,17],[11,0,114,18],[18,0,114,25],[19,0,114,26],[25,0,114,83]],[[8,0,115,8],[15,0,115,15]],[[12,0,116,12],[20,0,116,20],[22,0,116,22],[41,0,116,41]],[[12,0,117,12],[21,0,117,21],[23,0,117,23]],[[16,0,118,16],[18,0,118,18],[25,0,118,25],[27,0,118,27],[47,0,118,47],[49,0,118,49],[57,0,118,57],[59,0,118,59],[65,0,118,65],[67,0,118,67]],[[16,0,119,16],[18,0,119,18],[25,0,119,25],[27,0,119,27],[39,0,119,39],[41,0,119,41],[45,0,119,45],[47,0,119,47],[48,0,119,48],[56,0,119,56],[58,0,119,58],[78,0,119,78],[79,0,119,79],[81,0,119,81],[91,0,119,91],[93,0,119,93],[106,0,119,106],[108,0,119,108]],[[16,0,120,16],[18,0,120,18],[25,0,120,25],[27,0,120,27],[40,0,120,40],[42,0,120,42],[52,0,120,52],[54,0,120,54],[80,0,120,80],[82,0,120,82],[87,0,120,87],[89,0,120,89],[93,0,120,93],[95,0,120,95]],[[16,0,121,16],[18,0,121,18],[25,0,121,25],[27,0,121,27],[42,0,121,42],[44,0,121,44],[48,0,121,48],[50,0,121,50],[51,0,121,51],[56,0,121,56],[58,0,121,58],[70,0,121,70],[71,0,121,71],[73,0,121,73],[83,0,121,83],[85,0,121,85],[109,0,121,109],[111,0,121,111],[116,0,121,116],[118,0,121,118],[122,0,121,122],[124,0,121,124]],[[13,0,122,13]],[[9,0,123,9],[10,0,123,10]],[[4,0,124,4],[5,0,124,5]],[],[[108,0,113,13],[123,0,113,28]],[[109,0,113,13],[124,0,113,28]],[[109,0,113,13],[124,0,113,28]],[[91,0,113,13],[106,0,113,28]],[[18,0,112,1],[26,0,112,9]],[[19,0,112,10],[21,0,112,12]]],"sourcesContent":["import { APP_INITIALIZER, InjectionToken, Injector, ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { ActionReducer, META_REDUCERS, MetaReducer, Store } from '@ngrx/store';\r\nimport { rehydrateApplicationStateAsync, storageSync, StorageSyncActions, StorageSyncEffects } from './sync';\r\nimport { _INITIAL_SYNC_CONFIG, _SYNC_CONFIG } from './tokens';\r\n\r\nexport interface StoreStorage {\r\n    /**\r\n     * Get the value associated with the given key.\r\n     * @param key the key to identify this value\r\n     * @returns Returns a promise with the value of the given key\r\n     */\r\n    get(key: string): Promise<any>;\r\n\r\n    /**\r\n     * Set the value for the given key.\r\n     * @param key the key to identify this value\r\n     * @param value the value for this key\r\n     * @returns Returns a promise that resolves when the key and value are set\r\n     */\r\n    set(key: string, value: any): Promise<any>;\r\n\r\n    /**\r\n     * Remove any value associated with this key.\r\n     * @param key the key to identify this value\r\n     * @returns Returns a promise that resolves when the value is removed\r\n     */\r\n    remove(key: string): Promise<void>;\r\n\r\n    /**\r\n     * Check if the storage is ready to be used\r\n     * @returns Returns a promise that resolves when the storage is ready to be used\r\n     */\r\n    ready(): Promise<any>;\r\n}\r\n\r\nexport interface StoreSyncConfig {\r\n    keys: any[];\r\n    rehydrate?: boolean;\r\n    storage: StoreStorage;\r\n    removeOnUndefined?: boolean;\r\n    restoreDates?: boolean;\r\n    storageKeySerializer?: (key: string) => string;\r\n    syncCondition?: (state: any) => boolean;\r\n}\r\n\r\nexport function _storeInitializerFactory(store: Store<any>, config: StoreSyncConfig): () => Promise<boolean> {\r\n    if (!config.rehydrate) {\r\n        return () => Promise.resolve(true);\r\n    }\r\n\r\n    return () => rehydrateApplicationStateAsync(\r\n        config.keys,\r\n        config.storage,\r\n        config.storageKeySerializer as (key: string) => string, // Config always updated to ensure property is defined (i.e. use identity mapping if none specified)\r\n        config.restoreDates as boolean // Config always updated to ensure property is defined\r\n    ).then(state => {\r\n        store.dispatch({\r\n            type: StorageSyncActions.HYDRATED,\r\n            payload: state\r\n        });\r\n        return true;\r\n    });\r\n}\r\n\r\nexport function _storageSyncReducerFactory(): MetaReducer<any> {\r\n    const sync = storageSync();\r\n    return (reduce: ActionReducer<any>) => sync(reduce);\r\n}\r\n\r\nexport function _validateStateKeys(keys: any[]): any[] {\r\n    return keys.map(key => {\r\n        let attr = key;\r\n\r\n        if (typeof key === 'object') {\r\n            attr = Object.keys(key)[0];\r\n        }\r\n\r\n        if (typeof attr !== 'string') {\r\n            throw new TypeError(\r\n                `StorageSync Unknown Parameter Type: ` +\r\n                `Expected type of string, got ${typeof attr}`\r\n            );\r\n        }\r\n        return key;\r\n    });\r\n}\r\n\r\nexport function _createConfig(\r\n    injector: Injector,\r\n    config: StoreSyncConfig | InjectionToken<StoreSyncConfig>\r\n): StoreSyncConfig {\r\n    const result = config instanceof InjectionToken ? injector.get(config) : config;\r\n    if (result.storageKeySerializer === undefined) {\r\n        result.storageKeySerializer = key => key;\r\n    }\r\n\r\n    if (result.restoreDates === undefined) {\r\n        result.restoreDates = true;\r\n    }\r\n\r\n    _validateStateKeys(result.keys);\r\n    return result;\r\n}\r\n\r\n@NgModule({\r\n    imports: [\r\n        EffectsModule.forFeature([StorageSyncEffects])\r\n    ]\r\n})\r\nexport class StoreSyncRootModule {}\r\n\r\n@NgModule({})\r\nexport class StoreSyncModule {\r\n    public static forRoot(config: StoreSyncConfig | InjectionToken<StoreSyncConfig>): ModuleWithProviders<StoreSyncRootModule> {\r\n        return {\r\n            ngModule: StoreSyncRootModule,\r\n            providers: [\r\n                { provide: _INITIAL_SYNC_CONFIG, useValue: config },\r\n                { provide: _SYNC_CONFIG, deps: [Injector, _INITIAL_SYNC_CONFIG], useFactory: _createConfig },\r\n                { provide: META_REDUCERS, useFactory: _storageSyncReducerFactory, multi: true },\r\n                { provide: APP_INITIALIZER, deps: [Store, _SYNC_CONFIG], useFactory: _storeInitializerFactory, multi: true }\r\n            ]\r\n        };\r\n    }\r\n}\r\n"]},"resolvedIds":{"@angular/core":{"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"@ngrx/effects":{"external":true,"id":"@ngrx/effects","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"@ngrx/store":{"external":true,"id":"@ngrx/store","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"./tokens":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\tokens.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"./sync":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":2862,"body":[{"type":"ExportNamedDeclaration","start":101,"end":650,"declaration":{"type":"ClassDeclaration","start":108,"end":650,"id":{"type":"Identifier","start":114,"end":136,"name":"WebStorageStoreStorage"},"superClass":null,"body":{"type":"ClassBody","start":137,"end":650,"body":[{"type":"MethodDefinition","start":144,"end":209,"static":false,"computed":false,"key":{"type":"Identifier","start":144,"end":155,"name":"constructor"},"kind":"constructor","value":{"type":"FunctionExpression","start":155,"end":209,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":156,"end":164,"name":"_storage"}],"body":{"type":"BlockStatement","start":166,"end":209,"body":[{"type":"ExpressionStatement","start":177,"end":202,"expression":{"type":"AssignmentExpression","start":177,"end":201,"operator":"=","left":{"type":"MemberExpression","start":177,"end":190,"object":{"type":"ThisExpression","start":177,"end":181},"property":{"type":"Identifier","start":182,"end":190,"name":"_storage"},"computed":false,"optional":false},"right":{"type":"Identifier","start":193,"end":201,"name":"_storage"}}}]}}},{"type":"MethodDefinition","start":215,"end":293,"static":false,"computed":false,"key":{"type":"Identifier","start":215,"end":218,"name":"get"},"kind":"method","value":{"type":"FunctionExpression","start":218,"end":293,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":219,"end":222,"name":"key"}],"body":{"type":"BlockStatement","start":224,"end":293,"body":[{"type":"ReturnStatement","start":235,"end":286,"argument":{"type":"CallExpression","start":242,"end":285,"callee":{"type":"MemberExpression","start":242,"end":257,"object":{"type":"Identifier","start":242,"end":249,"name":"Promise"},"property":{"type":"Identifier","start":250,"end":257,"name":"resolve"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":258,"end":284,"callee":{"type":"MemberExpression","start":258,"end":279,"object":{"type":"MemberExpression","start":258,"end":271,"object":{"type":"ThisExpression","start":258,"end":262},"property":{"type":"Identifier","start":263,"end":271,"name":"_storage"},"computed":false,"optional":false},"property":{"type":"Identifier","start":272,"end":279,"name":"getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":280,"end":283,"name":"key"}],"optional":false}],"optional":false}}]}}},{"type":"MethodDefinition","start":299,"end":383,"static":false,"computed":false,"key":{"type":"Identifier","start":299,"end":305,"name":"remove"},"kind":"method","value":{"type":"FunctionExpression","start":305,"end":383,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":306,"end":309,"name":"key"}],"body":{"type":"BlockStatement","start":311,"end":383,"body":[{"type":"ReturnStatement","start":322,"end":376,"argument":{"type":"CallExpression","start":329,"end":375,"callee":{"type":"MemberExpression","start":329,"end":344,"object":{"type":"Identifier","start":329,"end":336,"name":"Promise"},"property":{"type":"Identifier","start":337,"end":344,"name":"resolve"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":345,"end":374,"callee":{"type":"MemberExpression","start":345,"end":369,"object":{"type":"MemberExpression","start":345,"end":358,"object":{"type":"ThisExpression","start":345,"end":349},"property":{"type":"Identifier","start":350,"end":358,"name":"_storage"},"computed":false,"optional":false},"property":{"type":"Identifier","start":359,"end":369,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":370,"end":373,"name":"key"}],"optional":false}],"optional":false}}]}}},{"type":"MethodDefinition","start":389,"end":590,"static":false,"computed":false,"key":{"type":"Identifier","start":389,"end":392,"name":"set"},"kind":"method","value":{"type":"FunctionExpression","start":392,"end":590,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":393,"end":396,"name":"key"},{"type":"Identifier","start":398,"end":403,"name":"value"}],"body":{"type":"BlockStatement","start":405,"end":590,"body":[{"type":"VariableDeclaration","start":416,"end":444,"declarations":[{"type":"VariableDeclarator","start":422,"end":443,"id":{"type":"Identifier","start":422,"end":435,"name":"originalValue"},"init":{"type":"Identifier","start":438,"end":443,"name":"value"}}],"kind":"const"},{"type":"ReturnStatement","start":454,"end":583,"argument":{"type":"NewExpression","start":461,"end":582,"callee":{"type":"Identifier","start":465,"end":472,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":473,"end":581,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":473,"end":480,"name":"resolve"}],"body":{"type":"BlockStatement","start":484,"end":581,"body":[{"type":"ExpressionStatement","start":499,"end":533,"expression":{"type":"CallExpression","start":499,"end":532,"callee":{"type":"MemberExpression","start":499,"end":520,"object":{"type":"MemberExpression","start":499,"end":512,"object":{"type":"ThisExpression","start":499,"end":503},"property":{"type":"Identifier","start":504,"end":512,"name":"_storage"},"computed":false,"optional":false},"property":{"type":"Identifier","start":513,"end":520,"name":"setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":521,"end":524,"name":"key"},{"type":"Identifier","start":526,"end":531,"name":"value"}],"optional":false}},{"type":"ExpressionStatement","start":547,"end":570,"expression":{"type":"CallExpression","start":547,"end":569,"callee":{"type":"Identifier","start":547,"end":554,"name":"resolve"},"arguments":[{"type":"Identifier","start":555,"end":568,"name":"originalValue"}],"optional":false}}]}}]}}]}}},{"type":"MethodDefinition","start":596,"end":647,"static":false,"computed":false,"key":{"type":"Identifier","start":596,"end":601,"name":"ready"},"kind":"method","value":{"type":"FunctionExpression","start":601,"end":647,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":604,"end":647,"body":[{"type":"ReturnStatement","start":615,"end":640,"argument":{"type":"CallExpression","start":622,"end":639,"callee":{"type":"MemberExpression","start":622,"end":637,"object":{"type":"Identifier","start":622,"end":629,"name":"Promise"},"property":{"type":"Identifier","start":630,"end":637,"name":"resolve"},"computed":false,"optional":false},"arguments":[],"optional":false}}]}}}]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9hZGFwdGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTs7R0FFRztBQUNILE1BQU0sT0FBTyxzQkFBc0I7SUFDL0IsWUFBb0IsUUFBaUI7UUFBakIsYUFBUSxHQUFSLFFBQVEsQ0FBUztJQUFHLENBQUM7SUFFekMsR0FBRyxDQUFDLEdBQVc7UUFDWCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQVc7UUFDZCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVO1FBQ3ZCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQztRQUM1QixPQUFPLElBQUksT0FBTyxDQUFNLE9BQU8sQ0FBQyxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsS0FBSztRQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzdCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlU3RvcmFnZSB9IGZyb20gJy4vc3luYy5tb2R1bGUnO1xyXG5cclxuLyoqXHJcbiAqIEFkYXB0ZXIgZm9yIHN5bmNocm9ub3VzIFdlYiBTdG9yYWdlLWJhc2VkIHN5bmNpbmcuIChpLmUuIGxvY2FsU3RvcmFnZSwgc2Vzc2lvblN0b3JhZ2UpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgV2ViU3RvcmFnZVN0b3JlU3RvcmFnZSBpbXBsZW1lbnRzIFN0b3JlU3RvcmFnZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zdG9yYWdlOiBTdG9yYWdlKSB7fVxyXG5cclxuICAgIGdldChrZXk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLmdldEl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuIl19","start":652,"end":2862}]},"code":"/**\r\n * Adapter for synchronous Web Storage-based syncing. (i.e. localStorage, sessionStorage)\r\n */\r\nexport class WebStorageStoreStorage {\r\n    constructor(_storage) {\r\n        this._storage = _storage;\r\n    }\r\n    get(key) {\r\n        return Promise.resolve(this._storage.getItem(key));\r\n    }\r\n    remove(key) {\r\n        return Promise.resolve(this._storage.removeItem(key));\r\n    }\r\n    set(key, value) {\r\n        const originalValue = value;\r\n        return new Promise(resolve => {\r\n            this._storage.setItem(key, value);\r\n            resolve(originalValue);\r\n        });\r\n    }\r\n    ready() {\r\n        return Promise.resolve();\r\n    }\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9hZGFwdGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTs7R0FFRztBQUNILE1BQU0sT0FBTyxzQkFBc0I7SUFDL0IsWUFBb0IsUUFBaUI7UUFBakIsYUFBUSxHQUFSLFFBQVEsQ0FBUztJQUFHLENBQUM7SUFFekMsR0FBRyxDQUFDLEdBQVc7UUFDWCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQVc7UUFDZCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVO1FBQ3ZCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQztRQUM1QixPQUFPLElBQUksT0FBTyxDQUFNLE9BQU8sQ0FBQyxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsS0FBSztRQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzdCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlU3RvcmFnZSB9IGZyb20gJy4vc3luYy5tb2R1bGUnO1xyXG5cclxuLyoqXHJcbiAqIEFkYXB0ZXIgZm9yIHN5bmNocm9ub3VzIFdlYiBTdG9yYWdlLWJhc2VkIHN5bmNpbmcuIChpLmUuIGxvY2FsU3RvcmFnZSwgc2Vzc2lvblN0b3JhZ2UpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgV2ViU3RvcmFnZVN0b3JlU3RvcmFnZSBpbXBsZW1lbnRzIFN0b3JlU3RvcmFnZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zdG9yYWdlOiBTdG9yYWdlKSB7fVxyXG5cclxuICAgIGdldChrZXk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLmdldEl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuIl19","customTransformCache":false,"dependencies":[],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\adapters.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\r\n * Adapter for synchronous Web Storage-based syncing. (i.e. localStorage, sessionStorage)\r\n */\r\nexport class WebStorageStoreStorage {\r\n    constructor(_storage) {\r\n        this._storage = _storage;\r\n    }\r\n    get(key) {\r\n        return Promise.resolve(this._storage.getItem(key));\r\n    }\r\n    remove(key) {\r\n        return Promise.resolve(this._storage.removeItem(key));\r\n    }\r\n    set(key, value) {\r\n        const originalValue = value;\r\n        return new Promise(resolve => {\r\n            this._storage.setItem(key, value);\r\n            resolve(originalValue);\r\n        });\r\n    }\r\n    ready() {\r\n        return Promise.resolve();\r\n    }\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LXN0b3JlLXN5bmMvc3JjL2xpYi9hZGFwdGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTs7R0FFRztBQUNILE1BQU0sT0FBTyxzQkFBc0I7SUFDL0IsWUFBb0IsUUFBaUI7UUFBakIsYUFBUSxHQUFSLFFBQVEsQ0FBUztJQUFHLENBQUM7SUFFekMsR0FBRyxDQUFDLEdBQVc7UUFDWCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQVc7UUFDZCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVO1FBQ3ZCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQztRQUM1QixPQUFPLElBQUksT0FBTyxDQUFNLE9BQU8sQ0FBQyxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsS0FBSztRQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzdCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlU3RvcmFnZSB9IGZyb20gJy4vc3luYy5tb2R1bGUnO1xyXG5cclxuLyoqXHJcbiAqIEFkYXB0ZXIgZm9yIHN5bmNocm9ub3VzIFdlYiBTdG9yYWdlLWJhc2VkIHN5bmNpbmcuIChpLmUuIGxvY2FsU3RvcmFnZSwgc2Vzc2lvblN0b3JhZ2UpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgV2ViU3RvcmFnZVN0b3JlU3RvcmFnZSBpbXBsZW1lbnRzIFN0b3JlU3RvcmFnZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zdG9yYWdlOiBTdG9yYWdlKSB7fVxyXG5cclxuICAgIGdldChrZXk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLmdldEl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuIl19","originalSourcemap":{"version":3,"file":"adapters.js","sourceRoot":"","sources":["../../../../projects/ngrx-store-sync/src/lib/adapters.ts"],"names":[],"mappings":[[[0,0,2,0]],[],[[3,0,4,3]],[[0,0,5,0],[6,0,5,6],[13,0,5,13],[35,0,5,35]],[[4,0,6,4],[16,0,6,24],[24,0,6,41]],[[8,0,6,24],[21,0,6,32],[24,0,6,24],[32,0,6,32],[33,0,6,41]],[[4,0,6,44],[5,0,6,45]],[[4,0,8,4],[7,0,8,7],[8,0,8,8],[11,0,8,19]],[[8,0,9,8],[15,0,9,15],[22,0,9,22],[23,0,9,23],[30,0,9,30],[31,0,9,31],[35,0,9,35],[36,0,9,36],[44,0,9,44],[45,0,9,45],[52,0,9,52],[53,0,9,53],[56,0,9,56],[57,0,9,57],[58,0,9,58],[59,0,9,59]],[[4,0,10,4],[5,0,10,5]],[[4,0,12,4],[10,0,12,10],[11,0,12,11],[14,0,12,22]],[[8,0,13,8],[15,0,13,15],[22,0,13,22],[23,0,13,23],[30,0,13,30],[31,0,13,31],[35,0,13,35],[36,0,13,36],[44,0,13,44],[45,0,13,45],[55,0,13,55],[56,0,13,56],[59,0,13,59],[60,0,13,60],[61,0,13,61],[62,0,13,62]],[[4,0,14,4],[5,0,14,5]],[[4,0,16,4],[7,0,16,7],[8,0,16,8],[11,0,16,19],[13,0,16,21],[18,0,16,31]],[[8,0,17,8],[14,0,17,14],[27,0,17,27],[30,0,17,30],[35,0,17,35],[36,0,17,36]],[[8,0,18,8],[15,0,18,15],[19,0,18,19],[26,0,18,26],[27,0,18,32],[34,0,18,39],[35,0,18,40],[37,0,18,42]],[[12,0,19,12],[16,0,19,16],[17,0,19,17],[25,0,19,25],[26,0,19,26],[33,0,19,33],[34,0,19,34],[37,0,19,37],[39,0,19,39],[44,0,19,44],[45,0,19,45],[46,0,19,46]],[[12,0,20,12],[19,0,20,19],[20,0,20,20],[33,0,20,33],[34,0,20,34],[35,0,20,35]],[[8,0,21,8],[9,0,21,9],[10,0,21,10],[11,0,21,11]],[[4,0,22,4],[5,0,22,5]],[[4,0,24,4],[9,0,24,9]],[[8,0,25,8],[15,0,25,15],[22,0,25,22],[23,0,25,23],[30,0,25,30],[32,0,25,32],[33,0,25,33]],[[4,0,26,4],[5,0,26,5]],[[1,0,27,1]]],"sourcesContent":["import { StoreStorage } from './sync.module';\r\n\r\n/**\r\n * Adapter for synchronous Web Storage-based syncing. (i.e. localStorage, sessionStorage)\r\n */\r\nexport class WebStorageStoreStorage implements StoreStorage {\r\n    constructor(private _storage: Storage) {}\r\n\r\n    get(key: string): Promise<any> {\r\n        return Promise.resolve(this._storage.getItem(key));\r\n    }\r\n\r\n    remove(key: string): Promise<void> {\r\n        return Promise.resolve(this._storage.removeItem(key));\r\n    }\r\n\r\n    set(key: string, value: any): Promise<any> {\r\n        const originalValue = value;\r\n        return new Promise<any>(resolve => {\r\n            this._storage.setItem(key, value);\r\n            resolve(originalValue);\r\n        });\r\n    }\r\n\r\n    ready(): Promise<void> {\r\n        return Promise.resolve();\r\n    }\r\n}\r\n"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":837,"body":[{"type":"ExportNamedDeclaration","start":51,"end":103,"declaration":null,"specifiers":[{"type":"ExportSpecifier","start":60,"end":75,"local":{"type":"Identifier","start":60,"end":75,"name":"StoreSyncModule"},"exported":{"type":"Identifier","start":60,"end":75,"name":"StoreSyncModule"}}],"source":{"type":"Literal","start":83,"end":102,"value":"./lib/sync.module","raw":"'./lib/sync.module'"}},{"type":"ExportNamedDeclaration","start":105,"end":161,"declaration":null,"specifiers":[{"type":"ExportSpecifier","start":114,"end":136,"local":{"type":"Identifier","start":114,"end":136,"name":"WebStorageStoreStorage"},"exported":{"type":"Identifier","start":114,"end":136,"name":"WebStorageStoreStorage"}}],"source":{"type":"Literal","start":144,"end":160,"value":"./lib/adapters","raw":"'./lib/adapters'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUNILE9BQU8sRUFBaUMsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbkYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0JBQWdCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgbmdyeC1zdG9yZS1zeW5jXHJcbiAqL1xyXG5leHBvcnQgeyBTdG9yZVN5bmNDb25maWcsIFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jTW9kdWxlIH0gZnJvbSAnLi9saWIvc3luYy5tb2R1bGUnO1xyXG5leHBvcnQgeyBXZWJTdG9yYWdlU3RvcmVTdG9yYWdlIH0gZnJvbSAnLi9saWIvYWRhcHRlcnMnO1xyXG4iXX0=","start":163,"end":837}]},"code":"/*\r\n * Public API Surface of ngrx-store-sync\r\n */\r\nexport { StoreSyncModule } from './lib/sync.module';\r\nexport { WebStorageStoreStorage } from './lib/adapters';\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUNILE9BQU8sRUFBaUMsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbkYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0JBQWdCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgbmdyeC1zdG9yZS1zeW5jXHJcbiAqL1xyXG5leHBvcnQgeyBTdG9yZVN5bmNDb25maWcsIFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jTW9kdWxlIH0gZnJvbSAnLi9saWIvc3luYy5tb2R1bGUnO1xyXG5leHBvcnQgeyBXZWJTdG9yYWdlU3RvcmVTdG9yYWdlIH0gZnJvbSAnLi9saWIvYWRhcHRlcnMnO1xyXG4iXX0=","customTransformCache":false,"dependencies":["C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.module.mjs","C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\adapters.mjs"],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\r\n * Public API Surface of ngrx-store-sync\r\n */\r\nexport { StoreSyncModule } from './lib/sync.module';\r\nexport { WebStorageStoreStorage } from './lib/adapters';\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25ncngtc3RvcmUtc3luYy9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUNILE9BQU8sRUFBaUMsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbkYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0JBQWdCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgbmdyeC1zdG9yZS1zeW5jXHJcbiAqL1xyXG5leHBvcnQgeyBTdG9yZVN5bmNDb25maWcsIFN0b3JlU3RvcmFnZSwgU3RvcmVTeW5jTW9kdWxlIH0gZnJvbSAnLi9saWIvc3luYy5tb2R1bGUnO1xyXG5leHBvcnQgeyBXZWJTdG9yYWdlU3RvcmVTdG9yYWdlIH0gZnJvbSAnLi9saWIvYWRhcHRlcnMnO1xyXG4iXX0=","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/ngrx-store-sync/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,3,0],[7,0,3,7],[9,0,3,40],[24,0,3,55],[26,0,3,57],[32,0,3,63],[51,0,3,82],[52,0,3,83]],[[0,0,4,0],[7,0,4,7],[9,0,4,9],[31,0,4,31],[33,0,4,33],[39,0,4,39],[55,0,4,55],[56,0,4,56]]],"sourcesContent":["/*\r\n * Public API Surface of ngrx-store-sync\r\n */\r\nexport { StoreSyncConfig, StoreStorage, StoreSyncModule } from './lib/sync.module';\r\nexport { WebStorageStoreStorage } from './lib/adapters';\r\n"]},"resolvedIds":{"./lib/sync.module":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\sync.module.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false},"./lib/adapters":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\lib\\adapters.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":520,"body":[{"type":"ExportAllDeclaration","start":51,"end":80,"exported":null,"source":{"type":"Literal","start":65,"end":79,"value":"./public-api","raw":"'./public-api'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmdyeC1zdG9yZS1zeW5jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9uZ3J4LXN0b3JlLXN5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","start":82,"end":520}]},"code":"/**\r\n * Generated bundle index. Do not edit.\r\n */\r\nexport * from './public-api';\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmdyeC1zdG9yZS1zeW5jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9uZ3J4LXN0b3JlLXN5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\public-api.mjs"],"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\ngrx-store-sync.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\r\n * Generated bundle index. Do not edit.\r\n */\r\nexport * from './public-api';\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmdyeC1zdG9yZS1zeW5jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbmdyeC1zdG9yZS1zeW5jL3NyYy9uZ3J4LXN0b3JlLXN5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"ngrx-store-sync.js","sourceRoot":"","sources":["../../../projects/ngrx-store-sync/src/ngrx-store-sync.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"external":false,"id":"C:\\Users\\sam.bengtson\\Documents\\Angular\\ngrx-store-sync\\dist\\ngrx-store-sync\\esm2020\\public-api.mjs","meta":{},"moduleSideEffects":true,"syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"sourcemaps":{},"json":{}}}